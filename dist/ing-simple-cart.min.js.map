{"version":3,"file":"ing-simple-cart.min.js","sources":["../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../utils/localstorage.js","../node_modules/lit-html/lib/dom.js","../node_modules/lit-html/lib/template.js","../node_modules/lit-html/lib/modify-template.js","../node_modules/lit-html/lib/directive.js","../node_modules/lit-html/lib/part.js","../node_modules/lit-html/lib/template-instance.js","../node_modules/lit-html/lib/template-result.js","../node_modules/lit-html/lib/parts.js","../node_modules/lit-html/lib/template-factory.js","../node_modules/lit-html/lib/render.js","../node_modules/lit-html/lib/default-template-processor.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-html/lib/shady-render.js","../node_modules/lit-element/lib/updating-element.js","../node_modules/lit-element/lib/css-tag.js","../node_modules/lit-element/lit-element.js","../node_modules/@open-wc/dedupe-mixin/src/dedupeMixin.js","../node_modules/@open-wc/scoped-elements/src/Cache.js","../node_modules/@open-wc/scoped-elements/src/createUniqueTag.js","../node_modules/@open-wc/scoped-elements/src/globalTagsCache.js","../node_modules/@open-wc/scoped-elements/src/registerElement.js","../node_modules/@open-wc/scoped-elements/src/transform.js","../node_modules/@open-wc/scoped-elements/src/shadyTemplateFactory.js","../node_modules/@open-wc/scoped-elements/src/ScopedElementsMixin.js","../node_modules/@lion/core/src/DisabledMixin.js","../node_modules/@lion/core/src/DisabledWithTabIndexMixin.js","../node_modules/@lion/core/src/SlotMixin.js","../node_modules/@lion/core/src/browserDetection.js","../node_modules/@lion/form-core/src/registration/FormRegisteringMixin.js","../node_modules/@lion/form-core/src/utils/getAriaElementsInRightDomOrder.js","../node_modules/@lion/form-core/src/validate/Unparseable.js","../node_modules/@lion/form-core/src/FormControlMixin.js","../node_modules/@lion/form-core/src/FocusMixin.js","../node_modules/singleton-manager/src/SingletonManagerClass.js","../node_modules/singleton-manager/index.js","../node_modules/@bundled-es-modules/message-format/MessageFormat.js","../node_modules/@lion/localize/src/isLocalizeESModule.js","../node_modules/@lion/localize/src/LocalizeManager.js","../node_modules/@lion/localize/src/localize.js","../node_modules/@lion/form-core/src/utils/AsyncQueue.js","../node_modules/@lion/form-core/src/utils/pascalCase.js","../node_modules/@lion/form-core/src/utils/SyncUpdatableMixin.js","../node_modules/@lion/form-core/src/validate/LionValidationFeedback.js","../node_modules/@lion/form-core/src/validate/Validator.js","../node_modules/@lion/form-core/src/validate/ResultValidator.js","../node_modules/@lion/form-core/src/validate/validators/Required.js","../node_modules/@lion/form-core/src/validate/ValidateMixin.js","../node_modules/@lion/form-core/src/FormatMixin.js","../node_modules/@lion/form-core/src/InteractionStateMixin.js","../node_modules/@lion/form-core/src/LionField.js","../node_modules/@lion/form-core/src/NativeTextFieldMixin.js","../node_modules/@lion/input/src/LionInput.js","../node_modules/@lion/input/lion-input.js","../node_modules/@lion/button/src/LionButton.js","../node_modules/@lion/button/lion-button.js","../index.js"],"sourcesContent":["function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import * as data from '../data/product.json'\nimport * as userData from '../data/user.json'\n\nconst STORAGE_KEY = '__cart'\n\nlet saveListener = null;\n\nexport const listen = (cb) => { saveListener = cb }; // ugly but storage listener is not working for the same window..\n\nexport const list = (key) => JSON.parse(localStorage.getItem(key || STORAGE_KEY)) || [];\n\nexport const products = () => JSON.parse(JSON.stringify(data)) || [];\n\nexport const user = () => JSON.parse(JSON.stringify(userData)) || {};\n\nexport const save = (data, key) => {\n\tlocalStorage.setItem(key || STORAGE_KEY, JSON.stringify(data));\n\tif(saveListener) saveListener(list(key || STORAGE_KEY))\n}\n\nexport const clear = (key) => {\n\tlocalStorage.removeItem(key || STORAGE_KEY)\n\tif(saveListener) saveListener(list(key || STORAGE_KEY))\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = typeof window !== 'undefined' &&\n    window.customElements != null &&\n    window.customElements.polyfillWrapFlushCallback !==\n        undefined;\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes = (container, start, end = null, before = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.insertBefore(start, before);\n        start = n;\n    }\n};\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes = (container, start, end = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.removeChild(start);\n        start = n;\n    }\n};\n//# sourceMappingURL=dom.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n    constructor(result, element) {\n        this.parts = [];\n        this.element = element;\n        const nodesToRemove = [];\n        const stack = [];\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(element.content, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        // Keeps track of the last index associated with a part. We try to delete\n        // unnecessary nodes, but we never want to associate two different parts\n        // to the same index. They must have a constant node between.\n        let lastPartIndex = 0;\n        let index = -1;\n        let partIndex = 0;\n        const { strings, values: { length } } = result;\n        while (partIndex < length) {\n            const node = walker.nextNode();\n            if (node === null) {\n                // We've exhausted the content inside a nested template element.\n                // Because we still have parts (the outer for-loop), we know:\n                // - There is a template in the stack\n                // - The walker will find a nextNode outside the template\n                walker.currentNode = stack.pop();\n                continue;\n            }\n            index++;\n            if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n                if (node.hasAttributes()) {\n                    const attributes = node.attributes;\n                    const { length } = attributes;\n                    // Per\n                    // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n                    // attributes are not guaranteed to be returned in document order.\n                    // In particular, Edge/IE can return them out of order, so we cannot\n                    // assume a correspondence between part index and attribute index.\n                    let count = 0;\n                    for (let i = 0; i < length; i++) {\n                        if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n                            count++;\n                        }\n                    }\n                    while (count-- > 0) {\n                        // Get the template literal section leading up to the first\n                        // expression in this attribute\n                        const stringForPart = strings[partIndex];\n                        // Find the attribute name\n                        const name = lastAttributeNameRegex.exec(stringForPart)[2];\n                        // Find the corresponding attribute\n                        // All bound attributes have had a suffix added in\n                        // TemplateResult#getHTML to opt out of special attribute\n                        // handling. To look up the attribute value we also need to add\n                        // the suffix.\n                        const attributeLookupName = name.toLowerCase() + boundAttributeSuffix;\n                        const attributeValue = node.getAttribute(attributeLookupName);\n                        node.removeAttribute(attributeLookupName);\n                        const statics = attributeValue.split(markerRegex);\n                        this.parts.push({ type: 'attribute', index, name, strings: statics });\n                        partIndex += statics.length - 1;\n                    }\n                }\n                if (node.tagName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n            }\n            else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n                const data = node.data;\n                if (data.indexOf(marker) >= 0) {\n                    const parent = node.parentNode;\n                    const strings = data.split(markerRegex);\n                    const lastIndex = strings.length - 1;\n                    // Generate a new text node for each literal section\n                    // These nodes are also used as the markers for node parts\n                    for (let i = 0; i < lastIndex; i++) {\n                        let insert;\n                        let s = strings[i];\n                        if (s === '') {\n                            insert = createMarker();\n                        }\n                        else {\n                            const match = lastAttributeNameRegex.exec(s);\n                            if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                                s = s.slice(0, match.index) + match[1] +\n                                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n                            }\n                            insert = document.createTextNode(s);\n                        }\n                        parent.insertBefore(insert, node);\n                        this.parts.push({ type: 'node', index: ++index });\n                    }\n                    // If there's no text, we must insert a comment to mark our place.\n                    // Else, we can trust it will stick around after cloning.\n                    if (strings[lastIndex] === '') {\n                        parent.insertBefore(createMarker(), node);\n                        nodesToRemove.push(node);\n                    }\n                    else {\n                        node.data = strings[lastIndex];\n                    }\n                    // We have a part for each match found\n                    partIndex += lastIndex;\n                }\n            }\n            else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n                if (node.data === marker) {\n                    const parent = node.parentNode;\n                    // Add a new marker node to be the startNode of the Part if any of\n                    // the following are true:\n                    //  * We don't have a previousSibling\n                    //  * The previousSibling is already the start of a previous part\n                    if (node.previousSibling === null || index === lastPartIndex) {\n                        index++;\n                        parent.insertBefore(createMarker(), node);\n                    }\n                    lastPartIndex = index;\n                    this.parts.push({ type: 'node', index });\n                    // If we don't have a nextSibling, keep this node so we have an end.\n                    // Else, we can remove it to save future costs.\n                    if (node.nextSibling === null) {\n                        node.data = '';\n                    }\n                    else {\n                        nodesToRemove.push(node);\n                        index--;\n                    }\n                    partIndex++;\n                }\n                else {\n                    let i = -1;\n                    while ((i = node.data.indexOf(marker, i + 1)) !== -1) {\n                        // Comment node has a binding marker inside, make an inactive part\n                        // The binding won't work, but subsequent bindings will\n                        // TODO (justinfagnani): consider whether it's even worth it to\n                        // make bindings in comments work\n                        this.parts.push({ type: 'node', index: -1 });\n                        partIndex++;\n                    }\n                }\n            }\n        }\n        // Remove text binding nodes after the walk to not disturb the TreeWalker\n        for (const n of nodesToRemove) {\n            n.parentNode.removeChild(n);\n        }\n    }\n}\nconst endsWith = (str, suffix) => {\n    const index = str.length - suffix.length;\n    return index >= 0 && str.slice(index) === suffix;\n};\nexport const isTemplatePartActive = (part) => part.index !== -1;\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex = \n// eslint-disable-next-line no-control-regex\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n//# sourceMappingURL=template.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isTemplatePartActive } from './template.js';\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(template, nodesToRemove) {\n    const { element: { content }, parts } = template;\n    const walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n    let partIndex = nextActiveIndexInTemplateParts(parts);\n    let part = parts[partIndex];\n    let nodeIndex = -1;\n    let removeCount = 0;\n    const nodesToRemoveInTemplate = [];\n    let currentRemovingNode = null;\n    while (walker.nextNode()) {\n        nodeIndex++;\n        const node = walker.currentNode;\n        // End removal if stepped past the removing node\n        if (node.previousSibling === currentRemovingNode) {\n            currentRemovingNode = null;\n        }\n        // A node to remove was found in the template\n        if (nodesToRemove.has(node)) {\n            nodesToRemoveInTemplate.push(node);\n            // Track node we're removing\n            if (currentRemovingNode === null) {\n                currentRemovingNode = node;\n            }\n        }\n        // When removing, increment count by which to adjust subsequent part indices\n        if (currentRemovingNode !== null) {\n            removeCount++;\n        }\n        while (part !== undefined && part.index === nodeIndex) {\n            // If part is in a removed node deactivate it by setting index to -1 or\n            // adjust the index as needed.\n            part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n            // go to the next active part.\n            partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n            part = parts[partIndex];\n        }\n    }\n    nodesToRemoveInTemplate.forEach((n) => n.parentNode.removeChild(n));\n}\nconst countNodes = (node) => {\n    let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n    const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n    while (walker.nextNode()) {\n        count++;\n    }\n    return count;\n};\nconst nextActiveIndexInTemplateParts = (parts, startIndex = -1) => {\n    for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(template, node, refNode = null) {\n    const { element: { content }, parts } = template;\n    // If there's no refNode, then put node at end of template.\n    // No part indices need to be shifted in this case.\n    if (refNode === null || refNode === undefined) {\n        content.appendChild(node);\n        return;\n    }\n    const walker = document.createTreeWalker(content, walkerNodeFilter, null, false);\n    let partIndex = nextActiveIndexInTemplateParts(parts);\n    let insertCount = 0;\n    let walkerIndex = -1;\n    while (walker.nextNode()) {\n        walkerIndex++;\n        const walkerNode = walker.currentNode;\n        if (walkerNode === refNode) {\n            insertCount = countNodes(node);\n            refNode.parentNode.insertBefore(node, refNode);\n        }\n        while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n            // If we've inserted the node, simply adjust all subsequent parts\n            if (insertCount > 0) {\n                while (partIndex !== -1) {\n                    parts[partIndex].index += insertCount;\n                    partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n                }\n                return;\n            }\n            partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n    }\n}\n//# sourceMappingURL=modify-template.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst directives = new WeakMap();\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = (f) => ((...args) => {\n    const d = f(...args);\n    directives.set(d, true);\n    return d;\n});\nexport const isDirective = (o) => {\n    return typeof o === 'function' && directives.has(o);\n};\n//# sourceMappingURL=directive.js.map","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n//# sourceMappingURL=part.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isCEPolyfill } from './dom.js';\nimport { isTemplatePartActive } from './template.js';\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n    constructor(template, processor, options) {\n        this.__parts = [];\n        this.template = template;\n        this.processor = processor;\n        this.options = options;\n    }\n    update(values) {\n        let i = 0;\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.setValue(values[i]);\n            }\n            i++;\n        }\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.commit();\n            }\n        }\n    }\n    _clone() {\n        // There are a number of steps in the lifecycle of a template instance's\n        // DOM fragment:\n        //  1. Clone - create the instance fragment\n        //  2. Adopt - adopt into the main document\n        //  3. Process - find part markers and create parts\n        //  4. Upgrade - upgrade custom elements\n        //  5. Update - set node, attribute, property, etc., values\n        //  6. Connect - connect to the document. Optional and outside of this\n        //     method.\n        //\n        // We have a few constraints on the ordering of these steps:\n        //  * We need to upgrade before updating, so that property values will pass\n        //    through any property setters.\n        //  * We would like to process before upgrading so that we're sure that the\n        //    cloned fragment is inert and not disturbed by self-modifying DOM.\n        //  * We want custom elements to upgrade even in disconnected fragments.\n        //\n        // Given these constraints, with full custom elements support we would\n        // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n        //\n        // But Safari does not implement CustomElementRegistry#upgrade, so we\n        // can not implement that order and still have upgrade-before-update and\n        // upgrade disconnected fragments. So we instead sacrifice the\n        // process-before-upgrade constraint, since in Custom Elements v1 elements\n        // must not modify their light DOM in the constructor. We still have issues\n        // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n        // that don't strictly adhere to the no-modification rule because shadow\n        // DOM, which may be created in the constructor, is emulated by being placed\n        // in the light DOM.\n        //\n        // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n        // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n        // in one step.\n        //\n        // The Custom Elements v1 polyfill supports upgrade(), so the order when\n        // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n        // Connect.\n        const fragment = isCEPolyfill ?\n            this.template.element.content.cloneNode(true) :\n            document.importNode(this.template.element.content, true);\n        const stack = [];\n        const parts = this.template.parts;\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(fragment, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        let partIndex = 0;\n        let nodeIndex = 0;\n        let part;\n        let node = walker.nextNode();\n        // Loop through all the nodes and parts of a template\n        while (partIndex < parts.length) {\n            part = parts[partIndex];\n            if (!isTemplatePartActive(part)) {\n                this.__parts.push(undefined);\n                partIndex++;\n                continue;\n            }\n            // Progress the tree walker until we find our next part's node.\n            // Note that multiple parts may share the same node (attribute parts\n            // on a single element), so this loop may not run at all.\n            while (nodeIndex < part.index) {\n                nodeIndex++;\n                if (node.nodeName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n                if ((node = walker.nextNode()) === null) {\n                    // We've exhausted the content inside a nested template element.\n                    // Because we still have parts (the outer for-loop), we know:\n                    // - There is a template in the stack\n                    // - The walker will find a nextNode outside the template\n                    walker.currentNode = stack.pop();\n                    node = walker.nextNode();\n                }\n            }\n            // We've arrived at our part's node.\n            if (part.type === 'node') {\n                const part = this.processor.handleTextExpression(this.options);\n                part.insertAfterNode(node.previousSibling);\n                this.__parts.push(part);\n            }\n            else {\n                this.__parts.push(...this.processor.handleAttributeExpressions(node, part.name, part.strings, this.options));\n            }\n            partIndex++;\n        }\n        if (isCEPolyfill) {\n            document.adoptNode(fragment);\n            customElements.upgrade(fragment);\n        }\n        return fragment;\n    }\n}\n//# sourceMappingURL=template-instance.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * @module lit-html\n */\nimport { reparentNodes } from './dom.js';\nimport { boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker } from './template.js';\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = window.trustedTypes &&\n    trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\nconst commentMarker = ` ${marker} `;\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n    constructor(strings, values, type, processor) {\n        this.strings = strings;\n        this.values = values;\n        this.type = type;\n        this.processor = processor;\n    }\n    /**\n     * Returns a string of HTML used to create a `<template>` element.\n     */\n    getHTML() {\n        const l = this.strings.length - 1;\n        let html = '';\n        let isCommentBinding = false;\n        for (let i = 0; i < l; i++) {\n            const s = this.strings[i];\n            // For each binding we want to determine the kind of marker to insert\n            // into the template source before it's parsed by the browser's HTML\n            // parser. The marker type is based on whether the expression is in an\n            // attribute, text, or comment position.\n            //   * For node-position bindings we insert a comment with the marker\n            //     sentinel as its text content, like <!--{{lit-guid}}-->.\n            //   * For attribute bindings we insert just the marker sentinel for the\n            //     first binding, so that we support unquoted attribute bindings.\n            //     Subsequent bindings can use a comment marker because multi-binding\n            //     attributes must be quoted.\n            //   * For comment bindings we insert just the marker sentinel so we don't\n            //     close the comment.\n            //\n            // The following code scans the template source, but is *not* an HTML\n            // parser. We don't need to track the tree structure of the HTML, only\n            // whether a binding is inside a comment, and if not, if it appears to be\n            // the first binding in an attribute.\n            const commentOpen = s.lastIndexOf('<!--');\n            // We're in comment position if we have a comment open with no following\n            // comment close. Because <-- can appear in an attribute value there can\n            // be false positives.\n            isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n                s.indexOf('-->', commentOpen + 1) === -1;\n            // Check to see if we have an attribute-like sequence preceding the\n            // expression. This can match \"name=value\" like structures in text,\n            // comments, and attribute values, so there can be false-positives.\n            const attributeMatch = lastAttributeNameRegex.exec(s);\n            if (attributeMatch === null) {\n                // We're only in this branch if we don't have a attribute-like\n                // preceding sequence. For comments, this guards against unusual\n                // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n                // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n                // below.\n                html += s + (isCommentBinding ? commentMarker : nodeMarker);\n            }\n            else {\n                // For attributes we use just a marker sentinel, and also append a\n                // $lit$ suffix to the name to opt-out of attribute-specific parsing\n                // that IE and Edge do for style and certain SVG attributes.\n                html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n                    attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n                    marker;\n            }\n        }\n        html += this.strings[l];\n        return html;\n    }\n    getTemplateElement() {\n        const template = document.createElement('template');\n        let value = this.getHTML();\n        if (policy !== undefined) {\n            // this is secure because `this.strings` is a TemplateStringsArray.\n            // TODO: validate this when\n            // https://github.com/tc39/proposal-array-is-template-object is\n            // implemented.\n            value = policy.createHTML(value);\n        }\n        template.innerHTML = value;\n        return template;\n    }\n}\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n    getHTML() {\n        return `<svg>${super.getHTML()}</svg>`;\n    }\n    getTemplateElement() {\n        const template = super.getTemplateElement();\n        const content = template.content;\n        const svgElement = content.firstChild;\n        content.removeChild(svgElement);\n        reparentNodes(content, svgElement.firstChild);\n        return template;\n    }\n}\n//# sourceMappingURL=template-result.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { isDirective } from './directive.js';\nimport { removeNodes } from './dom.js';\nimport { noChange, nothing } from './part.js';\nimport { TemplateInstance } from './template-instance.js';\nimport { TemplateResult } from './template-result.js';\nimport { createMarker } from './template.js';\nexport const isPrimitive = (value) => {\n    return (value === null ||\n        !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value) => {\n    return Array.isArray(value) ||\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        !!(value && value[Symbol.iterator]);\n};\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attribute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n    constructor(element, name, strings) {\n        this.dirty = true;\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n        this.parts = [];\n        for (let i = 0; i < strings.length - 1; i++) {\n            this.parts[i] = this._createPart();\n        }\n    }\n    /**\n     * Creates a single part. Override this to create a differnt type of part.\n     */\n    _createPart() {\n        return new AttributePart(this);\n    }\n    _getValue() {\n        const strings = this.strings;\n        const l = strings.length - 1;\n        const parts = this.parts;\n        // If we're assigning an attribute via syntax like:\n        //    attr=\"${foo}\"  or  attr=${foo}\n        // but not\n        //    attr=\"${foo} ${bar}\" or attr=\"${foo} baz\"\n        // then we don't want to coerce the attribute value into one long\n        // string. Instead we want to just return the value itself directly,\n        // so that sanitizeDOMValue can get the actual value rather than\n        // String(value)\n        // The exception is if v is an array, in which case we do want to smash\n        // it together into a string without calling String() on the array.\n        //\n        // This also allows trusted values (when using TrustedTypes) being\n        // assigned to DOM sinks without being stringified in the process.\n        if (l === 1 && strings[0] === '' && strings[1] === '') {\n            const v = parts[0].value;\n            if (typeof v === 'symbol') {\n                return String(v);\n            }\n            if (typeof v === 'string' || !isIterable(v)) {\n                return v;\n            }\n        }\n        let text = '';\n        for (let i = 0; i < l; i++) {\n            text += strings[i];\n            const part = parts[i];\n            if (part !== undefined) {\n                const v = part.value;\n                if (isPrimitive(v) || !isIterable(v)) {\n                    text += typeof v === 'string' ? v : String(v);\n                }\n                else {\n                    for (const t of v) {\n                        text += typeof t === 'string' ? t : String(t);\n                    }\n                }\n            }\n        }\n        text += strings[l];\n        return text;\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            this.element.setAttribute(this.name, this._getValue());\n        }\n    }\n}\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart {\n    constructor(committer) {\n        this.value = undefined;\n        this.committer = committer;\n    }\n    setValue(value) {\n        if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n            this.value = value;\n            // If the value is a not a directive, dirty the committer so that it'll\n            // call setAttribute. If the value is a directive, it'll dirty the\n            // committer if it calls setValue().\n            if (!isDirective(value)) {\n                this.committer.dirty = true;\n            }\n        }\n    }\n    commit() {\n        while (isDirective(this.value)) {\n            const directive = this.value;\n            this.value = noChange;\n            directive(this);\n        }\n        if (this.value === noChange) {\n            return;\n        }\n        this.committer.commit();\n    }\n}\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart {\n    constructor(options) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.options = options;\n    }\n    /**\n     * Appends this part into a container.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendInto(container) {\n        this.startNode = container.appendChild(createMarker());\n        this.endNode = container.appendChild(createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n     * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n     * such as those that appear in a literal section of a template.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterNode(ref) {\n        this.startNode = ref;\n        this.endNode = ref.nextSibling;\n    }\n    /**\n     * Appends this part into a parent part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendIntoPart(part) {\n        part.__insert(this.startNode = createMarker());\n        part.__insert(this.endNode = createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterPart(ref) {\n        ref.__insert(this.startNode = createMarker());\n        this.endNode = ref.endNode;\n        ref.endNode = this.startNode;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        if (this.startNode.parentNode === null) {\n            return;\n        }\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        const value = this.__pendingValue;\n        if (value === noChange) {\n            return;\n        }\n        if (isPrimitive(value)) {\n            if (value !== this.value) {\n                this.__commitText(value);\n            }\n        }\n        else if (value instanceof TemplateResult) {\n            this.__commitTemplateResult(value);\n        }\n        else if (value instanceof Node) {\n            this.__commitNode(value);\n        }\n        else if (isIterable(value)) {\n            this.__commitIterable(value);\n        }\n        else if (value === nothing) {\n            this.value = nothing;\n            this.clear();\n        }\n        else {\n            // Fallback, will render the string representation\n            this.__commitText(value);\n        }\n    }\n    __insert(node) {\n        this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n    __commitNode(value) {\n        if (this.value === value) {\n            return;\n        }\n        this.clear();\n        this.__insert(value);\n        this.value = value;\n    }\n    __commitText(value) {\n        const node = this.startNode.nextSibling;\n        value = value == null ? '' : value;\n        // If `value` isn't already a string, we explicitly convert it here in case\n        // it can't be implicitly converted - i.e. it's a symbol.\n        const valueAsString = typeof value === 'string' ? value : String(value);\n        if (node === this.endNode.previousSibling &&\n            node.nodeType === 3 /* Node.TEXT_NODE */) {\n            // If we only have a single text node between the markers, we can just\n            // set its value, rather than replacing it.\n            // TODO(justinfagnani): Can we just check if this.value is primitive?\n            node.data = valueAsString;\n        }\n        else {\n            this.__commitNode(document.createTextNode(valueAsString));\n        }\n        this.value = value;\n    }\n    __commitTemplateResult(value) {\n        const template = this.options.templateFactory(value);\n        if (this.value instanceof TemplateInstance &&\n            this.value.template === template) {\n            this.value.update(value.values);\n        }\n        else {\n            // Make sure we propagate the template processor from the TemplateResult\n            // so that we use its syntax extension, etc. The template factory comes\n            // from the render function options so that it can control template\n            // caching and preprocessing.\n            const instance = new TemplateInstance(template, value.processor, this.options);\n            const fragment = instance._clone();\n            instance.update(value.values);\n            this.__commitNode(fragment);\n            this.value = instance;\n        }\n    }\n    __commitIterable(value) {\n        // For an Iterable, we create a new InstancePart per item, then set its\n        // value to the item. This is a little bit of overhead for every item in\n        // an Iterable, but it lets us recurse easily and efficiently update Arrays\n        // of TemplateResults that will be commonly returned from expressions like:\n        // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n        // If _value is an array, then the previous render was of an\n        // iterable and _value will contain the NodeParts from the previous\n        // render. If _value is not an array, clear this part and make a new\n        // array for NodeParts.\n        if (!Array.isArray(this.value)) {\n            this.value = [];\n            this.clear();\n        }\n        // Lets us keep track of how many items we stamped so we can clear leftover\n        // items from a previous render\n        const itemParts = this.value;\n        let partIndex = 0;\n        let itemPart;\n        for (const item of value) {\n            // Try to reuse an existing part\n            itemPart = itemParts[partIndex];\n            // If no existing part, create a new one\n            if (itemPart === undefined) {\n                itemPart = new NodePart(this.options);\n                itemParts.push(itemPart);\n                if (partIndex === 0) {\n                    itemPart.appendIntoPart(this);\n                }\n                else {\n                    itemPart.insertAfterPart(itemParts[partIndex - 1]);\n                }\n            }\n            itemPart.setValue(item);\n            itemPart.commit();\n            partIndex++;\n        }\n        if (partIndex < itemParts.length) {\n            // Truncate the parts array so _value reflects the current state\n            itemParts.length = partIndex;\n            this.clear(itemPart && itemPart.endNode);\n        }\n    }\n    clear(startNode = this.startNode) {\n        removeNodes(this.startNode.parentNode, startNode.nextSibling, this.endNode);\n    }\n}\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart {\n    constructor(element, name, strings) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n            throw new Error('Boolean attributes can only contain a single expression');\n        }\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const value = !!this.__pendingValue;\n        if (this.value !== value) {\n            if (value) {\n                this.element.setAttribute(this.name, '');\n            }\n            else {\n                this.element.removeAttribute(this.name);\n            }\n            this.value = value;\n        }\n        this.__pendingValue = noChange;\n    }\n}\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n    constructor(element, name, strings) {\n        super(element, name, strings);\n        this.single =\n            (strings.length === 2 && strings[0] === '' && strings[1] === '');\n    }\n    _createPart() {\n        return new PropertyPart(this);\n    }\n    _getValue() {\n        if (this.single) {\n            return this.parts[0].value;\n        }\n        return super._getValue();\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.element[this.name] = this._getValue();\n        }\n    }\n}\nexport class PropertyPart extends AttributePart {\n}\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // event options not supported\n    }\n})();\nexport class EventPart {\n    constructor(element, eventName, eventContext) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.element = element;\n        this.eventName = eventName;\n        this.eventContext = eventContext;\n        this.__boundHandleEvent = (e) => this.handleEvent(e);\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            directive(this);\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const newListener = this.__pendingValue;\n        const oldListener = this.value;\n        const shouldRemoveListener = newListener == null ||\n            oldListener != null &&\n                (newListener.capture !== oldListener.capture ||\n                    newListener.once !== oldListener.once ||\n                    newListener.passive !== oldListener.passive);\n        const shouldAddListener = newListener != null && (oldListener == null || shouldRemoveListener);\n        if (shouldRemoveListener) {\n            this.element.removeEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        if (shouldAddListener) {\n            this.__options = getOptions(newListener);\n            this.element.addEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        this.value = newListener;\n        this.__pendingValue = noChange;\n    }\n    handleEvent(event) {\n        if (typeof this.value === 'function') {\n            this.value.call(this.eventContext || this.element, event);\n        }\n        else {\n            this.value.handleEvent(event);\n        }\n    }\n}\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o) => o &&\n    (eventOptionsSupported ?\n        { capture: o.capture, passive: o.passive, once: o.once } :\n        o.capture);\n//# sourceMappingURL=parts.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { marker, Template } from './template.js';\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result) {\n    let templateCache = templateCaches.get(result.type);\n    if (templateCache === undefined) {\n        templateCache = {\n            stringsArray: new WeakMap(),\n            keyString: new Map()\n        };\n        templateCaches.set(result.type, templateCache);\n    }\n    let template = templateCache.stringsArray.get(result.strings);\n    if (template !== undefined) {\n        return template;\n    }\n    // If the TemplateStringsArray is new, generate a key from the strings\n    // This key is shared between all templates with identical content\n    const key = result.strings.join(marker);\n    // Check if we already have a Template for this key\n    template = templateCache.keyString.get(key);\n    if (template === undefined) {\n        // If we have not seen this key before, create a new Template\n        template = new Template(result, result.getTemplateElement());\n        // Cache the Template for this key\n        templateCache.keyString.set(key, template);\n    }\n    // Cache all future queries for this TemplateStringsArray\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n}\nexport const templateCaches = new Map();\n//# sourceMappingURL=template-factory.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { removeNodes } from './dom.js';\nimport { NodePart } from './parts.js';\nimport { templateFactory } from './template-factory.js';\nexport const parts = new WeakMap();\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render = (result, container, options) => {\n    let part = parts.get(container);\n    if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart(Object.assign({ templateFactory }, options)));\n        part.appendInto(container);\n    }\n    part.setValue(result);\n    part.commit();\n};\n//# sourceMappingURL=render.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport { AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter } from './parts.js';\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor {\n    /**\n     * Create parts for an attribute-position binding, given the event, attribute\n     * name, and string literals.\n     *\n     * @param element The element containing the binding\n     * @param name  The attribute name\n     * @param strings The string literals. There are always at least two strings,\n     *   event for fully-controlled bindings with a single expression.\n     */\n    handleAttributeExpressions(element, name, strings, options) {\n        const prefix = name[0];\n        if (prefix === '.') {\n            const committer = new PropertyCommitter(element, name.slice(1), strings);\n            return committer.parts;\n        }\n        if (prefix === '@') {\n            return [new EventPart(element, name.slice(1), options.eventContext)];\n        }\n        if (prefix === '?') {\n            return [new BooleanAttributePart(element, name.slice(1), strings)];\n        }\n        const committer = new AttributeCommitter(element, name, strings);\n        return committer.parts;\n    }\n    /**\n     * Create parts for a text-position binding.\n     * @param templateFactory\n     */\n    handleTextExpression(options) {\n        return new NodePart(options);\n    }\n}\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n//# sourceMappingURL=default-template-processor.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @packageDocumentation\n */\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport { defaultTemplateProcessor } from './lib/default-template-processor.js';\nimport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { DefaultTemplateProcessor, defaultTemplateProcessor } from './lib/default-template-processor.js';\nexport { directive, isDirective } from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport { removeNodes, reparentNodes } from './lib/dom.js';\nexport { noChange, nothing } from './lib/part.js';\nexport { AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart } from './lib/parts.js';\nexport { parts, render } from './lib/render.js';\nexport { templateCaches, templateFactory } from './lib/template-factory.js';\nexport { TemplateInstance } from './lib/template-instance.js';\nexport { SVGTemplateResult, TemplateResult } from './lib/template-result.js';\nexport { createMarker, isTemplatePartActive, Template } from './lib/template.js';\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings, ...values) => new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings, ...values) => new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n//# sourceMappingURL=lit-html.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @packageDocumentation\n */\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport { removeNodes } from './dom.js';\nimport { insertNodeIntoTemplate, removeNodesFromTemplate } from './modify-template.js';\nimport { parts, render as litRender } from './render.js';\nimport { templateCaches } from './template-factory.js';\nimport { TemplateInstance } from './template-instance.js';\nimport { marker, Template } from './template.js';\nexport { html, svg, TemplateResult } from '../lit-html.js';\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type, scopeName) => `${type}--${scopeName}`;\nlet compatibleShadyCSSVersion = true;\nif (typeof window.ShadyCSS === 'undefined') {\n    compatibleShadyCSSVersion = false;\n}\nelse if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n    console.warn(`Incompatible ShadyCSS version detected. ` +\n        `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n        `@webcomponents/shadycss@1.3.1.`);\n    compatibleShadyCSSVersion = false;\n}\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nexport const shadyTemplateFactory = (scopeName) => (result) => {\n    const cacheKey = getTemplateCacheKey(result.type, scopeName);\n    let templateCache = templateCaches.get(cacheKey);\n    if (templateCache === undefined) {\n        templateCache = {\n            stringsArray: new WeakMap(),\n            keyString: new Map()\n        };\n        templateCaches.set(cacheKey, templateCache);\n    }\n    let template = templateCache.stringsArray.get(result.strings);\n    if (template !== undefined) {\n        return template;\n    }\n    const key = result.strings.join(marker);\n    template = templateCache.keyString.get(key);\n    if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n            window.ShadyCSS.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n    }\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n};\nconst TEMPLATE_TYPES = ['html', 'svg'];\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName) => {\n    TEMPLATE_TYPES.forEach((type) => {\n        const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n        if (templates !== undefined) {\n            templates.keyString.forEach((template) => {\n                const { element: { content } } = template;\n                // IE 11 doesn't support the iterable param Set constructor\n                const styles = new Set();\n                Array.from(content.querySelectorAll('style')).forEach((s) => {\n                    styles.add(s);\n                });\n                removeNodesFromTemplate(template, styles);\n            });\n        }\n    });\n};\nconst shadyRenderSet = new Set();\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles = (scopeName, renderedDOM, template) => {\n    shadyRenderSet.add(scopeName);\n    // If `renderedDOM` is stamped from a Template, then we need to edit that\n    // Template's underlying template element. Otherwise, we create one here\n    // to give to ShadyCSS, which still requires one while scoping.\n    const templateElement = !!template ? template.element : document.createElement('template');\n    // Move styles out of rendered DOM and store.\n    const styles = renderedDOM.querySelectorAll('style');\n    const { length } = styles;\n    // If there are no styles, skip unnecessary work\n    if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n        return;\n    }\n    const condensedStyle = document.createElement('style');\n    // Collect styles into a single style. This helps us make sure ShadyCSS\n    // manipulations will not prevent us from being able to fix up template\n    // part indices.\n    // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n    // currently does this anyway. When it does not, this should be changed.\n    for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode.removeChild(style);\n        condensedStyle.textContent += style.textContent;\n    }\n    // Remove styles from nested templates in this scope.\n    removeStylesFromLitTemplates(scopeName);\n    // And then put the condensed style into the \"root\" template passed in as\n    // `template`.\n    const content = templateElement.content;\n    if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n    }\n    else {\n        content.insertBefore(condensedStyle, content.firstChild);\n    }\n    // Note, it's important that ShadyCSS gets the template that `lit-html`\n    // will actually render so that it can update the style inside when\n    // needed (e.g. @apply native Shadow DOM case).\n    window.ShadyCSS.prepareTemplateStyles(templateElement, scopeName);\n    const style = content.querySelector('style');\n    if (window.ShadyCSS.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n    }\n    else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n    }\n};\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render = (result, container, options) => {\n    if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n    }\n    const scopeName = options.scopeName;\n    const hasRendered = parts.has(container);\n    const needsScoping = compatibleShadyCSSVersion &&\n        container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n        !!container.host;\n    // Handle first render to a scope specially...\n    const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n    // On first scope render, render into a fragment; this cannot be a single\n    // fragment that is reused since nested renders can occur synchronously.\n    const renderContainer = firstScopeRender ? document.createDocumentFragment() : container;\n    litRender(result, renderContainer, Object.assign({ templateFactory: shadyTemplateFactory(scopeName) }, options));\n    // When performing first scope render,\n    // (1) We've rendered into a fragment so that there's a chance to\n    // `prepareTemplateStyles` before sub-elements hit the DOM\n    // (which might cause them to render based on a common pattern of\n    // rendering in a custom element's `connectedCallback`);\n    // (2) Scope the template with ShadyCSS one time only for this scope.\n    // (3) Render the fragment into the container and make sure the\n    // container knows its `part` is the one we just rendered. This ensures\n    // DOM will be re-used on subsequent renders.\n    if (firstScopeRender) {\n        const part = parts.get(renderContainer);\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(scopeName, renderContainer, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n    }\n    // After elements have hit the DOM, update styling if this is the\n    // initial render to this container.\n    // This is needed whenever dynamic changes are made so it would be\n    // safest to do every render; however, this would regress performance\n    // so we leave it up to the user to call `ShadyCSS.styleElement`\n    // for dynamic changes.\n    if (!hasRendered && needsScoping) {\n        window.ShadyCSS.styleElement(container.host);\n    }\n};\n//# sourceMappingURL=shady-render.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar _a;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    (prop, _obj) => prop;\nexport const defaultConverter = {\n    toAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value ? '' : null;\n            case Object:\n            case Array:\n                // if the value is `null` or `undefined` pass this through\n                // to allow removing/no change behavior.\n                return value == null ? value : JSON.stringify(value);\n        }\n        return value;\n    },\n    fromAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value !== null;\n            case Number:\n                return value === null ? null : Number(value);\n            case Object:\n            case Array:\n                return JSON.parse(value);\n        }\n        return value;\n    }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual = (value, old) => {\n    // This ensures (old==NaN, value==NaN) always returns false\n    return old !== value && (old === old || value === value);\n};\nconst defaultPropertyDeclaration = {\n    attribute: true,\n    type: String,\n    converter: defaultConverter,\n    reflect: false,\n    hasChanged: notEqual\n};\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nexport class UpdatingElement extends HTMLElement {\n    constructor() {\n        super();\n        this.initialize();\n    }\n    /**\n     * Returns a list of attributes corresponding to the registered properties.\n     * @nocollapse\n     */\n    static get observedAttributes() {\n        // note: piggy backing on this to ensure we're finalized.\n        this.finalize();\n        const attributes = [];\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this._classProperties.forEach((v, p) => {\n            const attr = this._attributeNameForProperty(p, v);\n            if (attr !== undefined) {\n                this._attributeToPropertyMap.set(attr, p);\n                attributes.push(attr);\n            }\n        });\n        return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n    /** @nocollapse */\n    static _ensureClassProperties() {\n        // ensure private storage for property declarations.\n        if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n            this._classProperties = new Map();\n            // NOTE: Workaround IE11 not supporting Map constructor argument.\n            const superProperties = Object.getPrototypeOf(this)._classProperties;\n            if (superProperties !== undefined) {\n                superProperties.forEach((v, k) => this._classProperties.set(k, v));\n            }\n        }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n    static createProperty(name, options = defaultPropertyDeclaration) {\n        // Note, since this can be called by the `@property` decorator which\n        // is called before `finalize`, we ensure storage exists for property\n        // metadata.\n        this._ensureClassProperties();\n        this._classProperties.set(name, options);\n        // Do not generate an accessor if the prototype already has one, since\n        // it would be lost otherwise and that would never be the user's intention;\n        // Instead, we expect users to call `requestUpdate` themselves from\n        // user-defined accessors. Note that if the super has an accessor we will\n        // still overwrite it\n        if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n            return;\n        }\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        const descriptor = this.getPropertyDescriptor(name, key, options);\n        if (descriptor !== undefined) {\n            Object.defineProperty(this.prototype, name, descriptor);\n        }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n    static getPropertyDescriptor(name, key, options) {\n        return {\n            // tslint:disable-next-line:no-any no symbol in index\n            get() {\n                return this[key];\n            },\n            set(value) {\n                const oldValue = this[name];\n                this[key] = value;\n                this\n                    .requestUpdateInternal(name, oldValue, options);\n            },\n            configurable: true,\n            enumerable: true\n        };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n    static getPropertyOptions(name) {\n        return this._classProperties && this._classProperties.get(name) ||\n            defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n    static finalize() {\n        // finalize any superclasses\n        const superCtor = Object.getPrototypeOf(this);\n        if (!superCtor.hasOwnProperty(finalized)) {\n            superCtor.finalize();\n        }\n        this[finalized] = true;\n        this._ensureClassProperties();\n        // initialize Map populated in observedAttributes\n        this._attributeToPropertyMap = new Map();\n        // make any properties\n        // Note, only process \"own\" properties since this element will inherit\n        // any properties defined on the superClass, and finalization ensures\n        // the entire prototype chain is finalized.\n        if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n            const props = this.properties;\n            // support symbols in properties (IE11 does not support this)\n            const propKeys = [\n                ...Object.getOwnPropertyNames(props),\n                ...(typeof Object.getOwnPropertySymbols === 'function') ?\n                    Object.getOwnPropertySymbols(props) :\n                    []\n            ];\n            // This for/of is ok because propKeys is an array\n            for (const p of propKeys) {\n                // note, use of `any` is due to TypeSript lack of support for symbol in\n                // index types\n                // tslint:disable-next-line:no-any no symbol in index\n                this.createProperty(p, props[p]);\n            }\n        }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n    static _attributeNameForProperty(name, options) {\n        const attribute = options.attribute;\n        return attribute === false ?\n            undefined :\n            (typeof attribute === 'string' ?\n                attribute :\n                (typeof name === 'string' ? name.toLowerCase() : undefined));\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n    static _valueHasChanged(value, old, hasChanged = notEqual) {\n        return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n    static _propertyValueFromAttribute(value, options) {\n        const type = options.type;\n        const converter = options.converter || defaultConverter;\n        const fromAttribute = (typeof converter === 'function' ? converter : converter.fromAttribute);\n        return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n    static _propertyValueToAttribute(value, options) {\n        if (options.reflect === undefined) {\n            return;\n        }\n        const type = options.type;\n        const converter = options.converter;\n        const toAttribute = converter && converter.toAttribute ||\n            defaultConverter.toAttribute;\n        return toAttribute(value, type);\n    }\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    initialize() {\n        this._updateState = 0;\n        this._updatePromise =\n            new Promise((res) => this._enableUpdatingResolver = res);\n        this._changedProperties = new Map();\n        this._saveInstanceProperties();\n        // ensures first update will be caught by an early access of\n        // `updateComplete`\n        this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n    _saveInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this.constructor\n            ._classProperties.forEach((_v, p) => {\n            if (this.hasOwnProperty(p)) {\n                const value = this[p];\n                delete this[p];\n                if (!this._instanceProperties) {\n                    this._instanceProperties = new Map();\n                }\n                this._instanceProperties.set(p, value);\n            }\n        });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n    _applyInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        // tslint:disable-next-line:no-any\n        this._instanceProperties.forEach((v, p) => this[p] = v);\n        this._instanceProperties = undefined;\n    }\n    connectedCallback() {\n        // Ensure first connection completes an update. Updates cannot complete\n        // before connection.\n        this.enableUpdating();\n    }\n    enableUpdating() {\n        if (this._enableUpdatingResolver !== undefined) {\n            this._enableUpdatingResolver();\n            this._enableUpdatingResolver = undefined;\n        }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n    disconnectedCallback() {\n    }\n    /**\n     * Synchronizes property values when attributes change.\n     */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this._attributeToProperty(name, value);\n        }\n    }\n    _propertyToAttribute(name, value, options = defaultPropertyDeclaration) {\n        const ctor = this.constructor;\n        const attr = ctor._attributeNameForProperty(name, options);\n        if (attr !== undefined) {\n            const attrValue = ctor._propertyValueToAttribute(value, options);\n            // an undefined value does not change the attribute.\n            if (attrValue === undefined) {\n                return;\n            }\n            // Track if the property is being reflected to avoid\n            // setting the property again via `attributeChangedCallback`. Note:\n            // 1. this takes advantage of the fact that the callback is synchronous.\n            // 2. will behave incorrectly if multiple attributes are in the reaction\n            // stack at time of calling. However, since we process attributes\n            // in `update` this should not be possible (or an extreme corner case\n            // that we'd like to discover).\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n            if (attrValue == null) {\n                this.removeAttribute(attr);\n            }\n            else {\n                this.setAttribute(attr, attrValue);\n            }\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n        }\n    }\n    _attributeToProperty(name, value) {\n        // Use tracking info to avoid deserializing attribute value if it was\n        // just set from a property setter.\n        if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n            return;\n        }\n        const ctor = this.constructor;\n        // Note, hint this as an `AttributeMap` so closure clearly understands\n        // the type; it has issues with tracking types through statics\n        // tslint:disable-next-line:no-unnecessary-type-assertion\n        const propName = ctor._attributeToPropertyMap.get(name);\n        if (propName !== undefined) {\n            const options = ctor.getPropertyOptions(propName);\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n            this[propName] =\n                // tslint:disable-next-line:no-any\n                ctor._propertyValueFromAttribute(value, options);\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n        }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n    requestUpdateInternal(name, oldValue, options) {\n        let shouldRequestUpdate = true;\n        // If we have a property key, perform property update steps.\n        if (name !== undefined) {\n            const ctor = this.constructor;\n            options = options || ctor.getPropertyOptions(name);\n            if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n                if (!this._changedProperties.has(name)) {\n                    this._changedProperties.set(name, oldValue);\n                }\n                // Add to reflecting properties set.\n                // Note, it's important that every change has a chance to add the\n                // property to `_reflectingProperties`. This ensures setting\n                // attribute + property reflects correctly.\n                if (options.reflect === true &&\n                    !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n                    if (this._reflectingProperties === undefined) {\n                        this._reflectingProperties = new Map();\n                    }\n                    this._reflectingProperties.set(name, options);\n                }\n            }\n            else {\n                // Abort the request if the property should not be considered changed.\n                shouldRequestUpdate = false;\n            }\n        }\n        if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n            this._updatePromise = this._enqueueUpdate();\n        }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n    requestUpdate(name, oldValue) {\n        this.requestUpdateInternal(name, oldValue);\n        return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n    async _enqueueUpdate() {\n        this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n        try {\n            // Ensure any previous update has resolved before updating.\n            // This `await` also ensures that property changes are batched.\n            await this._updatePromise;\n        }\n        catch (e) {\n            // Ignore any previous errors. We only care that the previous cycle is\n            // done. Any error should have been handled in the previous update.\n        }\n        const result = this.performUpdate();\n        // If `performUpdate` returns a Promise, we await it. This is done to\n        // enable coordinating updates with a scheduler. Note, the result is\n        // checked to avoid delaying an additional microtask unless we need to.\n        if (result != null) {\n            await result;\n        }\n        return !this._hasRequestedUpdate;\n    }\n    get _hasRequestedUpdate() {\n        return (this._updateState & STATE_UPDATE_REQUESTED);\n    }\n    get hasUpdated() {\n        return (this._updateState & STATE_HAS_UPDATED);\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n    performUpdate() {\n        // Abort any update if one is not pending when this is called.\n        // This can happen if `performUpdate` is called early to \"flush\"\n        // the update.\n        if (!this._hasRequestedUpdate) {\n            return;\n        }\n        // Mixin instance properties once, if they exist.\n        if (this._instanceProperties) {\n            this._applyInstanceProperties();\n        }\n        let shouldUpdate = false;\n        const changedProperties = this._changedProperties;\n        try {\n            shouldUpdate = this.shouldUpdate(changedProperties);\n            if (shouldUpdate) {\n                this.update(changedProperties);\n            }\n            else {\n                this._markUpdated();\n            }\n        }\n        catch (e) {\n            // Prevent `firstUpdated` and `updated` from running when there's an\n            // update exception.\n            shouldUpdate = false;\n            // Ensure element can accept additional updates after an exception.\n            this._markUpdated();\n            throw e;\n        }\n        if (shouldUpdate) {\n            if (!(this._updateState & STATE_HAS_UPDATED)) {\n                this._updateState = this._updateState | STATE_HAS_UPDATED;\n                this.firstUpdated(changedProperties);\n            }\n            this.updated(changedProperties);\n        }\n    }\n    _markUpdated() {\n        this._changedProperties = new Map();\n        this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n    get updateComplete() {\n        return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n    _getUpdateComplete() {\n        return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    shouldUpdate(_changedProperties) {\n        return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(_changedProperties) {\n        if (this._reflectingProperties !== undefined &&\n            this._reflectingProperties.size > 0) {\n            // Use forEach so this works even if for/of loops are compiled to for\n            // loops expecting arrays\n            this._reflectingProperties.forEach((v, k) => this._propertyToAttribute(k, this[k], v));\n            this._reflectingProperties = undefined;\n        }\n        this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    updated(_changedProperties) {\n    }\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    firstUpdated(_changedProperties) {\n    }\n}\n_a = finalized;\n/**\n * Marks class as having finished creating properties.\n */\nUpdatingElement[_a] = true;\n//# sourceMappingURL=updating-element.js.map","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nexport const supportsAdoptingStyleSheets = (window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\nconst constructionToken = Symbol();\nexport class CSSResult {\n    constructor(cssText, safeToken) {\n        if (safeToken !== constructionToken) {\n            throw new Error('CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n        }\n        this.cssText = cssText;\n    }\n    // Note, this is a getter so that it's lazy. In practice, this means\n    // stylesheets are not created until the first element instance is made.\n    get styleSheet() {\n        if (this._styleSheet === undefined) {\n            // Note, if `supportsAdoptingStyleSheets` is true then we assume\n            // CSSStyleSheet is constructable.\n            if (supportsAdoptingStyleSheets) {\n                this._styleSheet = new CSSStyleSheet();\n                this._styleSheet.replaceSync(this.cssText);\n            }\n            else {\n                this._styleSheet = null;\n            }\n        }\n        return this._styleSheet;\n    }\n    toString() {\n        return this.cssText;\n    }\n}\n/**\n * Wrap a value for interpolation in a [[`css`]] tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value) => {\n    return new CSSResult(String(value), constructionToken);\n};\nconst textFromCSSResult = (value) => {\n    if (value instanceof CSSResult) {\n        return value.cssText;\n    }\n    else if (typeof value === 'number') {\n        return value;\n    }\n    else {\n        throw new Error(`Value passed to 'css' function must be a 'css' function result: ${value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n    }\n};\n/**\n * Template tag which which can be used with LitElement's [[LitElement.styles |\n * `styles`]] property to set element styles. For security reasons, only literal\n * string values may be used. To incorporate non-literal values [[`unsafeCSS`]]\n * may be used inside a template string part.\n */\nexport const css = (strings, ...values) => {\n    const cssText = values.reduce((acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1], strings[0]);\n    return new CSSResult(cssText, constructionToken);\n};\n//# sourceMappingURL=css-tag.js.map","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * The main LitElement module, which defines the [[`LitElement`]] base class and\n * related APIs.\n *\n *  LitElement components can define a template and a set of observed\n * properties. Changing an observed property triggers a re-render of the\n * element.\n *\n *  Import [[`LitElement`]] and [[`html`]] from this module to create a\n * component:\n *\n *  ```js\n * import {LitElement, html} from 'lit-element';\n *\n * class MyElement extends LitElement {\n *\n *   // Declare observed properties\n *   static get properties() {\n *     return {\n *       adjective: {}\n *     }\n *   }\n *\n *   constructor() {\n *     this.adjective = 'awesome';\n *   }\n *\n *   // Define the element's template\n *   render() {\n *     return html`<p>your ${adjective} template here</p>`;\n *   }\n * }\n *\n * customElements.define('my-element', MyElement);\n * ```\n *\n * `LitElement` extends [[`UpdatingElement`]] and adds lit-html templating.\n * The `UpdatingElement` class is provided for users that want to build\n * their own custom element base classes that don't use lit-html.\n *\n * @packageDocumentation\n */\nimport { render } from 'lit-html/lib/shady-render.js';\nimport { UpdatingElement } from './lib/updating-element.js';\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport { html, svg, TemplateResult, SVGTemplateResult } from 'lit-html/lit-html.js';\nimport { supportsAdoptingStyleSheets, unsafeCSS } from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n/**\n * Sentinal value used to avoid calling lit-html's render function when\n * subclasses do not implement `render`\n */\nconst renderNotImplemented = {};\n/**\n * Base element class that manages element properties and attributes, and\n * renders a lit-html template.\n *\n * To define a component, subclass `LitElement` and implement a\n * `render` method to provide the component's template. Define properties\n * using the [[`properties`]] property or the [[`property`]] decorator.\n */\nexport class LitElement extends UpdatingElement {\n    /**\n     * Return the array of styles to apply to the element.\n     * Override this method to integrate into a style management system.\n     *\n     * @nocollapse\n     */\n    static getStyles() {\n        return this.styles;\n    }\n    /** @nocollapse */\n    static _getUniqueStyles() {\n        // Only gather styles once per class\n        if (this.hasOwnProperty(JSCompiler_renameProperty('_styles', this))) {\n            return;\n        }\n        // Take care not to call `this.getStyles()` multiple times since this\n        // generates new CSSResults each time.\n        // TODO(sorvell): Since we do not cache CSSResults by input, any\n        // shared styles will generate new stylesheet objects, which is wasteful.\n        // This should be addressed when a browser ships constructable\n        // stylesheets.\n        const userStyles = this.getStyles();\n        if (Array.isArray(userStyles)) {\n            // De-duplicate styles preserving the _last_ instance in the set.\n            // This is a performance optimization to avoid duplicated styles that can\n            // occur especially when composing via subclassing.\n            // The last item is kept to try to preserve the cascade order with the\n            // assumption that it's most important that last added styles override\n            // previous styles.\n            const addStyles = (styles, set) => styles.reduceRight((set, s) => \n            // Note: On IE set.add() does not return the set\n            Array.isArray(s) ? addStyles(s, set) : (set.add(s), set), set);\n            // Array.from does not work on Set in IE, otherwise return\n            // Array.from(addStyles(userStyles, new Set<CSSResult>())).reverse()\n            const set = addStyles(userStyles, new Set());\n            const styles = [];\n            set.forEach((v) => styles.unshift(v));\n            this._styles = styles;\n        }\n        else {\n            this._styles = userStyles === undefined ? [] : [userStyles];\n        }\n        // Ensure that there are no invalid CSSStyleSheet instances here. They are\n        // invalid in two conditions.\n        // (1) the sheet is non-constructible (`sheet` of a HTMLStyleElement), but\n        //     this is impossible to check except via .replaceSync or use\n        // (2) the ShadyCSS polyfill is enabled (:. supportsAdoptingStyleSheets is\n        //     false)\n        this._styles = this._styles.map((s) => {\n            if (s instanceof CSSStyleSheet && !supportsAdoptingStyleSheets) {\n                // Flatten the cssText from the passed constructible stylesheet (or\n                // undetectable non-constructible stylesheet). The user might have\n                // expected to update their stylesheets over time, but the alternative\n                // is a crash.\n                const cssText = Array.prototype.slice.call(s.cssRules)\n                    .reduce((css, rule) => css + rule.cssText, '');\n                return unsafeCSS(cssText);\n            }\n            return s;\n        });\n    }\n    /**\n     * Performs element initialization. By default this calls\n     * [[`createRenderRoot`]] to create the element [[`renderRoot`]] node and\n     * captures any pre-set values for registered properties.\n     */\n    initialize() {\n        super.initialize();\n        this.constructor._getUniqueStyles();\n        this.renderRoot = this.createRenderRoot();\n        // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n        // element's getRootNode(). While this could be done, we're choosing not to\n        // support this now since it would require different logic around de-duping.\n        if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n            this.adoptStyles();\n        }\n    }\n    /**\n     * Returns the node into which the element should render and by default\n     * creates and returns an open shadowRoot. Implement to customize where the\n     * element's DOM is rendered. For example, to render into the element's\n     * childNodes, return `this`.\n     * @returns {Element|DocumentFragment} Returns a node into which to render.\n     */\n    createRenderRoot() {\n        return this.attachShadow({ mode: 'open' });\n    }\n    /**\n     * Applies styling to the element shadowRoot using the [[`styles`]]\n     * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n     * available and will fallback otherwise. When Shadow DOM is polyfilled,\n     * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n     * is available but `adoptedStyleSheets` is not, styles are appended to the\n     * end of the `shadowRoot` to [mimic spec\n     * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n     */\n    adoptStyles() {\n        const styles = this.constructor._styles;\n        if (styles.length === 0) {\n            return;\n        }\n        // There are three separate cases here based on Shadow DOM support.\n        // (1) shadowRoot polyfilled: use ShadyCSS\n        // (2) shadowRoot.adoptedStyleSheets available: use it\n        // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n        // rendering\n        if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n            window.ShadyCSS.ScopingShim.prepareAdoptedCssText(styles.map((s) => s.cssText), this.localName);\n        }\n        else if (supportsAdoptingStyleSheets) {\n            this.renderRoot.adoptedStyleSheets =\n                styles.map((s) => s instanceof CSSStyleSheet ? s : s.styleSheet);\n        }\n        else {\n            // This must be done after rendering so the actual style insertion is done\n            // in `update`.\n            this._needsShimAdoptedStyleSheets = true;\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        // Note, first update/render handles styleElement so we only call this if\n        // connected after first update.\n        if (this.hasUpdated && window.ShadyCSS !== undefined) {\n            window.ShadyCSS.styleElement(this);\n        }\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes\n     * and calls `render` to render DOM via lit-html. Setting properties inside\n     * this method will *not* trigger another update.\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(changedProperties) {\n        // Setting properties in `render` should not trigger an update. Since\n        // updates are allowed after super.update, it's important to call `render`\n        // before that.\n        const templateResult = this.render();\n        super.update(changedProperties);\n        // If render is not implemented by the component, don't call lit-html render\n        if (templateResult !== renderNotImplemented) {\n            this.constructor\n                .render(templateResult, this.renderRoot, { scopeName: this.localName, eventContext: this });\n        }\n        // When native Shadow DOM is used but adoptedStyles are not supported,\n        // insert styling after rendering to ensure adoptedStyles have highest\n        // priority.\n        if (this._needsShimAdoptedStyleSheets) {\n            this._needsShimAdoptedStyleSheets = false;\n            this.constructor._styles.forEach((s) => {\n                const style = document.createElement('style');\n                style.textContent = s.cssText;\n                this.renderRoot.appendChild(style);\n            });\n        }\n    }\n    /**\n     * Invoked on each update to perform rendering tasks. This method may return\n     * any value renderable by lit-html's `NodePart` - typically a\n     * `TemplateResult`. Setting properties inside this method will *not* trigger\n     * the element to update.\n     */\n    render() {\n        return renderNotImplemented;\n    }\n}\n/**\n * Ensure this class is marked as `finalized` as an optimization ensuring\n * it will not needlessly try to `finalize`.\n *\n * Note this property name is a string to prevent breaking Closure JS Compiler\n * optimizations. See updating-element.ts for more information.\n */\nLitElement['finalized'] = true;\n/**\n * Reference to the underlying library method used to render the element's\n * DOM. By default, points to the `render` method from lit-html's shady-render\n * module.\n *\n * **Most users will never need to touch this property.**\n *\n * This  property should not be confused with the `render` instance method,\n * which should be overridden to define a template for the element.\n *\n * Advanced users creating a new base class based on LitElement can override\n * this property to point to a custom render method with a signature that\n * matches [shady-render's `render`\n * method](https://lit-html.polymer-project.org/api/modules/shady_render.html#render).\n *\n * @nocollapse\n */\nLitElement.render = render;\n//# sourceMappingURL=lit-element.js.map","const appliedClassMixins = new WeakMap();\n\n/** Vefify if the Mixin was previously applyed\n * @private\n * @param {function} mixin      Mixin being applyed\n * @param {object} superClass   Class receiving the new mixin\n * @returns {boolean}\n */\nfunction wasMixinPreviouslyApplied(mixin, superClass) {\n  let klass = superClass;\n  while (klass) {\n    if (appliedClassMixins.get(klass) === mixin) {\n      return true;\n    }\n    klass = Object.getPrototypeOf(klass);\n  }\n  return false;\n}\n\n/** Apply each mixin in the chain to make sure they are not applied more than once to the final class.\n * @export\n * @param {function} mixin      Mixin to be applyed\n * @returns {object}            Mixed class with mixin applied\n */\nexport function dedupeMixin(mixin) {\n  return superClass => {\n    if (wasMixinPreviouslyApplied(mixin, superClass)) {\n      return superClass;\n    }\n    const mixedClass = mixin(superClass);\n    appliedClassMixins.set(mixedClass, mixin);\n    return mixedClass;\n  };\n}\n","/**\n * Cache class that allows to search in a cache hierarchy.\n * @template T, Q\n */\nexport class Cache {\n  /**\n   * Creates a Cache instance\n   * @param {Cache} [parent]\n   */\n  constructor(parent) {\n    this._parent = parent;\n    this._cache = new Map();\n  }\n\n  /**\n   * Returns a boolean indicating whether an element with the specified key exists or not.\n   *\n   * @param {T} key - The key of the element to test for presence in the Cache object.\n   * @return {boolean}\n   */\n  has(key) {\n    return !!(this._cache.has(key) || (this._parent && this._parent._cache.has(key)));\n  }\n\n  /**\n   * Adds or updates an element with a specified key and a value to a Cache object.\n   *\n   * @param {T} key - The key of the element to add to the Cache object.\n   * @param {Q} value - The value of the element to add to the Cache object.\n   * @return {Cache<T, Q>} the cache object\n   */\n  set(key, value) {\n    this._cache.set(key, value);\n\n    return this;\n  }\n\n  /**\n   * Returns a specified element from a Map object. If the value that is associated to the provided key is an\n   * object, then you will get a reference to that object and any change made to that object will effectively modify\n   * it inside the Map object.\n   *\n   * @param {T} key - The key of the element to return from the Cache object.\n   * @return {Q}\n   */\n  get(key) {\n    return this._cache.get(key) || (this._parent && this._parent._cache.get(key));\n  }\n}\n","/**\n * Global counter to scope the custom elements\n *\n * @type {number}\n */\nlet counter = Math.round(Math.random() * 100000);\n\n/**\n * Allowed tag name chars\n *\n * @type {string}\n */\nconst chars = `-|\\\\.|[0-9]|[a-z]`;\n\n/**\n * Regular expression to check if a value is a valid tag name\n *\n * @type {RegExp}\n */\nconst tagRegExp = new RegExp(`[a-z](${chars})*-(${chars})*`);\n\n/**\n * Checks if the tag name is valid\n *\n * @param {string} tag\n * @returns {boolean}\n */\nconst isValid = tag => tagRegExp.exec(tag) !== null;\n\n/**\n * Checks if the tag is already registered\n *\n * @param {string} name\n * @param {CustomElementRegistry} registry\n * @returns {boolean}\n */\nconst isTagRegistered = (name, registry) => !!registry.get(name);\n\n/**\n * Given a tag name scopes it with a number suffix\n *\n * @param {string} tagName\n * @param {CustomElementRegistry} registry\n * @returns {string} scoped tag name\n */\nconst incrementTagName = (tagName, registry) => {\n  const newTagName = `${tagName}-${(counter += 1)}`;\n\n  if (isTagRegistered(newTagName, registry)) {\n    return incrementTagName(tagName, registry);\n  }\n\n  return newTagName;\n};\n\n/**\n * Creates a unique scoped tag name\n *\n * @exports\n * @param {string} tagName - tag name to scope\n * @param {CustomElementRegistry} registry\n * @returns {string} scoped tag name\n */\nexport function createUniqueTag(tagName, registry = customElements) {\n  if (!isValid(tagName)) {\n    throw new Error('tagName is invalid');\n  }\n\n  return incrementTagName(tagName, registry);\n}\n","/**\n * The global cache for tag names\n *\n * @type {WeakMap<typeof HTMLElement, string>}\n */\nconst globalTagsCache = new WeakMap();\n\n/**\n * Adds a tag to the global tags cache\n *\n * @param {string} tag\n * @param {typeof HTMLElement} klass\n */\nexport const addToGlobalTagsCache = (tag, klass) => globalTagsCache.set(klass, tag);\n\n/**\n * Gets a tag from the global tags cache\n *\n * @exports\n * @param {typeof HTMLElement} klass\n * @returns {undefined|string}\n */\nexport const getFromGlobalTagsCache = klass => globalTagsCache.get(klass);\n","import { createUniqueTag } from './createUniqueTag.js';\nimport { getFromGlobalTagsCache, addToGlobalTagsCache } from './globalTagsCache.js';\n\n/**\n * Checks if klass is a subclass of HTMLElement\n *\n * @param {typeof HTMLElement} klass\n * @returns {boolean}\n */\nconst extendsHTMLElement = klass => Object.prototype.isPrototypeOf.call(HTMLElement, klass);\n\n/**\n * Defines a custom element\n *\n * @param {string} tagName\n * @param {typeof HTMLElement} klass\n * @param {CustomElementRegistry} registry\n */\nconst defineElement = (tagName, klass, registry = customElements) => {\n  addToGlobalTagsCache(tagName, klass);\n  registry.define(tagName, class extends klass {});\n};\n\n/**\n * Stores a lazy element in the cache to be used in future\n *\n * @param {string} tagName\n * @param {CustomElementRegistry} registry\n * @param {import('./Cache.js').Cache<string, string>} tagsCache\n * @returns {string}\n */\nconst storeLazyElementInCache = (tagName, registry, tagsCache) => {\n  const tag = createUniqueTag(tagName, registry);\n\n  if (!tagsCache) {\n    throw new Error('Lazy scoped elements requires the use of tags cache');\n  }\n\n  tagsCache.set(tagName, tag);\n\n  return tag;\n};\n\n/**\n * Define a scoped custom element storing the scoped tag name in the cache\n *\n * @param {string} tagName\n * @param {typeof HTMLElement} klass\n * @param {import('./Cache.js').Cache<string, string>} tagsCache\n * @returns {string}\n */\nconst defineElementAndStoreInCache = (tagName, klass, tagsCache) => {\n  const registry = customElements;\n\n  if (!extendsHTMLElement(klass)) {\n    return storeLazyElementInCache(tagName, registry, tagsCache);\n  }\n\n  if (klass === customElements.get(tagName)) {\n    addToGlobalTagsCache(tagName, klass);\n\n    return tagName;\n  }\n\n  const tag = createUniqueTag(tagName, registry);\n  // @ts-ignore\n  // we extend it just in case the class has been defined manually\n  defineElement(tag, klass, registry);\n\n  return tag;\n};\n\n/**\n * Gets a scoped tag name from the cache or generates a new one and defines the element if needed\n *\n * @exports\n * @param {string} tagName\n * @param {typeof HTMLElement} klass\n * @param {import('./Cache.js').Cache<string, string>} tagsCache\n * @returns {string}\n */\nexport function registerElement(tagName, klass, tagsCache = undefined) {\n  const tag =\n    getFromGlobalTagsCache(klass) ||\n    (tagsCache && tagsCache.get(tagName)) ||\n    defineElementAndStoreInCache(tagName, klass, tagsCache);\n\n  return tag;\n}\n\n/**\n * Defines a lazy element\n *\n * @param {string} tagName\n * @param {typeof HTMLElement} klass\n * @param {import('./Cache.js').Cache<string, string>} tagsCache\n */\nexport function defineScopedElement(tagName, klass, tagsCache) {\n  const tag = tagsCache.get(tagName);\n\n  if (tag) {\n    if (customElements.get(tag) === undefined) {\n      defineElement(tag, klass, customElements);\n    }\n  } else {\n    tagsCache.set(tagName, registerElement(tagName, klass, tagsCache));\n  }\n}\n","import { registerElement } from './registerElement.js';\nimport { Cache } from './Cache.js';\n\n/**\n * @typedef {import('./types').ScopedElementsMap} ScopedElementsMap\n */\n\n/**\n * Allowed tag name chars\n *\n * @type {string}\n */\nconst chars = `-|\\\\.|[0-9]|[a-z]`;\n\n/**\n * Regular Expression to find a custom element tag\n *\n * @type {RegExp}\n */\nconst re = new RegExp(`<\\\\/?([a-z](${chars})*-(${chars})*)`, 'g');\n\n/**\n * The global cache of processed string arrays\n *\n * @type {Cache<TemplateStringsArray, TemplateStringsArray>}\n */\nconst globalCache = new Cache();\n\n/**\n * Find custom element tags in the string\n *\n * @param {string} str\n * @returns {RegExpExecArray[]}\n */\nconst matchAll = str => {\n  const matches = [];\n  let result;\n  // eslint-disable-next-line no-cond-assign\n  while ((result = re.exec(str)) !== null) {\n    matches.push(result);\n  }\n\n  return matches;\n};\n\n/**\n * Transforms a string array into another one with resolved scoped elements and caches it for future references\n *\n * @param {TemplateStringsArray} strings\n * @param {ScopedElementsMap} scopedElements\n * @param {Cache<TemplateStringsArray, TemplateStringsArray>} templateCache\n * @param {Cache<string, string>} tagsCache\n * @returns {TemplateStringsArray}\n */\nconst transformTemplate = (strings, scopedElements, templateCache, tagsCache) => {\n  const transformedStrings = strings.map(str => {\n    let acc = str;\n    const matches = matchAll(str);\n\n    for (let i = matches.length - 1; i >= 0; i -= 1) {\n      const item = matches[i];\n      const [block, tagName] = item;\n      const tag = registerElement(tagName, scopedElements[tagName], tagsCache);\n      const start = item.index + block.length - tagName.length;\n      const end = start + tagName.length;\n      const isClosingTag = block.indexOf('</') === 0;\n\n      acc =\n        acc.slice(0, start) +\n        (isClosingTag ? tag : `${tag} data-tag-name=\"${tagName}\"`) +\n        acc.slice(end);\n    }\n\n    return acc;\n  });\n\n  // @ts-ignore\n  // noinspection JSCheckFunctionSignatures\n  templateCache.set(strings, transformedStrings);\n\n  // @ts-ignore\n  // noinspection JSValidateTypes\n  return transformedStrings;\n};\n\n/**\n * Obtains the cached strings array with resolved scoped elements or creates it\n *\n * @exports\n * @param {TemplateStringsArray} strings\n * @param {ScopedElementsMap} scopedElements\n * @param {import('./Cache.js').Cache<TemplateStringsArray, TemplateStringsArray>} templateCache\n * @param {import('./Cache.js').Cache<string, string>} tagsCache\n * @returns {TemplateStringsArray}\n */\nexport function transform(strings, scopedElements, templateCache = globalCache, tagsCache) {\n  return (\n    templateCache.get(strings) ||\n    transformTemplate(strings, scopedElements, templateCache, tagsCache)\n  );\n}\n","import { templateCaches } from 'lit-html/lib/template-factory.js';\nimport { marker, Template } from 'lit-html/lib/template.js';\n\nconst getTemplateCacheKey = (type, scopeName) => `${type}--${scopeName}`;\n\nlet compatibleShadyCSSVersion = true;\n\n// @ts-ignore\nconst { ShadyCSS } = window;\n\nif (typeof ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof ShadyCSS.prepareTemplateDom === 'undefined') {\n  compatibleShadyCSSVersion = false;\n}\n\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nexport const shadyTemplateFactory = scopeName => result => {\n  const cacheKey = getTemplateCacheKey(result.type, scopeName);\n  let templateCache = templateCaches.get(cacheKey);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap(),\n      keyString: new Map(),\n    };\n    templateCaches.set(cacheKey, templateCache);\n  }\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n  const key = result.strings.join(marker);\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    const element = result.getTemplateElement();\n    if (compatibleShadyCSSVersion) {\n      ShadyCSS.prepareTemplateDom(element, scopeName);\n    }\n    template = new Template(result, element);\n    templateCache.keyString.set(key, template);\n  }\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n};\n","/* eslint-disable no-use-before-define */\nimport { TemplateResult } from 'lit-html';\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\nimport { Cache } from './Cache.js';\nimport { transform } from './transform.js';\nimport { defineScopedElement, registerElement } from './registerElement.js';\nimport { shadyTemplateFactory } from './shadyTemplateFactory.js';\n\n/**\n * @typedef {import('./types').ScopedElementsMixin} ScopedElementsMixin\n * @typedef {import('./types').ScopedElementsMap} ScopedElementsMap\n * @typedef {import(\"lit-element\").LitElement} LitElement\n * @typedef {import('lit-html/lib/shady-render').ShadyRenderOptions} ShadyRenderOptions\n * @typedef {function(TemplateResult, Element|DocumentFragment|ShadowRoot, ShadyRenderOptions): void} RenderFunction\n */\n\n/**\n * Template caches\n *\n * @type {WeakMap<Function, Cache<TemplateStringsArray, TemplateStringsArray>>}\n */\nconst templateCaches = new WeakMap();\n\n/**\n * Retrieves or creates a templateCache for a specific key\n *\n * @param {Function} key\n * @returns {Cache<TemplateStringsArray, TemplateStringsArray>}\n */\nconst getTemplateCache = key => {\n  if (!templateCaches.has(key)) {\n    // @ts-ignore\n    templateCaches.set(key, new Cache(templateCaches.get(key.constructor)));\n  }\n\n  return templateCaches.get(key);\n};\n\n/**\n * Tags caches\n *\n * @type {WeakMap<object, Cache<string, string>>}\n */\nconst tagsCaches = new WeakMap();\n\n/**\n * Retrieves or creates a tagsCache for a specific key\n * @param {object} key\n * @returns {Cache<string, string>}\n */\nconst getTagsCache = key => {\n  if (!tagsCaches.has(key)) {\n    tagsCaches.set(key, new Cache(tagsCaches.get(key.constructor)));\n  }\n\n  return tagsCaches.get(key);\n};\n\n/**\n * Transforms an array of TemplateResults or arrays into another one with resolved scoped elements\n *\n * @param {ReadonlyArray} items\n * @param {ScopedElementsMap} scopedElements\n * @param {Cache<TemplateStringsArray, TemplateStringsArray>} templateCache\n * @param {Cache<string, string>} tagsCache\n * @returns {ReadonlyArray}\n */\nconst transformArray = (items, scopedElements, templateCache, tagsCache) =>\n  items.map(value => {\n    if (value instanceof TemplateResult) {\n      return transformTemplate(value, scopedElements, templateCache, tagsCache);\n    }\n\n    if (Array.isArray(value)) {\n      return transformArray(value, scopedElements, templateCache, tagsCache);\n    }\n\n    return value;\n  });\n\n/**\n * Transforms a TemplateResult into another one with resolved scoped elements\n *\n * @param {TemplateResult} template\n * @param {ScopedElementsMap} scopedElements\n * @param {Cache<TemplateStringsArray, TemplateStringsArray>} templateCache\n * @param {Cache<string, string>} tagsCache\n * @returns {TemplateResult}\n */\nconst transformTemplate = (template, scopedElements, templateCache, tagsCache) =>\n  new TemplateResult(\n    transform(template.strings, scopedElements, templateCache, tagsCache),\n    transformArray(template.values, scopedElements, templateCache, tagsCache),\n    template.type,\n    template.processor,\n  );\n\n/**\n * Gets an instance of the ScopedElementsTemplateFactory\n *\n * @param {string} scopeName\n * @param {ScopedElementsMap} scopedElements\n * @param {Cache<TemplateStringsArray, TemplateStringsArray>} templateCache\n * @param {Cache<string, string>} tagsCache\n * @returns {function(any): any}\n */\nconst scopedElementsTemplateFactory = (\n  scopeName,\n  scopedElements,\n  templateCache,\n  tagsCache,\n) => template => {\n  const newTemplate = transformTemplate(template, scopedElements, templateCache, tagsCache);\n\n  return shadyTemplateFactory(scopeName)(newTemplate);\n};\n\n/** @type {ScopedElementsMixin} */\nconst ScopedElementsMixinImplementation = superclass =>\n  class ScopedElementsHost extends superclass {\n    /**\n     * Obtains the scoped elements definitions map\n     *\n     * @returns {ScopedElementsMap}\n     */\n    static get scopedElements() {\n      return {};\n    }\n\n    /** @override */\n    static render(template, container, options) {\n      if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n      }\n      const { scopeName, eventContext } = options;\n\n      const templateCache = getTemplateCache(eventContext);\n      const tagsCache = getTagsCache(eventContext);\n      const { scopedElements } = this;\n\n      return super.render(template, container, {\n        ...options,\n        templateFactory: scopedElementsTemplateFactory(\n          scopeName,\n          scopedElements,\n          templateCache,\n          tagsCache,\n        ),\n      });\n    }\n\n    /**\n     * Defines a scoped element\n     *\n     * @param {string} tagName\n     * @param {typeof HTMLElement} klass\n     */\n    defineScopedElement(tagName, klass) {\n      return defineScopedElement(tagName, klass, getTagsCache(this));\n    }\n\n    /**\n     * Returns a scoped tag name\n     *\n     * @deprecated Please, use the instance method instead of the static one. This static method is not able to\n     * obtain the tagName of lazy defined elements, while the instance one is.\n     * @param {string} tagName\n     * @returns {string|undefined}\n     */\n    static getScopedTagName(tagName) {\n      // @ts-ignore\n      const klass = this.scopedElements[tagName];\n\n      return klass\n        ? registerElement(tagName, klass, getTagsCache(this))\n        : getTagsCache(this).get(tagName);\n    }\n\n    /**\n     * Returns a scoped tag name\n     *\n     * @param {string} tagName\n     * @returns {string|undefined}\n     */\n    getScopedTagName(tagName) {\n      // @ts-ignore\n      const klass = this.constructor.scopedElements[tagName];\n\n      return klass\n        ? registerElement(tagName, klass, getTagsCache(this))\n        : getTagsCache(this).get(tagName);\n    }\n  };\n\nexport const ScopedElementsMixin = dedupeMixin(ScopedElementsMixinImplementation);\n","import { dedupeMixin } from '@open-wc/dedupe-mixin';\n\n/**\n * @typedef {import('../types/DisabledMixinTypes').DisabledMixin} DisabledMixin\n */\n\n/**\n * @type {DisabledMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('../index').LitElement>} superclass\n */\nconst DisabledMixinImplementation = superclass =>\n  // eslint-disable-next-line no-shadow\n  class extends superclass {\n    static get properties() {\n      return {\n        disabled: {\n          type: Boolean,\n          reflect: true,\n        },\n      };\n    }\n\n    constructor() {\n      super();\n      this._requestedToBeDisabled = false;\n      this.__isUserSettingDisabled = true;\n      this.__restoreDisabledTo = false;\n      this.disabled = false;\n    }\n\n    makeRequestToBeDisabled() {\n      if (this._requestedToBeDisabled === false) {\n        this._requestedToBeDisabled = true;\n        this.__restoreDisabledTo = this.disabled;\n        this.__internalSetDisabled(true);\n      }\n    }\n\n    retractRequestToBeDisabled() {\n      if (this._requestedToBeDisabled === true) {\n        this._requestedToBeDisabled = false;\n        this.__internalSetDisabled(this.__restoreDisabledTo);\n      }\n    }\n\n    /** @param {boolean} value */\n    __internalSetDisabled(value) {\n      this.__isUserSettingDisabled = false;\n      this.disabled = value;\n      this.__isUserSettingDisabled = true;\n    }\n\n    /**\n     * @param {PropertyKey} name\n     * @param {?} oldValue\n     */\n    requestUpdateInternal(name, oldValue) {\n      super.requestUpdateInternal(name, oldValue);\n      if (name === 'disabled') {\n        if (this.__isUserSettingDisabled) {\n          this.__restoreDisabledTo = this.disabled;\n        }\n        if (this.disabled === false && this._requestedToBeDisabled === true) {\n          this.__internalSetDisabled(true);\n        }\n      }\n    }\n  };\n\nexport const DisabledMixin = dedupeMixin(DisabledMixinImplementation);\n","import { dedupeMixin } from '@open-wc/dedupe-mixin';\nimport { DisabledMixin } from './DisabledMixin.js';\n\n/**\n * @typedef {import('../types/DisabledWithTabIndexMixinTypes').DisabledWithTabIndexMixin} DisabledWithTabIndexMixin\n */\n\n/**\n * @type {DisabledWithTabIndexMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('../index').LitElement>} superclass\n */\nconst DisabledWithTabIndexMixinImplementation = superclass =>\n  // eslint-disable-next-line no-shadow\n  class extends DisabledMixin(superclass) {\n    static get properties() {\n      return {\n        // we use a property here as if we use the native tabIndex we can not set a default value\n        // in the constructor as it synchronously sets the attribute which is not allowed in the\n        // constructor phase\n        tabIndex: {\n          type: Number,\n          reflect: true,\n          attribute: 'tabindex',\n        },\n      };\n    }\n\n    constructor() {\n      super();\n      this.__isUserSettingTabIndex = true;\n      this.__restoreTabIndexTo = 0;\n      this.__internalSetTabIndex(0);\n    }\n\n    makeRequestToBeDisabled() {\n      super.makeRequestToBeDisabled();\n      if (this._requestedToBeDisabled === false && this.tabIndex != null) {\n        this.__restoreTabIndexTo = this.tabIndex;\n      }\n    }\n\n    retractRequestToBeDisabled() {\n      super.retractRequestToBeDisabled();\n      if (this._requestedToBeDisabled === true) {\n        this.__internalSetTabIndex(this.__restoreTabIndexTo);\n      }\n    }\n\n    /**\n     * @param {number} value\n     */\n    __internalSetTabIndex(value) {\n      this.__isUserSettingTabIndex = false;\n      this.tabIndex = value;\n      this.__isUserSettingTabIndex = true;\n    }\n\n    /**\n     * @param {PropertyKey} name\n     * @param {?} oldValue\n     */\n    requestUpdateInternal(name, oldValue) {\n      super.requestUpdateInternal(name, oldValue);\n\n      if (name === 'disabled') {\n        if (this.disabled) {\n          this.__internalSetTabIndex(-1);\n        } else {\n          this.__internalSetTabIndex(this.__restoreTabIndexTo);\n        }\n      }\n\n      if (name === 'tabIndex') {\n        if (this.__isUserSettingTabIndex && this.tabIndex != null) {\n          this.__restoreTabIndexTo = this.tabIndex;\n        }\n\n        if (this.tabIndex !== -1 && this._requestedToBeDisabled === true) {\n          this.__internalSetTabIndex(-1);\n        }\n      }\n    }\n\n    /** @param {import('lit-element').PropertyValues } changedProperties */\n    firstUpdated(changedProperties) {\n      super.firstUpdated(changedProperties);\n      // for ShadyDom the timing is a little different and we need to make sure\n      // the tabindex gets correctly updated here\n      if (this.disabled) {\n        this.__internalSetTabIndex(-1);\n      }\n    }\n  };\n\nexport const DisabledWithTabIndexMixin = dedupeMixin(DisabledWithTabIndexMixinImplementation);\n","/* eslint-disable class-methods-use-this */\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\n\n/**\n * @typedef {import('../types/SlotMixinTypes').SlotMixin} SlotMixin\n * @typedef {import('../types/SlotMixinTypes').SlotsMap} SlotsMap\n */\n\n/**\n * @type {SlotMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<HTMLElement>} superclass\n */\nconst SlotMixinImplementation = superclass =>\n  // eslint-disable-next-line no-unused-vars, no-shadow\n  class extends superclass {\n    /**\n     * @return {SlotsMap}\n     */\n    get slots() {\n      return {};\n    }\n\n    constructor() {\n      super();\n      this.__privateSlots = new Set(null);\n    }\n\n    connectedCallback() {\n      // @ts-ignore checking this in case we pass LitElement, found no good way to type this...\n      if (super.connectedCallback) {\n        // @ts-ignore checking this in case we pass LitElement, found no good way to type this...\n        super.connectedCallback();\n      }\n      this._connectSlotMixin();\n    }\n\n    _connectSlotMixin() {\n      if (!this.__isConnectedSlotMixin) {\n        Object.keys(this.slots).forEach(slotName => {\n          if (!this.querySelector(`[slot=${slotName}]`)) {\n            const slotFactory = this.slots[slotName];\n            const slotContent = slotFactory();\n            // ignore non-elements to enable conditional slots\n            if (slotContent instanceof Element) {\n              slotContent.setAttribute('slot', slotName);\n              this.appendChild(slotContent);\n              this.__privateSlots.add(slotName);\n            }\n          }\n        });\n        this.__isConnectedSlotMixin = true;\n      }\n    }\n\n    /**\n     * @param {string} slotName Name of the slot\n     * @return {boolean} true if given slot name been created by SlotMixin\n     */\n    _isPrivateSlot(slotName) {\n      return this.__privateSlots.has(slotName);\n    }\n  };\n\nexport const SlotMixin = dedupeMixin(SlotMixinImplementation);\n","/**\n * From https://stackoverflow.com/questions/4565112/javascript-how-to-find-out-if-the-user-browser-is-chrome\n * @param {string} [flavor]\n */\nfunction checkChrome(flavor = 'google-chrome') {\n  // @ts-ignore\n  const isChromium = window.chrome;\n  if (flavor === 'chromium') {\n    return isChromium;\n  }\n  const winNav = window.navigator;\n  const vendorName = winNav.vendor;\n  // @ts-ignore\n  const isOpera = typeof window.opr !== 'undefined';\n  const isIEedge = winNav.userAgent.indexOf('Edge') > -1;\n  const isIOSChrome = winNav.userAgent.match('CriOS');\n\n  if (flavor === 'ios') {\n    return isIOSChrome;\n  }\n\n  if (flavor === 'google-chrome') {\n    return (\n      isChromium !== null &&\n      typeof isChromium !== 'undefined' &&\n      vendorName === 'Google Inc.' &&\n      isOpera === false &&\n      isIEedge === false\n    );\n  }\n\n  return undefined;\n}\n\nexport const browserDetection = {\n  isIE11: /Trident/.test(window.navigator.userAgent),\n  isChrome: checkChrome(),\n  isIOSChrome: checkChrome('ios'),\n  isChromium: checkChrome('chromium'),\n  isMac: navigator.appVersion.indexOf('Mac') !== -1,\n};\n","import { dedupeMixin } from '@lion/core';\n\n/**\n * @typedef {import('../../types/registration/FormRegisteringMixinTypes').FormRegisteringMixin} FormRegisteringMixin\n * @typedef {import('../../types/registration/FormRegistrarMixinTypes').ElementWithParentFormGroup} ElementWithParentFormGroup\n * @typedef {import('../../types/registration/FormRegistrarMixinTypes').FormRegistrarHost} FormRegistrarHost\n */\n\n/**\n * #FormRegisteringMixin:\n *\n * This Mixin registers a form element to a Registrar\n *\n * @type {FormRegisteringMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<HTMLElement>} superclass\n */\nconst FormRegisteringMixinImplementation = superclass =>\n  class extends superclass {\n    constructor() {\n      super();\n      /** @type {FormRegistrarHost | undefined} */\n      this._parentFormGroup = undefined;\n    }\n\n    connectedCallback() {\n      // @ts-expect-error check it anyway, because could be lit-element extension\n      if (super.connectedCallback) {\n        // @ts-expect-error check it anyway, because could be lit-element extension\n        super.connectedCallback();\n      }\n      this.dispatchEvent(\n        new CustomEvent('form-element-register', {\n          detail: { element: this },\n          bubbles: true,\n        }),\n      );\n    }\n\n    disconnectedCallback() {\n      // @ts-expect-error check it anyway, because could be lit-element extension\n      if (super.disconnectedCallback) {\n        // @ts-expect-error check it anyway, because could be lit-element extension\n        super.disconnectedCallback();\n      }\n      if (this._parentFormGroup) {\n        this._parentFormGroup.removeFormElement(this);\n      }\n    }\n  };\n\nexport const FormRegisteringMixin = dedupeMixin(FormRegisteringMixinImplementation);\n","/* eslint-disable no-bitwise */\nimport { browserDetection } from '@lion/core';\n\nconst moveDownConditions = [\n  Node.DOCUMENT_POSITION_PRECEDING,\n  Node.DOCUMENT_POSITION_CONTAINS,\n  Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING,\n];\n\n/**\n * @desc Let the order of adding ids to aria element by DOM order, so that the screen reader\n * respects visual order when reading:\n * https://developers.google.com/web/fundamentals/accessibility/focus/dom-order-matters\n * @param {HTMLElement[]} descriptionElements - holds references to description or label elements whose\n * id should be returned\n * @param {Object} opts\n * @param {boolean} [opts.reverse]\n * @returns {HTMLElement[]} sorted set of elements based on dom order\n */\nexport function getAriaElementsInRightDomOrder(descriptionElements, { reverse } = {}) {\n  /**\n   * @param {HTMLElement} a\n   * @param {HTMLElement} b\n   * @return {-1|1}\n   */\n  const putPrecedingSiblingsAndLocalParentsFirst = (a, b) => {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n    const pos = a.compareDocumentPosition(b);\n\n    // Unfortunately, for IE, we have to switch the order (?)\n    if (moveDownConditions.includes(pos)) {\n      return browserDetection.isIE11 ? -1 : 1;\n    }\n    return browserDetection.isIE11 ? 1 : -1;\n  };\n\n  const descriptionEls = descriptionElements.filter(el => el); // filter out null references\n  descriptionEls.sort(putPrecedingSiblingsAndLocalParentsFirst);\n  if (reverse) {\n    descriptionEls.reverse();\n  }\n  return descriptionEls;\n}\n","/**\n * A modelValue can demand a certain type (Date, Number, Iban etc.). A correct type will always be\n * translatable into a String representation (the value presented to the end user) via the\n * `formatter`. When the type is not valid (usually as a consequence of a user typing in an invalid\n * or incomplete viewValue), the current truth is captured in the `Unparseable` type.\n * For example: a viewValue can't be parsed (for instance 'foo' when the type should be Number).\n\n * The model(value) concept as implemented in lion-web is conceptually comparable to those found in\n * popular frameworks like Angular and Vue.\n\n * The Unparseable type is an addition on top of this that mainly is added for the following two\n * purposes:\n * - restoring user sessions\n * - realtime updated with all value changes\n */\nexport class Unparseable {\n  /** @param {string} value */\n  constructor(value) {\n    this.type = 'unparseable';\n    this.viewValue = value;\n  }\n\n  toString() {\n    return JSON.stringify({ type: this.type, viewValue: this.viewValue });\n  }\n}\n","import { css, dedupeMixin, html, nothing, SlotMixin } from '@lion/core';\nimport { DisabledMixin } from '@lion/core/src/DisabledMixin.js';\nimport { FormRegisteringMixin } from './registration/FormRegisteringMixin.js';\nimport { getAriaElementsInRightDomOrder } from './utils/getAriaElementsInRightDomOrder.js';\nimport { Unparseable } from './validate/Unparseable.js';\n\n/**\n * @typedef {import('@lion/core').TemplateResult} TemplateResult\n * @typedef {import('@lion/core').CSSResult} CSSResult\n * @typedef {import('@lion/core').nothing} nothing\n * @typedef {import('@lion/core/types/SlotMixinTypes').SlotsMap} SlotsMap\n * @typedef {import('../types/FormControlMixinTypes.js').FormControlMixin} FormControlMixin\n * @typedef {import('../types/FormControlMixinTypes.js').ModelValueEventDetails} ModelValueEventDetails\n */\n\n/**\n * Generates random unique identifier (for dom elements)\n * @param {string} prefix\n */\nfunction uuid(prefix) {\n  return `${prefix}-${Math.random().toString(36).substr(2, 10)}`;\n}\n\n/**\n * #FormControlMixin :\n *\n * This Mixin is a shared fundament for all form components, it's applied on:\n * - LionField (which is extended to LionInput, LionTextarea, LionSelect etc. etc.)\n * - LionFieldset (which is extended to LionRadioGroup, LionCheckboxGroup, LionForm)\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n * @type {FormControlMixin}\n */\nconst FormControlMixinImplementation = superclass =>\n  // eslint-disable-next-line no-shadow, no-unused-vars\n  class FormControlMixin extends FormRegisteringMixin(DisabledMixin(SlotMixin(superclass))) {\n    static get properties() {\n      return {\n        /**\n         * The name the element will be registered on to the .formElements collection\n         * of the parent.\n         */\n        name: {\n          type: String,\n          reflect: true,\n        },\n        /**\n         * A Boolean attribute which, if present, indicates that the user should not be able to edit\n         * the value of the input. The difference between disabled and readonly is that read-only\n         * controls can still function, whereas disabled controls generally do not function as\n         * controls until they are enabled.\n         *\n         * (From: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-readonly)\n         */\n        readOnly: {\n          type: Boolean,\n          attribute: 'readonly',\n          reflect: true,\n        },\n        /**\n         * The label text for the input node.\n         * When no light dom defined via [slot=label], this value will be used\n         */\n        label: String, // FIXME: { attribute: false } breaks a bunch of tests, but shouldn't...\n        /**\n         * The helpt text for the input node.\n         * When no light dom defined via [slot=help-text], this value will be used\n         */\n        helpText: {\n          type: String,\n          attribute: 'help-text',\n        },\n\n        /**\n         * The model value is the result of the parser function(when available).\n         * It should be considered as the internal value used for validation and reasoning/logic.\n         * The model value is 'ready for consumption' by the outside world (think of a Date\n         * object or a float). The modelValue can(and is recommended to) be used as both input\n         * value and output value of the `LionField`.\n         *\n         * Examples:\n         * - For a date input: a String '20/01/1999' will be converted to new Date('1999/01/20')\n         * - For a number input: a formatted String '1.234,56' will be converted to a Number:\n         *   1234.56\n         */\n        modelValue: { attribute: false },\n\n        /**\n         * Contains all elements that should end up in aria-labelledby of `._inputNode`\n         */\n        _ariaLabelledNodes: { attribute: false },\n        /**\n         * Contains all elements that should end up in aria-describedby of `._inputNode`\n         */\n        _ariaDescribedNodes: { attribute: false },\n        /**\n         * Based on the role, details of handling model-value-changed repropagation differ.\n         */\n        _repropagationRole: { attribute: false },\n        /**\n         * By default, a field with _repropagationRole 'choice-group' will act as an\n         * 'endpoint'. This means it will be considered as an individual field: for\n         * a select, individual options will not be part of the formPath. They\n         * will.\n         * Similarly, components that (a11y wise) need to be fieldsets, but 'interaction wise'\n         * (from Application Developer perspective) need to be more like fields\n         * (think of an amount-input with a currency select box next to it), can set this\n         * to true to hide private internals in the formPath.\n         */\n        _isRepropagationEndpoint: { attribute: false },\n      };\n    }\n\n    /**\n     * @return {string}\n     */\n    get label() {\n      return this.__label || (this._labelNode && this._labelNode.textContent) || '';\n    }\n\n    /**\n     * @param {string} newValue\n     */\n    set label(newValue) {\n      const oldValue = this.label;\n      /** @type {string} */\n      this.__label = newValue;\n      this.requestUpdate('label', oldValue);\n    }\n\n    /**\n     * @return {string}\n     */\n    get helpText() {\n      return this.__helpText || (this._helpTextNode && this._helpTextNode.textContent) || '';\n    }\n\n    /**\n     * @param {string} newValue\n     */\n    set helpText(newValue) {\n      const oldValue = this.helpText;\n      /** @type {string} */\n      this.__helpText = newValue;\n      this.requestUpdate('helpText', oldValue);\n    }\n\n    /**\n     * @return {string}\n     */\n    get fieldName() {\n      return this.__fieldName || this.label || this.name || '';\n    }\n\n    /**\n     * @param {string} value\n     */\n    set fieldName(value) {\n      /** @type {string} */\n      this.__fieldName = value;\n    }\n\n    /**\n     * @return {SlotsMap}\n     */\n    get slots() {\n      return {\n        ...super.slots,\n        label: () => {\n          const label = document.createElement('label');\n          label.textContent = this.label;\n          return label;\n        },\n        'help-text': () => {\n          const helpText = document.createElement('div');\n          helpText.textContent = this.helpText;\n          return helpText;\n        },\n      };\n    }\n\n    get _inputNode() {\n      return this.__getDirectSlotChild('input');\n    }\n\n    get _labelNode() {\n      return this.__getDirectSlotChild('label');\n    }\n\n    get _helpTextNode() {\n      return this.__getDirectSlotChild('help-text');\n    }\n\n    get _feedbackNode() {\n      return /** @type {import('./validate/LionValidationFeedback').LionValidationFeedback | undefined} */ (this.__getDirectSlotChild(\n        'feedback',\n      ));\n    }\n\n    constructor() {\n      super();\n      /** @type {string | undefined} */\n      this.name = undefined;\n      /** @type {string} */\n      this._inputId = uuid(this.localName);\n      /** @type {HTMLElement[]} */\n      this._ariaLabelledNodes = [];\n      /** @type {HTMLElement[]} */\n      this._ariaDescribedNodes = [];\n      /** @type {'child'|'choice-group'|'fieldset'} */\n      this._repropagationRole = 'child';\n      this._isRepropagationEndpoint = false;\n      this.addEventListener(\n        'model-value-changed',\n        /** @type {EventListenerOrEventListenerObject} */ (this.__repropagateChildrenValues),\n      );\n      /** @type {EventListener} */\n      this._onLabelClick = this._onLabelClick.bind(this);\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this._enhanceLightDomClasses();\n      this._enhanceLightDomA11y();\n      this._triggerInitialModelValueChangedEvent();\n\n      if (this._labelNode) {\n        this._labelNode.addEventListener('click', this._onLabelClick);\n      }\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      if (this._labelNode) {\n        this._labelNode.removeEventListener('click', this._onLabelClick);\n      }\n    }\n\n    /** @param {import('@lion/core').PropertyValues } changedProperties */\n    updated(changedProperties) {\n      super.updated(changedProperties);\n\n      if (changedProperties.has('_ariaLabelledNodes')) {\n        this.__reflectAriaAttr(\n          'aria-labelledby',\n          this._ariaLabelledNodes,\n          this.__reorderAriaLabelledNodes,\n        );\n      }\n\n      if (changedProperties.has('_ariaDescribedNodes')) {\n        this.__reflectAriaAttr(\n          'aria-describedby',\n          this._ariaDescribedNodes,\n          this.__reorderAriaDescribedNodes,\n        );\n      }\n\n      if (changedProperties.has('label') && this._labelNode) {\n        this._labelNode.textContent = this.label;\n      }\n\n      if (changedProperties.has('helpText') && this._helpTextNode) {\n        this._helpTextNode.textContent = this.helpText;\n      }\n\n      if (changedProperties.has('name')) {\n        this.dispatchEvent(\n          new CustomEvent('form-element-name-changed', {\n            detail: { oldName: changedProperties.get('name'), newName: this.name },\n            bubbles: true,\n          }),\n        );\n      }\n    }\n\n    _triggerInitialModelValueChangedEvent() {\n      this.__dispatchInitialModelValueChangedEvent();\n    }\n\n    _enhanceLightDomClasses() {\n      if (this._inputNode) {\n        this._inputNode.classList.add('form-control');\n      }\n    }\n\n    _enhanceLightDomA11y() {\n      const { _inputNode, _labelNode, _helpTextNode, _feedbackNode } = this;\n\n      if (_inputNode) {\n        _inputNode.id = _inputNode.id || this._inputId;\n      }\n      if (_labelNode) {\n        _labelNode.setAttribute('for', this._inputId);\n        this.addToAriaLabelledBy(_labelNode, { idPrefix: 'label' });\n      }\n      if (_helpTextNode) {\n        this.addToAriaDescribedBy(_helpTextNode, { idPrefix: 'help-text' });\n      }\n      if (_feedbackNode) {\n        _feedbackNode.setAttribute('aria-live', 'polite');\n        this.addToAriaDescribedBy(_feedbackNode, { idPrefix: 'feedback' });\n      }\n      this._enhanceLightDomA11yForAdditionalSlots();\n    }\n\n    /**\n     * Enhances additional slots(prefix, suffix, before, after) defined by developer.\n     *\n     * When boolean attribute data-label or data-description is found,\n     * the slot element will be connected to the input via aria-labelledby or aria-describedby\n     * @param {string[]} additionalSlots\n     */\n    _enhanceLightDomA11yForAdditionalSlots(\n      additionalSlots = ['prefix', 'suffix', 'before', 'after'],\n    ) {\n      additionalSlots.forEach(additionalSlot => {\n        const element = this.__getDirectSlotChild(additionalSlot);\n        if (element) {\n          if (element.hasAttribute('data-label') === true) {\n            this.addToAriaLabelledBy(element, { idPrefix: additionalSlot });\n          }\n          if (element.hasAttribute('data-description') === true) {\n            this.addToAriaDescribedBy(element, { idPrefix: additionalSlot });\n          }\n        }\n      });\n    }\n\n    /**\n     * Will handle help text, validation feedback and character counter,\n     * prefix/suffix/before/after (if they contain data-description flag attr).\n     * Also, contents of id references that will be put in the <lion-field>._ariaDescribedby property\n     * from an external context, will be read by a screen reader.\n     * @param {string} attrName\n     * @param {HTMLElement[]} nodes\n     * @param {boolean|undefined} reorder\n     */\n    __reflectAriaAttr(attrName, nodes, reorder) {\n      if (this._inputNode) {\n        if (reorder) {\n          const insideNodes = nodes.filter(n => this.contains(n));\n          const outsideNodes = nodes.filter(n => !this.contains(n));\n          // eslint-disable-next-line no-param-reassign\n          nodes = [...getAriaElementsInRightDomOrder(insideNodes), ...outsideNodes];\n        }\n        const string = nodes.map(n => n.id).join(' ');\n        this._inputNode.setAttribute(attrName, string);\n      }\n    }\n\n    /**\n     * Default Render Result:\n     * <div class=\"form-field__group-one\">\n     *   <div class=\"form-field__label\">\n     *     <slot name=\"label\"></slot>\n     *   </div>\n     *   <small class=\"form-field__help-text\">\n     *     <slot name=\"help-text\"></slot>\n     *   </small>\n     * </div>\n     * <div class=\"form-field__group-two\">\n     *   <div class=\"input-group\">\n     *     <div class=\"input-group__before\">\n     *       <slot name=\"before\"></slot>\n     *     </div>\n     *     <div class=\"input-group__container\">\n     *       <div class=\"input-group__prefix\">\n     *         <slot name=\"prefix\"></slot>\n     *       </div>\n     *       <div class=\"input-group__input\">\n     *         <slot name=\"input\"></slot>\n     *       </div>\n     *       <div class=\"input-group__suffix\">\n     *         <slot name=\"suffix\"></slot>\n     *       </div>\n     *     </div>\n     *     <div class=\"input-group__after\">\n     *       <slot name=\"after\"></slot>\n     *     </div>\n     *   </div>\n     *   <div class=\"form-field__feedback\">\n     *     <slot name=\"feedback\"></slot>\n     *   </div>\n     * </div>\n     */\n    render() {\n      return html`\n        <div class=\"form-field__group-one\">${this._groupOneTemplate()}</div>\n        <div class=\"form-field__group-two\">${this._groupTwoTemplate()}</div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    _groupOneTemplate() {\n      return html` ${this._labelTemplate()} ${this._helpTextTemplate()} `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    _groupTwoTemplate() {\n      return html` ${this._inputGroupTemplate()} ${this._feedbackTemplate()} `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _labelTemplate() {\n      return html`\n        <div class=\"form-field__label\">\n          <slot name=\"label\"></slot>\n        </div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _helpTextTemplate() {\n      return html`\n        <small class=\"form-field__help-text\">\n          <slot name=\"help-text\"></slot>\n        </small>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    _inputGroupTemplate() {\n      return html`\n        <div class=\"input-group\">\n          ${this._inputGroupBeforeTemplate()}\n          <div class=\"input-group__container\">\n            ${this._inputGroupPrefixTemplate()} ${this._inputGroupInputTemplate()}\n            ${this._inputGroupSuffixTemplate()}\n          </div>\n          ${this._inputGroupAfterTemplate()}\n        </div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _inputGroupBeforeTemplate() {\n      return html`\n        <div class=\"input-group__before\">\n          <slot name=\"before\"></slot>\n        </div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult | nothing}\n     */\n    _inputGroupPrefixTemplate() {\n      return !Array.from(this.children).find(child => child.slot === 'prefix')\n        ? nothing\n        : html`\n            <div class=\"input-group__prefix\">\n              <slot name=\"prefix\"></slot>\n            </div>\n          `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _inputGroupInputTemplate() {\n      return html`\n        <div class=\"input-group__input\">\n          <slot name=\"input\"></slot>\n        </div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult | nothing}\n     */\n    _inputGroupSuffixTemplate() {\n      return !Array.from(this.children).find(child => child.slot === 'suffix')\n        ? nothing\n        : html`\n            <div class=\"input-group__suffix\">\n              <slot name=\"suffix\"></slot>\n            </div>\n          `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _inputGroupAfterTemplate() {\n      return html`\n        <div class=\"input-group__after\">\n          <slot name=\"after\"></slot>\n        </div>\n      `;\n    }\n\n    /**\n     * @return {TemplateResult}\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _feedbackTemplate() {\n      return html`\n        <div class=\"form-field__feedback\">\n          <slot name=\"feedback\"></slot>\n        </div>\n      `;\n    }\n\n    /**\n     * @param {?} modelValue\n     * @return {boolean}\n     */\n    // @ts-ignore FIXME: Move to FormatMixin? Since there we have access to modelValue prop\n    _isEmpty(modelValue = this.modelValue) {\n      let value = modelValue;\n      // @ts-ignore\n      if (this.modelValue instanceof Unparseable) {\n        // @ts-ignore\n        value = this.modelValue.viewValue;\n      }\n\n      // Checks for empty platform types: Objects, Arrays, Dates\n      if (typeof value === 'object' && value !== null && !(value instanceof Date)) {\n        return !Object.keys(value).length;\n      }\n\n      // eslint-disable-next-line no-mixed-operators\n      // Checks for empty platform types: Numbers, Booleans\n      const isNumberValue = typeof value === 'number' && (value === 0 || Number.isNaN(value));\n      const isBooleanValue = typeof value === 'boolean' && value === false;\n\n      return !value && !isNumberValue && !isBooleanValue;\n    }\n\n    /**\n     * All CSS below is written from a generic mindset, following BEM conventions:\n     * https://en.bem.info/methodology/\n     * Although the CSS and HTML are implemented by the component, they should be regarded as\n     * totally decoupled.\n     *\n     * Not only does this force us to write better structured css, it also allows for future\n     * reusability in many different ways like:\n     *  - disabling shadow DOM for a component (for water proof encapsulation can be combined with\n     *    a build step)\n     *  - easier translation to more flexible, WebComponents agnostic solutions like JSS\n     *    (allowing extends, mixins, reasoning, IDE integration, tree shaking etc.)\n     *  - export to a CSS module for reuse in an outer context\n     *\n     *\n     * Please note that the HTML structure is purposely 'loose', allowing multiple design systems\n     * to be compatible\n     * with the CSS component.\n     * Note that every occurence of '::slotted(*)' can be rewritten to '> *' for use in an other\n     * context\n     */\n\n    /**\n     * {block} .form-field\n     *\n     * Structure:\n     * - {element}  .form-field__label : a wrapper element around the projected label\n     * - {element}  .form-field__help-text (optional) : a wrapper element around the projected\n     *               help-text\n     * - {block}    .input-group : a container around the input element, including prefixes and\n     *               suffixes\n     * - {element}  .form-field__feedback (optional) : a wrapper element around the projected\n     *               (validation) feedback message\n     *\n     * Modifiers:\n     * - {state} [disabled] when .form-control (<input>, <textarea> etc.) has disabled set\n     *            to true\n     * - {state} [filled] whether <input> has a value\n     * - {state} [touched] whether the user had blurred the field once\n     * - {state} [dirty] whether the value has changed since initial value\n     *\n     * TODO: update states below\n     * These classes are now attributes. Check them agains the new attribute names inside ValidateMixin\n     * and InteractionStateMixin. Some states got renamed. Make sure to use the correct ones!\n     * - {state} .state-focused: when .form-control (<input>, <textarea> etc.) <input> has focus\n     * - {state} .state-invalid: when input has error(s) (regardless of whether they should be\n     *            shown to the user)\n     * - {state} .state-error: when input has error(s) and this/these should be shown to the user\n     * - {state} .state-warning: when input has warning(s) and this/these should be shown to the\n     *            user\n     * - {state} .state-info: when input has info feedback message(s) and this/these should be shown\n     *            to the user\n     * - {state} .state-success: when input has success feedback message(s) and this/these should be\n     *            shown to the user\n     */\n\n    /**\n     * {block} .input-group\n     *\n     * Structure:\n     * - {element} .input-group__before (optional) : a prefix that resides outside the container\n     * - {element} .input-group__container : an inner container: this element contains all styling\n     *  - {element} .input-group__prefix (optional) : a prefix that resides in the container,\n     *               allowing it to be detectable as a :first-child\n     *  - {element} .input-group__input : a wrapper around the form-control component\n     *   - {block} .form-control : the actual input element (input/select/textarea)\n     *  - {element} .input-group__suffix (optional) : a suffix that resides inside the container,\n     *               allowing it to be detectable as a :last-child\n     *  - {element} .input-group__bottom (optional) : placeholder element for additional styling\n     *               (like an animated line for material design input)\n     * - {element} .input-group__after (optional) :  a suffix that resides outside the container\n     */\n    static get styles() {\n      const superCtor = /** @type {typeof import('@lion/core').LitElement} */ (super.prototype\n        .constructor);\n      return [\n        superCtor.styles ? superCtor.styles : [],\n        css`\n          /**********************\n            {block} .form-field\n           ********************/\n\n          :host {\n            display: block;\n          }\n\n          :host([hidden]) {\n            display: none;\n          }\n\n          :host([disabled]) {\n            pointer-events: none;\n          }\n\n          :host([disabled]) .form-field__label ::slotted(*),\n          :host([disabled]) .form-field__help-text ::slotted(*) {\n            color: var(--disabled-text-color, #767676);\n          }\n\n          /***********************\n            {block} .input-group\n           *********************/\n\n          .input-group__container {\n            display: flex;\n          }\n\n          .input-group__input {\n            flex: 1;\n            display: flex;\n          }\n\n          /***** {state} :disabled *****/\n          :host([disabled]) .input-group ::slotted(slot='input') {\n            color: var(--disabled-text-color, #767676);\n          }\n\n          /***********************\n            {block} .form-control\n           **********************/\n\n          .input-group__container > .input-group__input ::slotted(.form-control) {\n            flex: 1 1 auto;\n            margin: 0; /* remove input margin in Safari */\n            font-size: 100%; /* normalize default input font-size */\n          }\n        `,\n      ];\n    }\n\n    /**\n     * @return {Array.<HTMLElement|undefined>}\n     */\n    // Returns dom references to all elements that should be referred to by field(s)\n    _getAriaDescriptionElements() {\n      return [this._helpTextNode, this._feedbackNode];\n    }\n\n    /**\n     * Meant for Application Developers wanting to add to aria-labelledby attribute.\n     * @param {HTMLElement} element\n     * @param {{idPrefix?:string; reorder?: boolean}} customConfig\n     */\n    addToAriaLabelledBy(element, customConfig = {}) {\n      const { idPrefix, reorder } = {\n        reorder: true,\n        ...customConfig,\n      };\n\n      // eslint-disable-next-line no-param-reassign\n      element.id = element.id || `${idPrefix}-${this._inputId}`;\n      if (!this._ariaLabelledNodes.includes(element)) {\n        this._ariaLabelledNodes = [...this._ariaLabelledNodes, element];\n        // This value will be read when we need to reflect to attr\n        /** @type {boolean} */\n        this.__reorderAriaLabelledNodes = Boolean(reorder);\n      }\n    }\n\n    /**\n     * Meant for Application Developers wanting to add to aria-describedby attribute.\n     * @param {HTMLElement} element\n     * @param {{idPrefix?:string; reorder?: boolean}} customConfig\n     */\n    addToAriaDescribedBy(element, customConfig = {}) {\n      const { idPrefix, reorder } = {\n        // chronologically sorts children of host element('this')\n        reorder: true,\n        ...customConfig,\n      };\n\n      // eslint-disable-next-line no-param-reassign\n      element.id = element.id || `${idPrefix}-${this._inputId}`;\n      if (!this._ariaDescribedNodes.includes(element)) {\n        this._ariaDescribedNodes = [...this._ariaDescribedNodes, element];\n        // This value will be read when we need to reflect to attr\n        /** @type {boolean} */\n        this.__reorderAriaDescribedNodes = Boolean(reorder);\n      }\n    }\n\n    /**\n     * @param {string} slotName\n     * @return {HTMLElement | undefined}\n     */\n    __getDirectSlotChild(slotName) {\n      return /** @type {HTMLElement[]} */ (Array.from(this.children)).find(\n        el => el.slot === slotName,\n      );\n    }\n\n    __dispatchInitialModelValueChangedEvent() {\n      // When we are not a fieldset / choice-group, we don't need to wait for our children\n      // to send a unified event\n      if (this._repropagationRole === 'child') {\n        return;\n      }\n\n      // Initially we don't repropagate model-value-changed events coming\n      // from children. On firstUpdated we re-dispatch this event to maintain\n      // 'count consistency' (to not confuse the application developer with a\n      // large number of initial events). Initially the source field will not\n      // be part of the formPath but afterwards it will.\n      /** @type {boolean} */\n      this.__repropagateChildrenInitialized = true;\n      this.dispatchEvent(\n        new CustomEvent('model-value-changed', {\n          bubbles: true,\n          detail: /** @type {ModelValueEventDetails} */ ({\n            formPath: [this],\n            initialize: true,\n            isTriggeredByUser: false,\n          }),\n        }),\n      );\n    }\n\n    /**\n     * @param {CustomEvent} ev\n     */\n    // eslint-disable-next-line class-methods-use-this, no-unused-vars\n    _onBeforeRepropagateChildrenValues(ev) {}\n\n    /**\n     * @param {CustomEvent} ev\n     */\n    __repropagateChildrenValues(ev) {\n      // Allows sub classes to internally listen to the children change events\n      // (before stopImmediatePropagation is called below).\n      this._onBeforeRepropagateChildrenValues(ev);\n      // Normalize target, we also might get it from 'portals' (rich select)\n      const target = (ev.detail && ev.detail.element) || ev.target;\n      const isEndpoint =\n        this._isRepropagationEndpoint || this._repropagationRole === 'choice-group';\n\n      // Prevent eternal loops after we sent the event below.\n      if (target === this) {\n        return;\n      }\n\n      // A. Stop sibling handlers\n      //\n      // Make sure our sibling event listeners (added by Application developers) will not get\n      // the child model-value-changed event, but the repropagated one at the bottom of this\n      // method\n      ev.stopImmediatePropagation();\n\n      // B1. Are we still initializing? If so, halt...\n      //\n      // Stop repropagating children events before firstUpdated and make sure we de not\n      // repropagate init events of our children (we already sent our own\n      // initial model-value-change event in firstUpdated)\n      const isGroup = this._repropagationRole !== 'child'; // => fieldset or choice-group\n      const isSelfInitializing = isGroup && !this.__repropagateChildrenInitialized;\n      const isChildGroupInitializing = ev.detail && ev.detail.initialize;\n      if (isSelfInitializing || isChildGroupInitializing) {\n        return;\n      }\n\n      // B2. Are we a single choice choice-group? If so, halt when target unchecked\n      // and something else is checked, meaning we will get\n      // another model-value-changed dispatch for the checked target\n      //\n      // We only send the checked changed up (not the unchecked). In this way a choice group\n      // (radio-group, checkbox-group, select/listbox) acts as an 'endpoint' (a single Field)\n      // just like the native <select>\n      if (!this._repropagationCondition(target)) {\n        return;\n      }\n\n      // C1. We are ready to dispatch. Create a formPath\n      //\n      // Compute the formPath. Choice groups are regarded 'end points'\n      let parentFormPath = [];\n      if (!isEndpoint) {\n        parentFormPath = (ev.detail && ev.detail.formPath) || [target];\n      }\n      const formPath = [...parentFormPath, this];\n\n      // C2. Finally, redispatch a fresh model-value-changed event from our host, consumable\n      // for an Application Developer\n      //\n      // Since for a11y everything needs to be in lightdom, we don't add 'composed:true'\n      this.dispatchEvent(\n        new CustomEvent('model-value-changed', {\n          bubbles: true,\n          detail: /** @type {ModelValueEventDetails} */ ({\n            formPath,\n            isTriggeredByUser: Boolean(ev.detail?.isTriggeredByUser),\n          }),\n        }),\n      );\n    }\n\n    /**\n     * TODO: Extend this in choice group so that target is always a choice input and multipleChoice exists.\n     * This will fix the types and reduce the need for ignores/expect-errors\n     * @param {EventTarget & import('../types/choice-group/ChoiceInputMixinTypes').ChoiceInputHost} target\n     */\n    _repropagationCondition(target) {\n      return !(\n        this._repropagationRole === 'choice-group' &&\n        // @ts-expect-error multipleChoice is not directly available but only as side effect\n        !this.multipleChoice &&\n        !target.checked\n      );\n    }\n\n    /**\n     * @overridable\n     * A Subclasser should only override this method if the interactive element\n     * ([slot=input]) is not a native element(like input, textarea, select)\n     * that already receives focus on label click.\n     *\n     * @example\n     * _onLabelClick() {\n     *   this._invokerNode.focus();\n     * }\n     */\n    // eslint-disable-next-line class-methods-use-this\n    _onLabelClick() {}\n  };\n\nexport const FormControlMixin = dedupeMixin(FormControlMixinImplementation);\n","import { dedupeMixin } from '@lion/core';\nimport { FormControlMixin } from './FormControlMixin.js';\n/**\n * @typedef {import('../types/FocusMixinTypes').FocusMixin} FocusMixin\n * @type {FocusMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n */\nconst FocusMixinImplementation = superclass =>\n  // @ts-expect-error false positive for incompatible static get properties. Lit-element merges super properties already for you.\n  // eslint-disable-next-line no-unused-vars, max-len, no-shadow\n  class FocusMixin extends FormControlMixin(superclass) {\n    static get properties() {\n      return {\n        focused: {\n          type: Boolean,\n          reflect: true,\n        },\n      };\n    }\n\n    constructor() {\n      super();\n      this.focused = false;\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this.__registerEventsForFocusMixin();\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.__teardownEventsForFocusMixin();\n    }\n\n    focus() {\n      const native = this._inputNode;\n      if (native) {\n        native.focus();\n      }\n    }\n\n    blur() {\n      const native = this._inputNode;\n      if (native) {\n        native.blur();\n      }\n    }\n\n    __onFocus() {\n      this.focused = true;\n    }\n\n    __onBlur() {\n      this.focused = false;\n    }\n\n    __registerEventsForFocusMixin() {\n      /**\n       * focus\n       * @param {Event} ev\n       */\n      this.__redispatchFocus = ev => {\n        ev.stopPropagation();\n        this.dispatchEvent(new Event('focus'));\n      };\n      this._inputNode.addEventListener('focus', this.__redispatchFocus);\n\n      /**\n       * blur\n       * @param {Event} ev\n       */\n      this.__redispatchBlur = ev => {\n        ev.stopPropagation();\n        this.dispatchEvent(new Event('blur'));\n      };\n      this._inputNode.addEventListener('blur', this.__redispatchBlur);\n\n      /**\n       * focusin\n       * @param {Event} ev\n       */\n      this.__redispatchFocusin = ev => {\n        ev.stopPropagation();\n        this.__onFocus();\n        this.dispatchEvent(new Event('focusin', { bubbles: true, composed: true }));\n      };\n      this._inputNode.addEventListener('focusin', this.__redispatchFocusin);\n\n      /**\n       * focusout\n       * @param {Event} ev\n       */\n      this.__redispatchFocusout = ev => {\n        ev.stopPropagation();\n        this.__onBlur();\n        this.dispatchEvent(new Event('focusout', { bubbles: true, composed: true }));\n      };\n      this._inputNode.addEventListener('focusout', this.__redispatchFocusout);\n    }\n\n    __teardownEventsForFocusMixin() {\n      this._inputNode.removeEventListener(\n        'focus',\n        /** @type {EventListenerOrEventListenerObject} */ (this.__redispatchFocus),\n      );\n      this._inputNode.removeEventListener(\n        'blur',\n        /** @type {EventListenerOrEventListenerObject} */ (this.__redispatchBlur),\n      );\n      this._inputNode.removeEventListener(\n        'focusin',\n        /** @type {EventListenerOrEventListenerObject} */ (this.__redispatchFocusin),\n      );\n      this._inputNode.removeEventListener(\n        'focusout',\n        /** @type {EventListenerOrEventListenerObject} */ (this.__redispatchFocusout),\n      );\n    }\n  };\n\nexport const FocusMixin = dedupeMixin(FocusMixinImplementation);\n","const sym = Symbol.for('lion::SingletonManagerClassStorage');\n\nexport class SingletonManagerClass {\n  constructor() {\n    this._map = window[sym] ? window[sym] : (window[sym] = new Map());\n  }\n\n  /**\n   * Ignores already existing keys (e.g. it will not override)\n   *\n   * @param {string} key\n   * @param {any} value\n   */\n  set(key, value) {\n    if (!this.has(key)) {\n      this._map.set(key, value);\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @returns\n   */\n  get(key) {\n    return this._map.get(key);\n  }\n\n  /**\n   * @param {string} key\n   */\n  has(key) {\n    return this._map.has(key);\n  }\n}\n","import { SingletonManagerClass } from './src/SingletonManagerClass.js';\n\nexport { SingletonManagerClass } from './src/SingletonManagerClass.js';\n\nexport const singletonManager = new SingletonManagerClass();\n","function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// @flow\nvar LONG = 'long';\nvar SHORT = 'short';\nvar NARROW = 'narrow';\nvar NUMERIC = 'numeric';\nvar TWODIGIT = '2-digit';\n\n/**\n * formatting information\n **/\nvar formatMessageFormats = {\n  number: {\n    decimal: {\n      style: 'decimal'\n    },\n    integer: {\n      style: 'decimal',\n      maximumFractionDigits: 0\n    },\n    currency: {\n      style: 'currency',\n      currency: 'USD'\n    },\n    percent: {\n      style: 'percent'\n    },\n    default: {\n      style: 'decimal'\n    }\n  },\n  date: {\n    short: {\n      month: NUMERIC,\n      day: NUMERIC,\n      year: TWODIGIT\n    },\n    medium: {\n      month: SHORT,\n      day: NUMERIC,\n      year: NUMERIC\n    },\n    long: {\n      month: LONG,\n      day: NUMERIC,\n      year: NUMERIC\n    },\n    full: {\n      month: LONG,\n      day: NUMERIC,\n      year: NUMERIC,\n      weekday: LONG\n    },\n    default: {\n      month: SHORT,\n      day: NUMERIC,\n      year: NUMERIC\n    }\n  },\n  time: {\n    short: {\n      hour: NUMERIC,\n      minute: NUMERIC\n    },\n    medium: {\n      hour: NUMERIC,\n      minute: NUMERIC,\n      second: NUMERIC\n    },\n    long: {\n      hour: NUMERIC,\n      minute: NUMERIC,\n      second: NUMERIC,\n      timeZoneName: SHORT\n    },\n    full: {\n      hour: NUMERIC,\n      minute: NUMERIC,\n      second: NUMERIC,\n      timeZoneName: SHORT\n    },\n    default: {\n      hour: NUMERIC,\n      minute: NUMERIC,\n      second: NUMERIC\n    }\n  },\n  duration: {\n    default: {\n      hours: {\n        minimumIntegerDigits: 1,\n        maximumFractionDigits: 0\n      },\n      minutes: {\n        minimumIntegerDigits: 2,\n        maximumFractionDigits: 0\n      },\n      seconds: {\n        minimumIntegerDigits: 2,\n        maximumFractionDigits: 3\n      }\n    }\n  },\n  parseNumberPattern: function (pattern/*: ?string */) {\n    if (!pattern) return\n    var options = {};\n    var currency = pattern.match(/\\b[A-Z]{3}\\b/i);\n    var syms = pattern.replace(/[^]/g, '').length;\n    if (!syms && currency) syms = 1;\n    if (syms) {\n      options.style = 'currency';\n      options.currencyDisplay = syms === 1 ? 'symbol' : syms === 2 ? 'code' : 'name';\n      options.currency = currency ? currency[0].toUpperCase() : 'USD';\n    } else if (pattern.indexOf('%') >= 0) {\n      options.style = 'percent';\n    }\n    if (!/[@#0]/.test(pattern)) return options.style ? options : undefined\n    options.useGrouping = pattern.indexOf(',') >= 0;\n    if (/E\\+?[@#0]+/i.test(pattern) || pattern.indexOf('@') >= 0) {\n      var size = pattern.replace(/E\\+?[@#0]+|[^@#0]/gi, '');\n      options.minimumSignificantDigits = Math.min(Math.max(size.replace(/[^@0]/g, '').length, 1), 21);\n      options.maximumSignificantDigits = Math.min(Math.max(size.length, 1), 21);\n    } else {\n      var parts = pattern.replace(/[^#0.]/g, '').split('.');\n      var integer = parts[0];\n      var n = integer.length - 1;\n      while (integer[n] === '0') --n;\n      options.minimumIntegerDigits = Math.min(Math.max(integer.length - 1 - n, 1), 21);\n      var fraction = parts[1] || '';\n      n = 0;\n      while (fraction[n] === '0') ++n;\n      options.minimumFractionDigits = Math.min(Math.max(n, 0), 20);\n      while (fraction[n] === '#') ++n;\n      options.maximumFractionDigits = Math.min(Math.max(n, 0), 20);\n    }\n    return options\n  },\n  parseDatePattern: function (pattern/*: ?string */) {\n    if (!pattern) return\n    var options = {};\n    for (var i = 0; i < pattern.length;) {\n      var current = pattern[i];\n      var n = 1;\n      while (pattern[++i] === current) ++n;\n      switch (current) {\n        case 'G':\n          options.era = n === 5 ? NARROW : n === 4 ? LONG : SHORT;\n          break\n        case 'y':\n        case 'Y':\n          options.year = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 'M':\n        case 'L':\n          n = Math.min(Math.max(n - 1, 0), 4);\n          options.month = [ NUMERIC, TWODIGIT, SHORT, LONG, NARROW ][n];\n          break\n        case 'E':\n        case 'e':\n        case 'c':\n          options.weekday = n === 5 ? NARROW : n === 4 ? LONG : SHORT;\n          break\n        case 'd':\n        case 'D':\n          options.day = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 'h':\n        case 'K':\n          options.hour12 = true;\n          options.hour = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 'H':\n        case 'k':\n          options.hour12 = false;\n          options.hour = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 'm':\n          options.minute = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 's':\n        case 'S':\n          options.second = n === 2 ? TWODIGIT : NUMERIC;\n          break\n        case 'z':\n        case 'Z':\n        case 'v':\n        case 'V':\n          options.timeZoneName = n === 1 ? SHORT : LONG;\n          break\n      }\n    }\n    return Object.keys(options).length ? options : undefined\n  }\n};\n\n// @flow\n// \"lookup\" algorithm http://tools.ietf.org/html/rfc4647#section-3.4\n// assumes normalized language tags, and matches in a case sensitive manner\nvar lookupClosestLocale = function lookupClosestLocale (locale/*: string | string[] | void */, available/*: { [string]: any } */)/*: ?string */ {\n  if (typeof locale === 'string' && available[locale]) return locale\n  var locales = [].concat(locale || []);\n  for (var l = 0, ll = locales.length; l < ll; ++l) {\n    var current = locales[l].split('-');\n    while (current.length) {\n      var candidate = current.join('-');\n      if (available[candidate]) return candidate\n      current.pop();\n    }\n  }\n};\n\n// @flow\n\n/*:: export type Rule = 'zero' | 'one' | 'two' | 'few' | 'many' | 'other' */\nvar zero = 'zero', one = 'one', two = 'two', few = 'few', many = 'many', other = 'other';\nvar f = [\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return 0 <= n && n <= 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var n = +s;\n    return i === 0 || n === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 0 ? zero\n      : n === 1 ? one\n      : n === 2 ? two\n      : 3 <= n % 100 && n % 100 <= 10 ? few\n      : 11 <= n % 100 && n % 100 <= 99 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return i === 1 && v === 0 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n % 10 === 1 && n % 100 !== 11 ? one\n      : (2 <= n % 10 && n % 10 <= 4) && (n % 100 < 12 || 14 < n % 100) ? few\n      : n % 10 === 0 || (5 <= n % 10 && n % 10 <= 9) || (11 <= n % 100 && n % 100 <= 14) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n % 10 === 1 && (n % 100 !== 11 && n % 100 !== 71 && n % 100 !== 91) ? one\n      : n % 10 === 2 && (n % 100 !== 12 && n % 100 !== 72 && n % 100 !== 92) ? two\n      : ((3 <= n % 10 && n % 10 <= 4) || n % 10 === 9) && ((n % 100 < 10 || 19 < n % 100) && (n % 100 < 70 || 79 < n % 100) && (n % 100 < 90 || 99 < n % 100)) ? few\n      : n !== 0 && n % 1000000 === 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var f = +(s + '.').split('.')[1];\n    return v === 0 && i % 10 === 1 && i % 100 !== 11 || f % 10 === 1 && f % 100 !== 11 ? one\n      : v === 0 && (2 <= i % 10 && i % 10 <= 4) && (i % 100 < 12 || 14 < i % 100) || (2 <= f % 10 && f % 10 <= 4) && (f % 100 < 12 || 14 < f % 100) ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return i === 1 && v === 0 ? one\n      : (2 <= i && i <= 4) && v === 0 ? few\n      : v !== 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 0 ? zero\n      : n === 1 ? one\n      : n === 2 ? two\n      : n === 3 ? few\n      : n === 6 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var t = +('' + s).replace(/^[^.]*.?|0+$/g, '');\n    var n = +s;\n    return n === 1 || t !== 0 && (i === 0 || i === 1) ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var f = +(s + '.').split('.')[1];\n    return v === 0 && i % 100 === 1 || f % 100 === 1 ? one\n      : v === 0 && i % 100 === 2 || f % 100 === 2 ? two\n      : v === 0 && (3 <= i % 100 && i % 100 <= 4) || (3 <= f % 100 && f % 100 <= 4) ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    return i === 0 || i === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var f = +(s + '.').split('.')[1];\n    return v === 0 && (i === 1 || i === 2 || i === 3) || v === 0 && (i % 10 !== 4 && i % 10 !== 6 && i % 10 !== 9) || v !== 0 && (f % 10 !== 4 && f % 10 !== 6 && f % 10 !== 9) ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n === 2 ? two\n      : 3 <= n && n <= 6 ? few\n      : 7 <= n && n <= 10 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 || n === 11 ? one\n      : n === 2 || n === 12 ? two\n      : ((3 <= n && n <= 10) || (13 <= n && n <= 19)) ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return v === 0 && i % 10 === 1 ? one\n      : v === 0 && i % 10 === 2 ? two\n      : v === 0 && (i % 100 === 0 || i % 100 === 20 || i % 100 === 40 || i % 100 === 60 || i % 100 === 80) ? few\n      : v !== 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var n = +s;\n    return i === 1 && v === 0 ? one\n      : i === 2 && v === 0 ? two\n      : v === 0 && (n < 0 || 10 < n) && n % 10 === 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var t = +('' + s).replace(/^[^.]*.?|0+$/g, '');\n    return t === 0 && i % 10 === 1 && i % 100 !== 11 || t !== 0 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n === 2 ? two\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 0 ? zero\n      : n === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var n = +s;\n    return n === 0 ? zero\n      : (i === 0 || i === 1) && n !== 0 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var f = +(s + '.').split('.')[1];\n    var n = +s;\n    return n % 10 === 1 && (n % 100 < 11 || 19 < n % 100) ? one\n      : (2 <= n % 10 && n % 10 <= 9) && (n % 100 < 11 || 19 < n % 100) ? few\n      : f !== 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var v = (s + '.').split('.')[1].length;\n    var f = +(s + '.').split('.')[1];\n    var n = +s;\n    return n % 10 === 0 || (11 <= n % 100 && n % 100 <= 19) || v === 2 && (11 <= f % 100 && f % 100 <= 19) ? zero\n      : n % 10 === 1 && n % 100 !== 11 || v === 2 && f % 10 === 1 && f % 100 !== 11 || v !== 2 && f % 10 === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var f = +(s + '.').split('.')[1];\n    return v === 0 && i % 10 === 1 && i % 100 !== 11 || f % 10 === 1 && f % 100 !== 11 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    var n = +s;\n    return i === 1 && v === 0 ? one\n      : v !== 0 || n === 0 || n !== 1 && (1 <= n % 100 && n % 100 <= 19) ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n === 0 || (2 <= n % 100 && n % 100 <= 10) ? few\n      : 11 <= n % 100 && n % 100 <= 19 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return i === 1 && v === 0 ? one\n      : v === 0 && (2 <= i % 10 && i % 10 <= 4) && (i % 100 < 12 || 14 < i % 100) ? few\n      : v === 0 && i !== 1 && (0 <= i % 10 && i % 10 <= 1) || v === 0 && (5 <= i % 10 && i % 10 <= 9) || v === 0 && (12 <= i % 100 && i % 100 <= 14) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    return 0 <= i && i <= 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return v === 0 && i % 10 === 1 && i % 100 !== 11 ? one\n      : v === 0 && (2 <= i % 10 && i % 10 <= 4) && (i % 100 < 12 || 14 < i % 100) ? few\n      : v === 0 && i % 10 === 0 || v === 0 && (5 <= i % 10 && i % 10 <= 9) || v === 0 && (11 <= i % 100 && i % 100 <= 14) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var n = +s;\n    return i === 0 || n === 1 ? one\n      : 2 <= n && n <= 10 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var f = +(s + '.').split('.')[1];\n    var n = +s;\n    return (n === 0 || n === 1) || i === 0 && f === 1 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    var v = (s + '.').split('.')[1].length;\n    return v === 0 && i % 100 === 1 ? one\n      : v === 0 && i % 100 === 2 ? two\n      : v === 0 && (3 <= i % 100 && i % 100 <= 4) || v !== 0 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return (0 <= n && n <= 1) || (11 <= n && n <= 99) ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 || n === 5 || n === 7 || n === 8 || n === 9 || n === 10 ? one\n      : n === 2 || n === 3 ? two\n      : n === 4 ? few\n      : n === 6 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    return (i % 10 === 1 || i % 10 === 2 || i % 10 === 5 || i % 10 === 7 || i % 10 === 8) || (i % 100 === 20 || i % 100 === 50 || i % 100 === 70 || i % 100 === 80) ? one\n      : (i % 10 === 3 || i % 10 === 4) || (i % 1000 === 100 || i % 1000 === 200 || i % 1000 === 300 || i % 1000 === 400 || i % 1000 === 500 || i % 1000 === 600 || i % 1000 === 700 || i % 1000 === 800 || i % 1000 === 900) ? few\n      : i === 0 || i % 10 === 6 || (i % 100 === 40 || i % 100 === 60 || i % 100 === 90) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return (n % 10 === 2 || n % 10 === 3) && (n % 100 !== 12 && n % 100 !== 13) ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 || n === 3 ? one\n      : n === 2 ? two\n      : n === 4 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 0 || n === 7 || n === 8 || n === 9 ? zero\n      : n === 1 ? one\n      : n === 2 ? two\n      : n === 3 || n === 4 ? few\n      : n === 5 || n === 6 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n % 10 === 1 && n % 100 !== 11 ? one\n      : n % 10 === 2 && n % 100 !== 12 ? two\n      : n % 10 === 3 && n % 100 !== 13 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n === 2 || n === 3 ? two\n      : n === 4 ? few\n      : n === 6 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 || n === 5 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 11 || n === 8 || n === 80 || n === 800 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    return i === 1 ? one\n      : i === 0 || ((2 <= i % 100 && i % 100 <= 20) || i % 100 === 40 || i % 100 === 60 || i % 100 === 80) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n % 10 === 6 || n % 10 === 9 || n % 10 === 0 && n !== 0 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var i = Math.floor(Math.abs(+s));\n    return i % 10 === 1 && i % 100 !== 11 ? one\n      : i % 10 === 2 && i % 100 !== 12 ? two\n      : (i % 10 === 7 || i % 10 === 8) && (i % 100 !== 17 && i % 100 !== 18) ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n === 2 || n === 3 ? two\n      : n === 4 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return 1 <= n && n <= 4 ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return (n === 1 || n === 5 || (7 <= n && n <= 9)) ? one\n      : n === 2 || n === 3 ? two\n      : n === 4 ? few\n      : n === 6 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n === 1 ? one\n      : n % 10 === 4 && n % 100 !== 14 ? many\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return (n % 10 === 1 || n % 10 === 2) && (n % 100 !== 11 && n % 100 !== 12) ? one\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return (n % 10 === 6 || n % 10 === 9) || n === 10 ? few\n      : other\n  },\n  function (s/*: string | number */)/*: Rule */ {\n    var n = +s;\n    return n % 10 === 3 && n % 100 !== 13 ? few\n      : other\n  }\n];\n\nvar plurals = {\n  af: { cardinal: f[0] },\n  ak: { cardinal: f[1] },\n  am: { cardinal: f[2] },\n  ar: { cardinal: f[3] },\n  ars: { cardinal: f[3] },\n  as: { cardinal: f[2], ordinal: f[34] },\n  asa: { cardinal: f[0] },\n  ast: { cardinal: f[4] },\n  az: { cardinal: f[0], ordinal: f[35] },\n  be: { cardinal: f[5], ordinal: f[36] },\n  bem: { cardinal: f[0] },\n  bez: { cardinal: f[0] },\n  bg: { cardinal: f[0] },\n  bh: { cardinal: f[1] },\n  bn: { cardinal: f[2], ordinal: f[34] },\n  br: { cardinal: f[6] },\n  brx: { cardinal: f[0] },\n  bs: { cardinal: f[7] },\n  ca: { cardinal: f[4], ordinal: f[37] },\n  ce: { cardinal: f[0] },\n  cgg: { cardinal: f[0] },\n  chr: { cardinal: f[0] },\n  ckb: { cardinal: f[0] },\n  cs: { cardinal: f[8] },\n  cy: { cardinal: f[9], ordinal: f[38] },\n  da: { cardinal: f[10] },\n  de: { cardinal: f[4] },\n  dsb: { cardinal: f[11] },\n  dv: { cardinal: f[0] },\n  ee: { cardinal: f[0] },\n  el: { cardinal: f[0] },\n  en: { cardinal: f[4], ordinal: f[39] },\n  eo: { cardinal: f[0] },\n  es: { cardinal: f[0] },\n  et: { cardinal: f[4] },\n  eu: { cardinal: f[0] },\n  fa: { cardinal: f[2] },\n  ff: { cardinal: f[12] },\n  fi: { cardinal: f[4] },\n  fil: { cardinal: f[13], ordinal: f[0] },\n  fo: { cardinal: f[0] },\n  fr: { cardinal: f[12], ordinal: f[0] },\n  fur: { cardinal: f[0] },\n  fy: { cardinal: f[4] },\n  ga: { cardinal: f[14], ordinal: f[0] },\n  gd: { cardinal: f[15] },\n  gl: { cardinal: f[4] },\n  gsw: { cardinal: f[0] },\n  gu: { cardinal: f[2], ordinal: f[40] },\n  guw: { cardinal: f[1] },\n  gv: { cardinal: f[16] },\n  ha: { cardinal: f[0] },\n  haw: { cardinal: f[0] },\n  he: { cardinal: f[17] },\n  hi: { cardinal: f[2], ordinal: f[40] },\n  hr: { cardinal: f[7] },\n  hsb: { cardinal: f[11] },\n  hu: { cardinal: f[0], ordinal: f[41] },\n  hy: { cardinal: f[12], ordinal: f[0] },\n  io: { cardinal: f[4] },\n  is: { cardinal: f[18] },\n  it: { cardinal: f[4], ordinal: f[42] },\n  iu: { cardinal: f[19] },\n  iw: { cardinal: f[17] },\n  jgo: { cardinal: f[0] },\n  ji: { cardinal: f[4] },\n  jmc: { cardinal: f[0] },\n  ka: { cardinal: f[0], ordinal: f[43] },\n  kab: { cardinal: f[12] },\n  kaj: { cardinal: f[0] },\n  kcg: { cardinal: f[0] },\n  kk: { cardinal: f[0], ordinal: f[44] },\n  kkj: { cardinal: f[0] },\n  kl: { cardinal: f[0] },\n  kn: { cardinal: f[2] },\n  ks: { cardinal: f[0] },\n  ksb: { cardinal: f[0] },\n  ksh: { cardinal: f[20] },\n  ku: { cardinal: f[0] },\n  kw: { cardinal: f[19] },\n  ky: { cardinal: f[0] },\n  lag: { cardinal: f[21] },\n  lb: { cardinal: f[0] },\n  lg: { cardinal: f[0] },\n  ln: { cardinal: f[1] },\n  lt: { cardinal: f[22] },\n  lv: { cardinal: f[23] },\n  mas: { cardinal: f[0] },\n  mg: { cardinal: f[1] },\n  mgo: { cardinal: f[0] },\n  mk: { cardinal: f[24], ordinal: f[45] },\n  ml: { cardinal: f[0] },\n  mn: { cardinal: f[0] },\n  mo: { cardinal: f[25], ordinal: f[0] },\n  mr: { cardinal: f[2], ordinal: f[46] },\n  mt: { cardinal: f[26] },\n  nah: { cardinal: f[0] },\n  naq: { cardinal: f[19] },\n  nb: { cardinal: f[0] },\n  nd: { cardinal: f[0] },\n  ne: { cardinal: f[0], ordinal: f[47] },\n  nl: { cardinal: f[4] },\n  nn: { cardinal: f[0] },\n  nnh: { cardinal: f[0] },\n  no: { cardinal: f[0] },\n  nr: { cardinal: f[0] },\n  nso: { cardinal: f[1] },\n  ny: { cardinal: f[0] },\n  nyn: { cardinal: f[0] },\n  om: { cardinal: f[0] },\n  or: { cardinal: f[0], ordinal: f[48] },\n  os: { cardinal: f[0] },\n  pa: { cardinal: f[1] },\n  pap: { cardinal: f[0] },\n  pl: { cardinal: f[27] },\n  prg: { cardinal: f[23] },\n  ps: { cardinal: f[0] },\n  pt: { cardinal: f[28] },\n  'pt-PT': { cardinal: f[4] },\n  rm: { cardinal: f[0] },\n  ro: { cardinal: f[25], ordinal: f[0] },\n  rof: { cardinal: f[0] },\n  ru: { cardinal: f[29] },\n  rwk: { cardinal: f[0] },\n  saq: { cardinal: f[0] },\n  scn: { cardinal: f[4], ordinal: f[42] },\n  sd: { cardinal: f[0] },\n  sdh: { cardinal: f[0] },\n  se: { cardinal: f[19] },\n  seh: { cardinal: f[0] },\n  sh: { cardinal: f[7] },\n  shi: { cardinal: f[30] },\n  si: { cardinal: f[31] },\n  sk: { cardinal: f[8] },\n  sl: { cardinal: f[32] },\n  sma: { cardinal: f[19] },\n  smi: { cardinal: f[19] },\n  smj: { cardinal: f[19] },\n  smn: { cardinal: f[19] },\n  sms: { cardinal: f[19] },\n  sn: { cardinal: f[0] },\n  so: { cardinal: f[0] },\n  sq: { cardinal: f[0], ordinal: f[49] },\n  sr: { cardinal: f[7] },\n  ss: { cardinal: f[0] },\n  ssy: { cardinal: f[0] },\n  st: { cardinal: f[0] },\n  sv: { cardinal: f[4], ordinal: f[50] },\n  sw: { cardinal: f[4] },\n  syr: { cardinal: f[0] },\n  ta: { cardinal: f[0] },\n  te: { cardinal: f[0] },\n  teo: { cardinal: f[0] },\n  ti: { cardinal: f[1] },\n  tig: { cardinal: f[0] },\n  tk: { cardinal: f[0], ordinal: f[51] },\n  tl: { cardinal: f[13], ordinal: f[0] },\n  tn: { cardinal: f[0] },\n  tr: { cardinal: f[0] },\n  ts: { cardinal: f[0] },\n  tzm: { cardinal: f[33] },\n  ug: { cardinal: f[0] },\n  uk: { cardinal: f[29], ordinal: f[52] },\n  ur: { cardinal: f[4] },\n  uz: { cardinal: f[0] },\n  ve: { cardinal: f[0] },\n  vo: { cardinal: f[0] },\n  vun: { cardinal: f[0] },\n  wa: { cardinal: f[1] },\n  wae: { cardinal: f[0] },\n  xh: { cardinal: f[0] },\n  xog: { cardinal: f[0] },\n  yi: { cardinal: f[4] },\n  zu: { cardinal: f[2] },\n  lo: { ordinal: f[0] },\n  ms: { ordinal: f[0] },\n  vi: { ordinal: f[0] }\n};\n\nvar formatMessageInterpret = createCommonjsModule(function (module, exports) {\n\n\n\n\n/*::\nimport type {\n  AST,\n  SubMessages\n} from '../format-message-parse'\ntype Locale = string\ntype Locales = Locale | Locale[]\ntype Placeholder = any[] // https://github.com/facebook/flow/issues/4050\nexport type Type = (Placeholder, Locales) => (any, ?Object) => any\nexport type Types = { [string]: Type }\n*/\n\nexports = module.exports = function interpret (\n  ast/*: AST */,\n  locale/*:: ?: Locales */,\n  types/*:: ?: Types */\n)/*: (args?: Object) => string */ {\n  return interpretAST(ast, null, locale || 'en', types || {}, true)\n};\n\nexports.toParts = function toParts (\n  ast/*: AST */,\n  locale/*:: ?: Locales */,\n  types/*:: ?: Types */\n)/*: (args?: Object) => any[] */ {\n  return interpretAST(ast, null, locale || 'en', types || {}, false)\n};\n\nfunction interpretAST (\n  elements/*: any[] */,\n  parent/*: ?Placeholder */,\n  locale/*: Locales */,\n  types/*: Types */,\n  join/*: boolean */\n)/*: Function */ {\n  var parts = elements.map(function (element) {\n    return interpretElement(element, parent, locale, types, join)\n  });\n\n  if (!join) {\n    return function format (args) {\n      return parts.reduce(function (parts, part) {\n        return parts.concat(part(args))\n      }, [])\n    }\n  }\n\n  if (parts.length === 1) return parts[0]\n  return function format (args) {\n    var message = '';\n    for (var e = 0; e < parts.length; ++e) {\n      message += parts[e](args);\n    }\n    return message\n  }\n}\n\nfunction interpretElement (\n  element/*: Placeholder */,\n  parent/*: ?Placeholder */,\n  locale/*: Locales */,\n  types/*: Types */,\n  join/*: boolean */\n)/*: Function */ {\n  if (typeof element === 'string') {\n    var value/*: string */ = element;\n    return function format () { return value }\n  }\n\n  var id = element[0];\n  var type = element[1];\n\n  if (parent && element[0] === '#') {\n    id = parent[0];\n    var offset = parent[2];\n    var formatter = (types.number || defaults.number)([ id, 'number' ], locale);\n    return function format (args) {\n      return formatter(getArg(id, args) - offset, args)\n    }\n  }\n\n  // pre-process children\n  var children;\n  if (type === 'plural' || type === 'selectordinal') {\n    children = {};\n    Object.keys(element[3]).forEach(function (key) {\n      children[key] = interpretAST(element[3][key], element, locale, types, join);\n    });\n    element = [ element[0], element[1], element[2], children ];\n  } else if (element[2] && typeof element[2] === 'object') {\n    children = {};\n    Object.keys(element[2]).forEach(function (key) {\n      children[key] = interpretAST(element[2][key], element, locale, types, join);\n    });\n    element = [ element[0], element[1], children ];\n  }\n\n  var getFrmt = type && (types[type] || defaults[type]);\n  if (getFrmt) {\n    var frmt = getFrmt(element, locale);\n    return function format (args) {\n      return frmt(getArg(id, args), args)\n    }\n  }\n\n  return join\n    ? function format (args) { return String(getArg(id, args)) }\n    : function format (args) { return getArg(id, args) }\n}\n\nfunction getArg (id/*: string */, args/*: ?Object */)/*: any */ {\n  if (args && (id in args)) return args[id]\n  var parts = id.split('.');\n  var a = args;\n  for (var i = 0, ii = parts.length; a && i < ii; ++i) {\n    a = a[parts[i]];\n  }\n  return a\n}\n\nfunction interpretNumber (element/*: Placeholder */, locales/*: Locales */) {\n  var style = element[2];\n  var options = formatMessageFormats.number[style] || formatMessageFormats.parseNumberPattern(style) || formatMessageFormats.number.default;\n  return new Intl.NumberFormat(locales, options).format\n}\n\nfunction interpretDuration (element/*: Placeholder */, locales/*: Locales */) {\n  var style = element[2];\n  var options = formatMessageFormats.duration[style] || formatMessageFormats.duration.default;\n  var fs = new Intl.NumberFormat(locales, options.seconds).format;\n  var fm = new Intl.NumberFormat(locales, options.minutes).format;\n  var fh = new Intl.NumberFormat(locales, options.hours).format;\n  var sep = /^fi$|^fi-|^da/.test(String(locales)) ? '.' : ':';\n\n  return function (s, args) {\n    s = +s;\n    if (!isFinite(s)) return fs(s)\n    var h = ~~(s / 60 / 60); // ~~ acts much like Math.trunc\n    var m = ~~(s / 60 % 60);\n    var dur = (h ? (fh(Math.abs(h)) + sep) : '') +\n      fm(Math.abs(m)) + sep + fs(Math.abs(s % 60));\n    return s < 0 ? fh(-1).replace(fh(1), dur) : dur\n  }\n}\n\nfunction interpretDateTime (element/*: Placeholder */, locales/*: Locales */) {\n  var type = element[1];\n  var style = element[2];\n  var options = formatMessageFormats[type][style] || formatMessageFormats.parseDatePattern(style) || formatMessageFormats[type].default;\n  return new Intl.DateTimeFormat(locales, options).format\n}\n\nfunction interpretPlural (element/*: Placeholder */, locales/*: Locales */) {\n  var type = element[1];\n  var pluralType = type === 'selectordinal' ? 'ordinal' : 'cardinal';\n  var offset = element[2];\n  var children = element[3];\n  var pluralRules;\n  if (Intl.PluralRules && Intl.PluralRules.supportedLocalesOf(locales).length > 0) {\n    pluralRules = new Intl.PluralRules(locales, { type: pluralType });\n  } else {\n    var locale = lookupClosestLocale(locales, plurals);\n    var select = (locale && plurals[locale][pluralType]) || returnOther;\n    pluralRules = { select: select };\n  }\n\n  return function (value, args) {\n    var clause =\n      children['=' + +value] ||\n      children[pluralRules.select(value - offset)] ||\n      children.other;\n    return clause(args)\n  }\n}\n\nfunction returnOther (/*:: n:number */) { return 'other' }\n\nfunction interpretSelect (element/*: Placeholder */, locales/*: Locales */) {\n  var children = element[2];\n  return function (value, args) {\n    var clause = children[value] || children.other;\n    return clause(args)\n  }\n}\n\nvar defaults/*: Types */ = {\n  number: interpretNumber,\n  ordinal: interpretNumber, // TODO: support rbnf\n  spellout: interpretNumber, // TODO: support rbnf\n  duration: interpretDuration,\n  date: interpretDateTime,\n  time: interpretDateTime,\n  plural: interpretPlural,\n  selectordinal: interpretPlural,\n  select: interpretSelect\n};\nexports.types = defaults;\n});\nvar formatMessageInterpret_1 = formatMessageInterpret.toParts;\nvar formatMessageInterpret_2 = formatMessageInterpret.types;\n\nvar formatMessageParse = createCommonjsModule(function (module, exports) {\n\n/*::\nexport type AST = Element[]\nexport type Element = string | Placeholder\nexport type Placeholder = Plural | Styled | Typed | Simple\nexport type Plural = [ string, 'plural' | 'selectordinal', number, SubMessages ]\nexport type Styled = [ string, string, string | SubMessages ]\nexport type Typed = [ string, string ]\nexport type Simple = [ string ]\nexport type SubMessages = { [string]: AST }\nexport type Token = [ TokenType, string ]\nexport type TokenType = 'text' | 'space' | 'id' | 'type' | 'style' | 'offset' | 'number' | 'selector' | 'syntax'\ntype Context = {|\n  pattern: string,\n  index: number,\n  tagsType: ?string,\n  tokens: ?Token[]\n|}\n*/\n\nvar ARG_OPN = '{';\nvar ARG_CLS = '}';\nvar ARG_SEP = ',';\nvar NUM_ARG = '#';\nvar TAG_OPN = '<';\nvar TAG_CLS = '>';\nvar TAG_END = '</';\nvar TAG_SELF_CLS = '/>';\nvar ESC = '\\'';\nvar OFFSET = 'offset:';\nvar simpleTypes = [\n  'number',\n  'date',\n  'time',\n  'ordinal',\n  'duration',\n  'spellout'\n];\nvar submTypes = [\n  'plural',\n  'select',\n  'selectordinal'\n];\n\n/**\n * parse\n *\n * Turns this:\n *  `You have { numBananas, plural,\n *       =0 {no bananas}\n *      one {a banana}\n *    other {# bananas}\n *  } for sale`\n *\n * into this:\n *  [ \"You have \", [ \"numBananas\", \"plural\", 0, {\n *       \"=0\": [ \"no bananas\" ],\n *      \"one\": [ \"a banana\" ],\n *    \"other\": [ [ '#' ], \" bananas\" ]\n *  } ], \" for sale.\" ]\n *\n * tokens:\n *  [\n *    [ \"text\", \"You have \" ],\n *    [ \"syntax\", \"{\" ],\n *    [ \"space\", \" \" ],\n *    [ \"id\", \"numBananas\" ],\n *    [ \"syntax\", \", \" ],\n *    [ \"space\", \" \" ],\n *    [ \"type\", \"plural\" ],\n *    [ \"syntax\", \",\" ],\n *    [ \"space\", \"\\n     \" ],\n *    [ \"selector\", \"=0\" ],\n *    [ \"space\", \" \" ],\n *    [ \"syntax\", \"{\" ],\n *    [ \"text\", \"no bananas\" ],\n *    [ \"syntax\", \"}\" ],\n *    [ \"space\", \"\\n    \" ],\n *    [ \"selector\", \"one\" ],\n *    [ \"space\", \" \" ],\n *    [ \"syntax\", \"{\" ],\n *    [ \"text\", \"a banana\" ],\n *    [ \"syntax\", \"}\" ],\n *    [ \"space\", \"\\n  \" ],\n *    [ \"selector\", \"other\" ],\n *    [ \"space\", \" \" ],\n *    [ \"syntax\", \"{\" ],\n *    [ \"syntax\", \"#\" ],\n *    [ \"text\", \" bananas\" ],\n *    [ \"syntax\", \"}\" ],\n *    [ \"space\", \"\\n\" ],\n *    [ \"syntax\", \"}\" ],\n *    [ \"text\", \" for sale.\" ]\n *  ]\n **/\nexports = module.exports = function parse (\n  pattern/*: string */,\n  options/*:: ?: { tagsType?: string, tokens?: Token[] } */\n)/*: AST */ {\n  return parseAST({\n    pattern: String(pattern),\n    index: 0,\n    tagsType: (options && options.tagsType) || null,\n    tokens: (options && options.tokens) || null\n  }, '')\n};\n\nfunction parseAST (current/*: Context */, parentType/*: string */)/*: AST */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var elements/*: AST */ = [];\n  var start = current.index;\n  var text = parseText(current, parentType);\n  if (text) elements.push(text);\n  if (text && current.tokens) current.tokens.push([ 'text', pattern.slice(start, current.index) ]);\n  while (current.index < length) {\n    if (pattern[current.index] === ARG_CLS) {\n      if (!parentType) throw expected(current)\n      break\n    }\n    if (parentType && current.tagsType && pattern.slice(current.index, current.index + TAG_END.length) === TAG_END) break\n    elements.push(parsePlaceholder(current));\n    start = current.index;\n    text = parseText(current, parentType);\n    if (text) elements.push(text);\n    if (text && current.tokens) current.tokens.push([ 'text', pattern.slice(start, current.index) ]);\n  }\n  return elements\n}\n\nfunction parseText (current/*: Context */, parentType/*: string */)/*: string */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var isHashSpecial = (parentType === 'plural' || parentType === 'selectordinal');\n  var isAngleSpecial = !!current.tagsType;\n  var isArgStyle = (parentType === '{style}');\n  var text = '';\n  while (current.index < length) {\n    var char = pattern[current.index];\n    if (\n      char === ARG_OPN || char === ARG_CLS ||\n      (isHashSpecial && char === NUM_ARG) ||\n      (isAngleSpecial && char === TAG_OPN) ||\n      (isArgStyle && isWhitespace(char.charCodeAt(0)))\n    ) {\n      break\n    } else if (char === ESC) {\n      char = pattern[++current.index];\n      if (char === ESC) { // double is always 1 '\n        text += char;\n        ++current.index;\n      } else if (\n        // only when necessary\n        char === ARG_OPN || char === ARG_CLS ||\n        (isHashSpecial && char === NUM_ARG) ||\n        (isAngleSpecial && char === TAG_OPN) ||\n        isArgStyle\n      ) {\n        text += char;\n        while (++current.index < length) {\n          char = pattern[current.index];\n          if (char === ESC && pattern[current.index + 1] === ESC) { // double is always 1 '\n            text += ESC;\n            ++current.index;\n          } else if (char === ESC) { // end of quoted\n            ++current.index;\n            break\n          } else {\n            text += char;\n          }\n        }\n      } else { // lone ' is just a '\n        text += ESC;\n        // already incremented\n      }\n    } else {\n      text += char;\n      ++current.index;\n    }\n  }\n  return text\n}\n\nfunction isWhitespace (code/*: number */)/*: boolean */ {\n  return (\n    (code >= 0x09 && code <= 0x0D) ||\n    code === 0x20 || code === 0x85 || code === 0xA0 || code === 0x180E ||\n    (code >= 0x2000 && code <= 0x200D) ||\n    code === 0x2028 || code === 0x2029 || code === 0x202F || code === 0x205F ||\n    code === 0x2060 || code === 0x3000 || code === 0xFEFF\n  )\n}\n\nfunction skipWhitespace (current/*: Context */)/*: void */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var start = current.index;\n  while (current.index < length && isWhitespace(pattern.charCodeAt(current.index))) {\n    ++current.index;\n  }\n  if (start < current.index && current.tokens) {\n    current.tokens.push([ 'space', current.pattern.slice(start, current.index) ]);\n  }\n}\n\nfunction parsePlaceholder (current/*: Context */)/*: Placeholder */ {\n  var pattern = current.pattern;\n  if (pattern[current.index] === NUM_ARG) {\n    if (current.tokens) current.tokens.push([ 'syntax', NUM_ARG ]);\n    ++current.index; // move passed #\n    return [ NUM_ARG ]\n  }\n\n  var tag = parseTag(current);\n  if (tag) return tag\n\n  /* istanbul ignore if should be unreachable if parseAST and parseText are right */\n  if (pattern[current.index] !== ARG_OPN) throw expected(current, ARG_OPN)\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_OPN ]);\n  ++current.index; // move passed {\n  skipWhitespace(current);\n\n  var id = parseId(current);\n  if (!id) throw expected(current, 'placeholder id')\n  if (current.tokens) current.tokens.push([ 'id', id ]);\n  skipWhitespace(current);\n\n  var char = pattern[current.index];\n  if (char === ARG_CLS) { // end placeholder\n    if (current.tokens) current.tokens.push([ 'syntax', ARG_CLS ]);\n    ++current.index; // move passed }\n    return [ id ]\n  }\n\n  if (char !== ARG_SEP) throw expected(current, ARG_SEP + ' or ' + ARG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_SEP ]);\n  ++current.index; // move passed ,\n  skipWhitespace(current);\n\n  var type = parseId(current);\n  if (!type) throw expected(current, 'placeholder type')\n  if (current.tokens) current.tokens.push([ 'type', type ]);\n  skipWhitespace(current);\n  char = pattern[current.index];\n  if (char === ARG_CLS) { // end placeholder\n    if (current.tokens) current.tokens.push([ 'syntax', ARG_CLS ]);\n    if (type === 'plural' || type === 'selectordinal' || type === 'select') {\n      throw expected(current, type + ' sub-messages')\n    }\n    ++current.index; // move passed }\n    return [ id, type ]\n  }\n\n  if (char !== ARG_SEP) throw expected(current, ARG_SEP + ' or ' + ARG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_SEP ]);\n  ++current.index; // move passed ,\n  skipWhitespace(current);\n\n  var arg;\n  if (type === 'plural' || type === 'selectordinal') {\n    var offset = parsePluralOffset(current);\n    skipWhitespace(current);\n    arg = [ id, type, offset, parseSubMessages(current, type) ];\n  } else if (type === 'select') {\n    arg = [ id, type, parseSubMessages(current, type) ];\n  } else if (simpleTypes.indexOf(type) >= 0) {\n    arg = [ id, type, parseSimpleFormat(current) ];\n  } else { // custom placeholder type\n    var index = current.index;\n    var format/*: string | SubMessages */ = parseSimpleFormat(current);\n    skipWhitespace(current);\n    if (pattern[current.index] === ARG_OPN) {\n      current.index = index; // rewind, since should have been submessages\n      format = parseSubMessages(current, type);\n    }\n    arg = [ id, type, format ];\n  }\n\n  skipWhitespace(current);\n  if (pattern[current.index] !== ARG_CLS) throw expected(current, ARG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_CLS ]);\n  ++current.index; // move passed }\n  return arg\n}\n\nfunction parseTag (current/*: Context */)/*: ?Placeholder */ {\n  var tagsType = current.tagsType;\n  if (!tagsType || current.pattern[current.index] !== TAG_OPN) return\n\n  if (current.pattern.slice(current.index, current.index + TAG_END.length) === TAG_END) {\n    throw expected(current, null, 'closing tag without matching opening tag')\n  }\n  if (current.tokens) current.tokens.push([ 'syntax', TAG_OPN ]);\n  ++current.index; // move passed <\n\n  var id = parseId(current, true);\n  if (!id) throw expected(current, 'placeholder id')\n  if (current.tokens) current.tokens.push([ 'id', id ]);\n  skipWhitespace(current);\n\n  if (current.pattern.slice(current.index, current.index + TAG_SELF_CLS.length) === TAG_SELF_CLS) {\n    if (current.tokens) current.tokens.push([ 'syntax', TAG_SELF_CLS ]);\n    current.index += TAG_SELF_CLS.length;\n    return [ id, tagsType ]\n  }\n  if (current.pattern[current.index] !== TAG_CLS) throw expected(current, TAG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', TAG_CLS ]);\n  ++current.index; // move passed >\n\n  var children = parseAST(current, tagsType);\n\n  var end = current.index;\n  if (current.pattern.slice(current.index, current.index + TAG_END.length) !== TAG_END) throw expected(current, TAG_END + id + TAG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', TAG_END ]);\n  current.index += TAG_END.length;\n  var closeId = parseId(current, true);\n  if (closeId && current.tokens) current.tokens.push([ 'id', closeId ]);\n  if (id !== closeId) {\n    current.index = end; // rewind for better error message\n    throw expected(current, TAG_END + id + TAG_CLS, TAG_END + closeId + TAG_CLS)\n  }\n  skipWhitespace(current);\n  if (current.pattern[current.index] !== TAG_CLS) throw expected(current, TAG_CLS)\n  if (current.tokens) current.tokens.push([ 'syntax', TAG_CLS ]);\n  ++current.index; // move passed >\n\n  return [ id, tagsType, { children: children } ]\n}\n\nfunction parseId (current/*: Context */, isTag/*:: ?: boolean */)/*: string */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var id = '';\n  while (current.index < length) {\n    var char = pattern[current.index];\n    if (\n      char === ARG_OPN || char === ARG_CLS || char === ARG_SEP ||\n      char === NUM_ARG || char === ESC || isWhitespace(char.charCodeAt(0)) ||\n      (isTag && (char === TAG_OPN || char === TAG_CLS || char === '/'))\n    ) break\n    id += char;\n    ++current.index;\n  }\n  return id\n}\n\nfunction parseSimpleFormat (current/*: Context */)/*: string */ {\n  var start = current.index;\n  var style = parseText(current, '{style}');\n  if (!style) throw expected(current, 'placeholder style name')\n  if (current.tokens) current.tokens.push([ 'style', current.pattern.slice(start, current.index) ]);\n  return style\n}\n\nfunction parsePluralOffset (current/*: Context */)/*: number */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var offset = 0;\n  if (pattern.slice(current.index, current.index + OFFSET.length) === OFFSET) {\n    if (current.tokens) current.tokens.push([ 'offset', 'offset' ], [ 'syntax', ':' ]);\n    current.index += OFFSET.length; // move passed offset:\n    skipWhitespace(current);\n    var start = current.index;\n    while (current.index < length && isDigit(pattern.charCodeAt(current.index))) {\n      ++current.index;\n    }\n    if (start === current.index) throw expected(current, 'offset number')\n    if (current.tokens) current.tokens.push([ 'number', pattern.slice(start, current.index) ]);\n    offset = +pattern.slice(start, current.index);\n  }\n  return offset\n}\n\nfunction isDigit (code/*: number */)/*: boolean */ {\n  return (code >= 0x30 && code <= 0x39)\n}\n\nfunction parseSubMessages (current/*: Context */, parentType/*: string */)/*: SubMessages */ {\n  var pattern = current.pattern;\n  var length = pattern.length;\n  var options/*: SubMessages */ = {};\n  while (current.index < length && pattern[current.index] !== ARG_CLS) {\n    var selector = parseId(current);\n    if (!selector) throw expected(current, 'sub-message selector')\n    if (current.tokens) current.tokens.push([ 'selector', selector ]);\n    skipWhitespace(current);\n    options[selector] = parseSubMessage(current, parentType);\n    skipWhitespace(current);\n  }\n  if (!options.other && submTypes.indexOf(parentType) >= 0) {\n    throw expected(current, null, null, '\"other\" sub-message must be specified in ' + parentType)\n  }\n  return options\n}\n\nfunction parseSubMessage (current/*: Context */, parentType/*: string */)/*: AST */ {\n  if (current.pattern[current.index] !== ARG_OPN) throw expected(current, ARG_OPN + ' to start sub-message')\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_OPN ]);\n  ++current.index; // move passed {\n  var message = parseAST(current, parentType);\n  if (current.pattern[current.index] !== ARG_CLS) throw expected(current, ARG_CLS + ' to end sub-message')\n  if (current.tokens) current.tokens.push([ 'syntax', ARG_CLS ]);\n  ++current.index; // move passed }\n  return message\n}\n\nfunction expected (current/*: Context */, expected/*:: ?: ?string */, found/*:: ?: ?string */, message/*:: ?: string */) {\n  var pattern = current.pattern;\n  var lines = pattern.slice(0, current.index).split(/\\r?\\n/);\n  var offset = current.index;\n  var line = lines.length;\n  var column = lines.slice(-1)[0].length;\n  found = found || (\n    (current.index >= pattern.length) ? 'end of message pattern'\n      : (parseId(current) || pattern[current.index])\n  );\n  if (!message) message = errorMessage(expected, found);\n  message += ' in ' + pattern.replace(/\\r?\\n/g, '\\n');\n  return new SyntaxError(message, expected, found, offset, line, column)\n}\n\nfunction errorMessage (expected/*: ?string */, found/* string */) {\n  if (!expected) return 'Unexpected ' + found + ' found'\n  return 'Expected ' + expected + ' but found ' + found\n}\n\n/**\n * SyntaxError\n *  Holds information about bad syntax found in a message pattern\n **/\nfunction SyntaxError (message/*: string */, expected/*: ?string */, found/*: ?string */, offset/*: number */, line/*: number */, column/*: number */) {\n  Error.call(this, message);\n  this.name = 'SyntaxError';\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.offset = offset;\n  this.line = line;\n  this.column = column;\n}\nSyntaxError.prototype = Object.create(Error.prototype);\nexports.SyntaxError = SyntaxError;\n});\nvar formatMessageParse_1 = formatMessageParse.SyntaxError;\n\nvar supportedExp = new RegExp(\n  '^(' + Object.keys(plurals).join('|') + ')\\\\b'\n);\n\n/*::\nimport type { Types } from 'format-message-interpret'\nimport type { AST } from 'format-message-parse'\ntype Options = {\n  types: Types\n}\ntype Internals = {\n  ast: AST,\n  format: (args?: Object) => string,\n  locale: string,\n  locales?: string | string[],\n  toParts?: (args?: Object) => any[],\n  options?: Options\n}\n*/\n\nvar internals/*: WeakMap<MessageFormat, Internals> */ = new WeakMap();\n\n/*!\n * Intl.MessageFormat prollyfill\n * Copyright(c) 2015 Andy VanWagoner\n * MIT licensed\n **/\nfunction MessageFormat (\n  pattern/*: string */,\n  locales/*:: ?: string | string[] */,\n  options/*:: ?: Options */\n) {\n  if (!(this instanceof MessageFormat) || internals.has(this)) {\n    throw new TypeError('calling MessageFormat constructor without new is invalid')\n  }\n  var ast = formatMessageParse(pattern);\n  internals.set(this, {\n    ast: ast,\n    format: formatMessageInterpret(ast, locales, options && options.types),\n    locale: MessageFormat.supportedLocalesOf(locales)[0] || 'en',\n    locales: locales,\n    options: options\n  });\n}\nvar messageFormat = MessageFormat;\n\n// $FlowFixMe It thinks `value` needs to be defined for format\nObject.defineProperties(MessageFormat.prototype, {\n  format: {\n    configurable: true,\n    get: function format () {\n      var values = internals.get(this);\n      if (!values) throw new TypeError('MessageFormat.prototype.format called on value that\\'s not an object initialized as a MessageFormat')\n      return values.format\n    }\n  },\n  formatToParts: {\n    configurable: true,\n    writable: true,\n    value: function formatToParts (args/*:: ?: Object */) {\n      var values = internals.get(this);\n      if (!values) throw new TypeError('MessageFormat.prototype.formatToParts called on value that\\'s not an object initialized as a MessageFormat')\n      var frmt = values.toParts || (values.toParts = formatMessageInterpret.toParts(\n        values.ast,\n        values.locales,\n        values.options && values.options.types\n      ));\n      return frmt(args)\n    }\n  },\n  resolvedOptions: {\n    configurable: true,\n    writable: true,\n    value: function resolvedOptions () {\n      var values = internals.get(this);\n      if (!values) throw new TypeError('MessageFormat.prototype.resolvedOptions called on value that\\'s not an object initialized as a MessageFormat')\n      return {\n        locale: values.locale\n      }\n    }\n  }\n});\n\n/* istanbul ignore else */\nif (typeof Symbol !== 'undefined') {\n  Object.defineProperty(MessageFormat.prototype, Symbol.toStringTag, { value: 'Object' });\n}\n\nObject.defineProperties(MessageFormat, {\n  supportedLocalesOf: {\n    configurable: true,\n    writable: true,\n    value: function supportedLocalesOf (requestedLocales/*:: ?: string | string[] */) {\n      return [].concat(\n        Intl.NumberFormat.supportedLocalesOf(requestedLocales),\n        Intl.DateTimeFormat.supportedLocalesOf(requestedLocales),\n        Intl.PluralRules ? Intl.PluralRules.supportedLocalesOf(requestedLocales) : [],\n        [].concat(requestedLocales || []).filter(function (locale) {\n          return supportedExp.test(locale)\n        })\n      ).filter(function (v, i, a) { return a.indexOf(v) === i })\n    }\n  }\n});\n\nexport default messageFormat;\n","/**\n * @param {Object.<string, Object>} obj\n * @returns {boolean}\n */\nexport default function isLocalizeESModule(obj) {\n  return !!(obj && obj.default && typeof obj.default === 'object' && Object.keys(obj).length === 1);\n}\n","// @ts-expect-error no types for this package\nimport MessageFormat from '@bundled-es-modules/message-format/MessageFormat.js';\nimport isLocalizeESModule from './isLocalizeESModule.js';\n\n/**\n * @typedef {import('../types/LocalizeMixinTypes').NamespaceObject} NamespaceObject\n */\n\n/** @typedef {import('../types/LocalizeMixinTypes').DatePostProcessor} DatePostProcessor */\n/** @typedef {import('../types/LocalizeMixinTypes').NumberPostProcessor} NumberPostProcessor */\n\n/**\n * `LocalizeManager` manages your translations (includes loading)\n */\nexport class LocalizeManager {\n  // eslint-disable-line no-unused-vars\n  constructor({ autoLoadOnLocaleChange = false, fallbackLocale = '' } = {}) {\n    this.__delegationTarget = document.createDocumentFragment();\n    this._autoLoadOnLocaleChange = !!autoLoadOnLocaleChange;\n    this._fallbackLocale = fallbackLocale;\n\n    /** @type {Object.<string, Object.<string, Object>>} */\n    this.__storage = {};\n\n    /** @type {Map.<RegExp|string, function>} */\n    this.__namespacePatternsMap = new Map();\n\n    /** @type {Object.<string, function|null>} */\n    this.__namespaceLoadersCache = {};\n\n    /** @type {Object.<string, Object.<string, Promise.<Object>>>} */\n    this.__namespaceLoaderPromisesCache = {};\n\n    this.formatNumberOptions = {\n      returnIfNaN: '',\n      /** @type {Map<string,DatePostProcessor>} */\n      postProcessors: new Map(),\n    };\n\n    this.formatDateOptions = {\n      /** @type {Map<string,DatePostProcessor>} */\n      postProcessors: new Map(),\n    };\n\n    /**\n     * Via html[data-localize-lang], developers are allowed to set the initial locale, without\n     * having to worry about whether locale is initialized before 3rd parties like Google Translate.\n     * When this value differs from html[lang], we assume the 3rd party took\n     * control over the page language and we set this._langAttrSetByTranslationTool to html[lang]\n     */\n    const initialLocale = document.documentElement.getAttribute('data-localize-lang');\n\n    this._supportExternalTranslationTools = Boolean(initialLocale);\n\n    if (this._supportExternalTranslationTools) {\n      this.locale = initialLocale || 'en-GB';\n      this._setupTranslationToolSupport();\n    }\n\n    if (!document.documentElement.lang) {\n      document.documentElement.lang = this.locale || 'en-GB';\n    }\n\n    this._setupHtmlLangAttributeObserver();\n  }\n\n  _setupTranslationToolSupport() {\n    /**\n     * This value allows for support for Google Translate (or other 3rd parties taking control\n     * of the html[lang] attribute).\n     *\n     * Have the following scenario in mind:\n     * 1. locale is initialized by developer via html[data-localize-lang=\"en-US\"] and\n     * html[lang=\"en-US\"]. When localize is loaded (note that this also can be after step 2 below),\n     * it will sync its initial state from html[data-localize-lang]\n     * 2. Google Translate kicks in for the French language. It will set html[lang=\"fr\"].\n     * This new language is not one known by us, so we most likely don't have translations for\n     * this file. Therefore, we do NOT sync this value to LocalizeManager. The manager should\n     * still ask for known resources (in this case for locale 'en-US')\n     * 3. locale is changed (think of a language dropdown)\n     * It's a bit of a weird case, because we would not expect an end user to do this. If he/she\n     * does, make sure that we do not go against Google Translate, so we maintain accessibility\n     * (by not altering html[lang]). We detect this by reading _langAttrSetByTranslationTool:\n     * when its value is null, we consider Google translate 'not active'.\n     *\n     * When Google Translate is turned off by the user (html[lang=auto]),\n     * `localize.locale` will be synced to html[lang] again\n     *\n     * Keep in mind that all of the above also works with other tools than Google Translate,\n     * but this is the most widely used tool and therefore used as an example.\n     */\n    this._langAttrSetByTranslationTool = document.documentElement.lang || null;\n  }\n\n  teardown() {\n    this._teardownHtmlLangAttributeObserver();\n  }\n\n  /**\n   * @returns {string}\n   */\n  get locale() {\n    if (this._supportExternalTranslationTools) {\n      return this.__locale || '';\n    }\n    return document.documentElement.lang;\n  }\n\n  /**\n   * @param {string} value\n   */\n  set locale(value) {\n    /** @type {string} */\n    let oldLocale;\n    if (this._supportExternalTranslationTools) {\n      oldLocale = /** @type {string} */ (this.__locale);\n      this.__locale = value;\n      if (this._langAttrSetByTranslationTool === null) {\n        this._setHtmlLangAttribute(value);\n      }\n    } else {\n      oldLocale = document.documentElement.lang;\n      this._setHtmlLangAttribute(value);\n    }\n\n    if (!value.includes('-')) {\n      this.__handleLanguageOnly(value);\n    }\n\n    this._onLocaleChanged(value, oldLocale);\n  }\n\n  /**\n   * @param {string} locale\n   */\n  _setHtmlLangAttribute(locale) {\n    this._teardownHtmlLangAttributeObserver();\n    document.documentElement.lang = locale;\n    this._setupHtmlLangAttributeObserver();\n  }\n\n  /**\n   * @param {string} value\n   * @throws {Error} Language only locales are not allowed(Use 'en-GB' instead of 'en')\n   */\n  // eslint-disable-next-line class-methods-use-this\n  __handleLanguageOnly(value) {\n    throw new Error(`\n      Locale was set to ${value}.\n      Language only locales are not allowed, please use the full language locale e.g. 'en-GB' instead of 'en'.\n      See https://github.com/ing-bank/lion/issues/187 for more information.\n    `);\n  }\n\n  /**\n   * @returns {Promise.<Object>}\n   */\n  get loadingComplete() {\n    return Promise.all(Object.values(this.__namespaceLoaderPromisesCache[this.locale]));\n  }\n\n  reset() {\n    this.__storage = {};\n    this.__namespacePatternsMap = new Map();\n    this.__namespaceLoadersCache = {};\n    this.__namespaceLoaderPromisesCache = {};\n  }\n\n  /**\n   * @param {string} locale\n   * @param {string} namespace\n   * @param {object} data\n   * @throws {Error} Namespace can be added only once, for a given locale\n   */\n  addData(locale, namespace, data) {\n    if (this._isNamespaceInCache(locale, namespace)) {\n      throw new Error(\n        `Namespace \"${namespace}\" has been already added for the locale \"${locale}\".`,\n      );\n    }\n\n    this.__storage[locale] = this.__storage[locale] || {};\n    this.__storage[locale][namespace] = data;\n  }\n\n  /**\n   * @param {RegExp|string} pattern\n   * @param {function} loader\n   */\n  setupNamespaceLoader(pattern, loader) {\n    this.__namespacePatternsMap.set(pattern, loader);\n  }\n\n  /**\n   * @param {NamespaceObject[]} namespaces\n   * @param {Object} [options]\n   * @param {string} [options.locale]\n   * @returns {Promise.<Object>}\n   */\n  loadNamespaces(namespaces, { locale } = {}) {\n    return Promise.all(\n      namespaces.map(\n        /** @param {NamespaceObject} namespace */\n        namespace => this.loadNamespace(namespace, { locale }),\n      ),\n    );\n  }\n\n  /**\n   * @param {NamespaceObject} namespaceObj\n   * @param {Object} [options]\n   * @param {string} [options.locale]\n   * @returns {Promise.<Object|void>}\n   */\n  loadNamespace(namespaceObj, { locale = this.locale } = { locale: this.locale }) {\n    const isDynamicImport = typeof namespaceObj === 'object';\n\n    const namespace = /** @type {string} */ (isDynamicImport\n      ? Object.keys(namespaceObj)[0]\n      : namespaceObj);\n\n    if (this._isNamespaceInCache(locale, namespace)) {\n      return Promise.resolve();\n    }\n\n    const existingLoaderPromise = this._getCachedNamespaceLoaderPromise(locale, namespace);\n    if (existingLoaderPromise) {\n      return existingLoaderPromise;\n    }\n\n    return this._loadNamespaceData(locale, namespaceObj, isDynamicImport, namespace);\n  }\n\n  /**\n   * @param {string | string[]} keys\n   * @param {Object.<string,?>} [vars]\n   * @param {Object} [opts]\n   * @param {string} [opts.locale]\n   * @returns {string}\n   */\n  msg(keys, vars, opts = {}) {\n    const locale = opts.locale ? opts.locale : this.locale;\n    const message = this._getMessageForKeys(keys, locale);\n    if (!message) {\n      return '';\n    }\n    const formatter = new MessageFormat(message, locale);\n    return formatter.format(vars);\n  }\n\n  _setupHtmlLangAttributeObserver() {\n    if (!this._htmlLangAttributeObserver) {\n      this._htmlLangAttributeObserver = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n          if (this._supportExternalTranslationTools) {\n            if (document.documentElement.lang === 'auto') {\n              // Google Translate is switched off\n              this._langAttrSetByTranslationTool = null;\n              this._setHtmlLangAttribute(this.locale);\n            } else {\n              this._langAttrSetByTranslationTool = document.documentElement.lang;\n            }\n          } else {\n            this._onLocaleChanged(document.documentElement.lang, mutation.oldValue || '');\n          }\n        });\n      });\n    }\n    this._htmlLangAttributeObserver.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['lang'],\n      attributeOldValue: true,\n    });\n  }\n\n  _teardownHtmlLangAttributeObserver() {\n    if (this._htmlLangAttributeObserver) {\n      this._htmlLangAttributeObserver.disconnect();\n    }\n  }\n\n  /**\n   * @param {string} locale\n   * @param {string} namespace\n   */\n  _isNamespaceInCache(locale, namespace) {\n    return !!(this.__storage[locale] && this.__storage[locale][namespace]);\n  }\n\n  /**\n   * @param {string} locale\n   * @param {string} namespace\n   */\n  _getCachedNamespaceLoaderPromise(locale, namespace) {\n    if (this.__namespaceLoaderPromisesCache[locale]) {\n      return this.__namespaceLoaderPromisesCache[locale][namespace];\n    }\n    return null;\n  }\n\n  /**\n   * @param {string} locale\n   * @param {NamespaceObject} namespaceObj\n   * @param {boolean} isDynamicImport\n   * @param {string} namespace\n   * @returns {Promise.<Object|void>}\n   */\n  _loadNamespaceData(locale, namespaceObj, isDynamicImport, namespace) {\n    const loader = this._getNamespaceLoader(namespaceObj, isDynamicImport, namespace);\n    const loaderPromise = this._getNamespaceLoaderPromise(loader, locale, namespace);\n    this._cacheNamespaceLoaderPromise(locale, namespace, loaderPromise);\n    return loaderPromise.then(\n      /**\n       * @param {Object} obj\n       * @param {Object} obj.default\n       */\n      obj => {\n        const data = isLocalizeESModule(obj) ? obj.default : obj;\n        this.addData(locale, namespace, data);\n      },\n    );\n  }\n\n  /**\n   * @param {NamespaceObject} namespaceObj\n   * @param {boolean} isDynamicImport\n   * @param {string} namespace\n   * @throws {Error} Namespace shall setup properly. Check loader!\n   */\n  _getNamespaceLoader(namespaceObj, isDynamicImport, namespace) {\n    let loader = this.__namespaceLoadersCache[namespace];\n    if (!loader) {\n      if (isDynamicImport) {\n        const _namespaceObj = /** @type {Object.<string,function>} */ (namespaceObj);\n        loader = _namespaceObj[namespace];\n        this.__namespaceLoadersCache[namespace] = loader;\n      } else {\n        loader = this._lookupNamespaceLoader(namespace);\n        this.__namespaceLoadersCache[namespace] = loader;\n      }\n    }\n\n    if (!loader) {\n      throw new Error(`Namespace \"${namespace}\" was not properly setup.`);\n    }\n\n    this.__namespaceLoadersCache[namespace] = loader;\n\n    return loader;\n  }\n\n  /**\n   * @param {function} loader\n   * @param {string} locale\n   * @param {string} namespace\n   * @param {string} [fallbackLocale]\n   * @returns {Promise.<any>}\n   * @throws {Error} Data for namespace and (locale or fallback locale) could not be loaded.\n   */\n  _getNamespaceLoaderPromise(loader, locale, namespace, fallbackLocale = this._fallbackLocale) {\n    return loader(locale, namespace).catch(() => {\n      const lang = this._getLangFromLocale(locale);\n      return loader(lang, namespace).catch(() => {\n        if (fallbackLocale) {\n          return this._getNamespaceLoaderPromise(loader, fallbackLocale, namespace, '').catch(\n            () => {\n              const fallbackLang = this._getLangFromLocale(fallbackLocale);\n              throw new Error(\n                `Data for namespace \"${namespace}\" and current locale \"${locale}\" or fallback locale \"${fallbackLocale}\" could not be loaded. ` +\n                  `Make sure you have data either for locale \"${locale}\" (and/or generic language \"${lang}\") or for fallback \"${fallbackLocale}\" (and/or \"${fallbackLang}\").`,\n              );\n            },\n          );\n        }\n        throw new Error(\n          `Data for namespace \"${namespace}\" and locale \"${locale}\" could not be loaded. ` +\n            `Make sure you have data for locale \"${locale}\" (and/or generic language \"${lang}\").`,\n        );\n      });\n    });\n  }\n\n  /**\n   * @param {string} locale\n   * @param {string} namespace\n   * @param {Promise.<Object>} promise\n   */\n  _cacheNamespaceLoaderPromise(locale, namespace, promise) {\n    if (!this.__namespaceLoaderPromisesCache[locale]) {\n      this.__namespaceLoaderPromisesCache[locale] = {};\n    }\n    this.__namespaceLoaderPromisesCache[locale][namespace] = promise;\n  }\n\n  /**\n   * @param {string} namespace\n   * @returns {function|null}\n   */\n  _lookupNamespaceLoader(namespace) {\n    /* eslint-disable no-restricted-syntax */\n    for (const [key, value] of this.__namespacePatternsMap) {\n      const isMatchingString = typeof key === 'string' && key === namespace;\n      const isMatchingRegexp =\n        typeof key === 'object' && key.constructor.name === 'RegExp' && key.test(namespace);\n      if (isMatchingString || isMatchingRegexp) {\n        return value;\n      }\n    }\n    return null;\n    /* eslint-enable no-restricted-syntax */\n  }\n\n  /**\n   * @param {string} locale\n   * @returns {string}\n   */\n  // eslint-disable-next-line class-methods-use-this\n  _getLangFromLocale(locale) {\n    return locale.substring(0, 2);\n  }\n\n  /**\n   * @param {string} type\n   * @param {EventListener} listener\n   * @param {...Object} options\n   */\n  addEventListener(type, listener, ...options) {\n    this.__delegationTarget.addEventListener(type, listener, ...options);\n  }\n\n  /**\n   * @param {string} type\n   * @param {EventListener} listener\n   * @param {...Object} options\n   */\n  removeEventListener(type, listener, ...options) {\n    this.__delegationTarget.removeEventListener(type, listener, ...options);\n  }\n\n  /**\n   *  @param {CustomEvent} event\n   */\n  dispatchEvent(event) {\n    this.__delegationTarget.dispatchEvent(event);\n  }\n\n  /**\n   * @param {string} newLocale\n   * @param {string} oldLocale\n   * @returns {undefined}\n   */\n  _onLocaleChanged(newLocale, oldLocale) {\n    if (newLocale === oldLocale) {\n      return;\n    }\n    if (this._autoLoadOnLocaleChange) {\n      this._loadAllMissing(newLocale, oldLocale);\n    }\n    this.dispatchEvent(new CustomEvent('localeChanged', { detail: { newLocale, oldLocale } }));\n  }\n\n  /**\n   * @param {string} newLocale\n   * @param {string} oldLocale\n   * @returns {Promise.<Object>}\n   */\n  _loadAllMissing(newLocale, oldLocale) {\n    const oldLocaleNamespaces = this.__storage[oldLocale] || {};\n    const newLocaleNamespaces = this.__storage[newLocale] || {};\n    /** @type {Promise<Object|void>[]} */\n    const promises = [];\n    Object.keys(oldLocaleNamespaces).forEach(namespace => {\n      const newNamespaceData = newLocaleNamespaces[namespace];\n      if (!newNamespaceData) {\n        promises.push(\n          this.loadNamespace(namespace, {\n            locale: newLocale,\n          }),\n        );\n      }\n    });\n    return Promise.all(promises);\n  }\n\n  /**\n   * @param {string | string[]} keys\n   * @param {string} locale\n   * @returns {string | undefined}\n   */\n  _getMessageForKeys(keys, locale) {\n    if (typeof keys === 'string') {\n      return this._getMessageForKey(keys, locale);\n    }\n    const reversedKeys = Array.from(keys).reverse(); // Array.from prevents mutation of argument\n    let key;\n    let message;\n    while (reversedKeys.length) {\n      key = reversedKeys.pop();\n      message = this._getMessageForKey(key, locale);\n      if (message) {\n        return message;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {string | undefined} key\n   * @param {string} locale\n   * @returns {string}\n   * @throws {Error} `key`is missing namespace. The format for `key` is \"namespace:name\"\n   *\n   */\n  _getMessageForKey(key, locale) {\n    if (!key || key.indexOf(':') === -1) {\n      throw new Error(\n        `Namespace is missing in the key \"${key}\". The format for keys is \"namespace:name\".`,\n      );\n    }\n    const [ns, namesString] = key.split(':');\n    const namespaces = this.__storage[locale];\n    const messages = namespaces ? namespaces[ns] : {};\n    const names = namesString.split('.');\n    const result = names.reduce(\n      /**\n       * @param {Object.<string, any> | string} message\n       * @param {string} name\n       * @returns {string}\n       */\n      (message, name) => (typeof message === 'object' ? message[name] : message),\n      messages,\n    );\n\n    return String(result || '');\n  }\n\n  /**\n   * @param {{locale:string, postProcessor:DatePostProcessor}} options\n   */\n  setDatePostProcessorForLocale({ locale, postProcessor }) {\n    this.formatDateOptions.postProcessors.set(locale, postProcessor);\n  }\n\n  /**\n   * @param {{locale:string, postProcessor:NumberPostProcessor}} options\n   */\n  setNumberPostProcessorForLocale({ locale, postProcessor }) {\n    this.formatNumberOptions.postProcessors.set(locale, postProcessor);\n  }\n}\n","import { singletonManager } from 'singleton-manager';\nimport { LocalizeManager } from './LocalizeManager.js';\n\n/** @type {LocalizeManager} */\n// eslint-disable-next-line import/no-mutable-exports\nexport let localize =\n  singletonManager.get('@lion/localize::localize::0.10.x') ||\n  new LocalizeManager({\n    autoLoadOnLocaleChange: true,\n    fallbackLocale: 'en-GB',\n  });\n\n/**\n * @param {LocalizeManager} newLocalize\n */\nexport function setLocalize(newLocalize) {\n  localize.teardown();\n  localize = newLocalize;\n}\n","// TODO: still needed? It can be solved with while loop as well\n\n/**\n * Use the `.add` method to add async functions to the queue\n * Await the `.complete` if you want to ensure the queue is empty at any point\n * `complete` resolves whenever no more tasks are running.\n * Important note: Currently runs tasks 1 by 1, there is no concurrency option at the moment\n */\nexport class AsyncQueue {\n  constructor() {\n    this.__running = false;\n    /** @type {function[]} */\n    this.__queue = [];\n  }\n\n  /**\n   *\n   * @param {function} task\n   */\n  add(task) {\n    this.__queue.push(task);\n    if (!this.__running) {\n      // We have a new queue, because before there was nothing in the queue\n      this.complete = new Promise(resolve => {\n        /** @type {function} */\n        this.__callComplete = resolve;\n      });\n      this.__run();\n    }\n  }\n\n  async __run() {\n    this.__running = true;\n    await this.__queue[0]();\n    this.__queue.shift();\n    if (this.__queue.length > 0) {\n      this.__run();\n    } else {\n      this.__running = false;\n      if (this.__callComplete) {\n        this.__callComplete();\n      }\n    }\n  }\n}\n","/**\n * Return PascalCased version of the camelCased string\n *\n * @param {string} str\n * @return {string}\n */\nexport function pascalCase(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","import { dedupeMixin } from '@lion/core';\n\n// TODO: will be moved to @Lion/core later?\n\n/**\n * @typedef {import('../../types/utils/SyncUpdatableMixinTypes').SyncUpdatableMixin} SyncUpdatableMixin\n * @typedef {import('../../types/utils/SyncUpdatableMixinTypes').SyncUpdatableNamespace} SyncUpdatableNamespace\n */\n\n/**\n * @desc Why this mixin?\n * - it adheres to the \"Member Order Independence\" web components standard:\n * https://github.com/webcomponents/gold-standard/wiki/Member-Order-Independence\n * - sync observers can be dependent on the outcome of the render function (or, more generically\n * speaking, the light and shadow dom). This aligns with the 'updated' callback that is supported\n * out of the box by LitElement, which runs after connectedCallback as well.\n * - makes the propertyAccessor.`hasChanged` compatible in synchronous updates:\n * `updateSync` will only be called when new value differs from old value.\n * See: https://lit-element.polymer-project.org/guide/lifecycle#haschanged\n * - it is a stable abstraction on top of a protected/non official lifecycle LitElement api.\n * Whenever the implementation of `requestUpdateInternal` changes (this happened in the past for\n * `requestUpdate`) we only have to change our abstraction instead of all our components\n * @type {SyncUpdatableMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n */\nconst SyncUpdatableMixinImplementation = superclass =>\n  class extends superclass {\n    constructor() {\n      super();\n      // Namespace for this mixin that guarantees naming clashes will not occur...\n      /**\n       * @type {SyncUpdatableNamespace}\n       */\n      this.__SyncUpdatableNamespace = {};\n    }\n\n    /** @param {import('@lion/core').PropertyValues } changedProperties */\n    firstUpdated(changedProperties) {\n      super.firstUpdated(changedProperties);\n      this.__SyncUpdatableNamespace.connected = true;\n      this.__syncUpdatableInitialize();\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.__SyncUpdatableNamespace.connected = false;\n    }\n\n    /**\n     * Makes the propertyAccessor.`hasChanged` compatible in synchronous updates\n     * @param {string} name\n     * @param {*} newValue\n     * @param {*} oldValue\n     */\n    static __syncUpdatableHasChanged(name, newValue, oldValue) {\n      // @ts-expect-error accessing private lit property\n      const properties = this._classProperties;\n      if (properties.get(name) && properties.get(name).hasChanged) {\n        return properties.get(name).hasChanged(newValue, oldValue);\n      }\n      return newValue !== oldValue;\n    }\n\n    __syncUpdatableInitialize() {\n      const ns = this.__SyncUpdatableNamespace;\n      const ctor = /** @type {typeof SyncUpdatableMixin & typeof import('../../types/utils/SyncUpdatableMixinTypes').SyncUpdatableHost} */ (this\n        .constructor);\n\n      ns.initialized = true;\n      // Empty queue...\n      if (ns.queue) {\n        Array.from(ns.queue).forEach(name => {\n          if (ctor.__syncUpdatableHasChanged(name, this[name], undefined)) {\n            this.updateSync(name, undefined);\n          }\n        });\n      }\n    }\n\n    /**\n     * @param {string} name\n     * @param {*} oldValue\n     */\n    requestUpdateInternal(name, oldValue) {\n      super.requestUpdateInternal(name, oldValue);\n\n      this.__SyncUpdatableNamespace = this.__SyncUpdatableNamespace || {};\n      const ns = this.__SyncUpdatableNamespace;\n\n      const ctor = /** @type {typeof SyncUpdatableMixin & typeof import('../../types/utils/SyncUpdatableMixinTypes').SyncUpdatableHost} */ (this\n        .constructor);\n\n      // Before connectedCallback: queue\n      if (!ns.connected) {\n        ns.queue = ns.queue || new Set();\n        // Makes sure that we only initialize one time, with most up to date value\n        ns.queue.add(name);\n      } // After connectedCallback: guarded proxy to updateSync\n      else if (ctor.__syncUpdatableHasChanged(name, this[name], oldValue)) {\n        this.updateSync(name, oldValue);\n      }\n    }\n\n    /**\n     * @desc A public abstraction that has the exact same api as `requestUpdateInternal`.\n     * All code previously present in requestUpdateInternal can be placed in this method.\n     * @param {string} name\n     * @param {*} oldValue\n     */\n    updateSync(name, oldValue) {} // eslint-disable-line class-methods-use-this, no-unused-vars\n  };\n\nexport const SyncUpdatableMixin = dedupeMixin(SyncUpdatableMixinImplementation);\n","import { html, LitElement } from '@lion/core';\n\n/**\n * @typedef {import('../validate/Validator').Validator} Validator\n * @typedef {import('@lion/core').TemplateResult} TemplateResult\n * @typedef {Object} messageMap\n * @property {string | Node} message\n * @property {string} type\n * @property {Validator} [validator]\n */\n\n/**\n * @desc Takes care of accessible rendering of error messages\n * Should be used in conjunction with FormControl having ValidateMixin applied\n */\nexport class LionValidationFeedback extends LitElement {\n  static get properties() {\n    return {\n      feedbackData: { attribute: false },\n    };\n  }\n\n  /**\n   * @overridable\n   * @param {Object} opts\n   * @param {string | Node | TemplateResult } opts.message message or feedback node or TemplateResult\n   * @param {string} [opts.type]\n   * @param {Validator} [opts.validator]\n   */\n  // eslint-disable-next-line class-methods-use-this\n  _messageTemplate({ message }) {\n    return message;\n  }\n\n  /**\n   * @param {import('@lion/core').PropertyValues } changedProperties\n   */\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    if (this.feedbackData && this.feedbackData[0]) {\n      this.setAttribute('type', this.feedbackData[0].type);\n      this.currentType = this.feedbackData[0].type;\n      window.clearTimeout(this.removeMessage);\n      if (this.currentType === 'success') {\n        this.removeMessage = window.setTimeout(() => {\n          this.removeAttribute('type');\n          /** @type {messageMap[]} */\n          this.feedbackData = [];\n        }, 3000);\n      }\n    } else if (this.currentType !== 'success') {\n      this.removeAttribute('type');\n    }\n  }\n\n  render() {\n    return html`\n      ${this.feedbackData &&\n      this.feedbackData.map(\n        ({ message, type, validator }) => html`\n          ${this._messageTemplate({ message, type, validator })}\n        `,\n      )}\n    `;\n  }\n}\n","/**\n * @typedef {object} MessageData\n * @property {*} [MessageData.modelValue]\n * @property {string} [MessageData.fieldName]\n * @property {HTMLElement} [MessageData.formControl]\n * @property {string} [MessageData.type]\n * @property {Object.<string,?>} [MessageData.config]\n * @property {string} [MessageData.name]\n */\n\nexport class Validator {\n  /**\n   *\n   * @param {?} [param]\n   * @param {Object.<string,?>} [config]\n   */\n  constructor(param, config) {\n    this.__fakeExtendsEventTarget();\n\n    /** @type {?} */\n    this.__param = param;\n\n    /** @type {Object.<string,?>} */\n    this.__config = config || {};\n    this.type = (config && config.type) || 'error'; // Default type supported by ValidateMixin\n  }\n\n  static get validatorName() {\n    return '';\n  }\n\n  static get async() {\n    return false;\n  }\n\n  /**\n   * @desc The function that returns a Boolean\n   * @param {?} [modelValue]\n   * @param {?} [param]\n   * @param {{}} [config]\n   * @returns {Boolean|Promise<Boolean>}\n   */\n  // eslint-disable-next-line no-unused-vars, class-methods-use-this\n  execute(modelValue, param, config) {\n    const ctor = /** @type {typeof Validator} */ (this.constructor);\n    if (!ctor.validatorName) {\n      throw new Error(\n        'A validator needs to have a name! Please set it via \"static get validatorName() { return \\'IsCat\\'; }\"',\n      );\n    }\n    return true;\n  }\n\n  set param(p) {\n    this.__param = p;\n    if (this.dispatchEvent) {\n      this.dispatchEvent(new Event('param-changed'));\n    }\n  }\n\n  get param() {\n    return this.__param;\n  }\n\n  set config(c) {\n    this.__config = c;\n    if (this.dispatchEvent) {\n      this.dispatchEvent(new Event('config-changed'));\n    }\n  }\n\n  get config() {\n    return this.__config;\n  }\n\n  /**\n   * @overridable\n   * @param {MessageData} [data]\n   * @returns {Promise<string|Node>}\n   */\n  async _getMessage(data) {\n    const ctor = /** @type {typeof Validator} */ (this.constructor);\n    const composedData = {\n      name: ctor.validatorName,\n      type: this.type,\n      params: this.param,\n      config: this.config,\n      ...data,\n    };\n    if (this.config.getMessage) {\n      if (typeof this.config.getMessage === 'function') {\n        return this.config.getMessage(composedData);\n      }\n      throw new Error(\n        `You must provide a value for getMessage of type 'function', you provided a value of type: ${typeof this\n          .config.getMessage}`,\n      );\n    }\n    return ctor.getMessage(composedData);\n  }\n\n  /**\n   * @overridable\n   * @param {MessageData} [data]\n   * @returns {Promise<string|Node>}\n   */\n  // eslint-disable-next-line no-unused-vars\n  static async getMessage(data) {\n    return `Please configure an error message for \"${this.name}\" by overriding \"static async getMessage()\"`;\n  }\n\n  /**\n   * @param {HTMLElement} formControl\n   */\n  onFormControlConnect(formControl) {} // eslint-disable-line\n\n  /**\n   * @param {HTMLElement} formControl\n   */\n  onFormControlDisconnect(formControl) {} // eslint-disable-line\n\n  /**\n   * @desc Used on async Validators, makes it able to do perf optimizations when there are\n   * pending \"execute\" calls with outdated values.\n   * ValidateMixin calls Validator.abortExecution() an async Validator can act accordingly,\n   * depending on its implementation of the \"execute\" function.\n   * - For instance, when fetch was called:\n   * https://stackoverflow.com/questions/31061838/how-do-i-cancel-an-http-fetch-request\n   * - Or, when a webworker was started, its process could be aborted and then restarted.\n   */\n  abortExecution() {} // eslint-disable-line\n\n  __fakeExtendsEventTarget() {\n    const delegate = document.createDocumentFragment();\n\n    /**\n     *\n     * @param {string} type\n     * @param {EventListener} listener\n     * @param {Object} [opts]\n     */\n    const delegatedAddEventListener = (type, listener, opts) =>\n      delegate.addEventListener(type, listener, opts);\n\n    /**\n     * @param {string} type\n     * @param {EventListener} listener\n     * @param {Object} [opts]\n     */\n    const delegatedRemoveEventListener = (type, listener, opts) =>\n      delegate.removeEventListener(type, listener, opts);\n\n    /**\n     * @param {Event|CustomEvent} event\n     */\n    const delegatedDispatchEvent = event => delegate.dispatchEvent(event);\n\n    this.addEventListener = delegatedAddEventListener;\n\n    this.removeEventListener = delegatedRemoveEventListener;\n\n    this.dispatchEvent = delegatedDispatchEvent;\n  }\n}\n\n// For simplicity, a default validator only handles one state:\n// it can either be true or false an it will only have one message.\n// In more advanced cases (think of the feedback mechanism for the maximum number of\n// characters in Twitter), more states are needed. The alternative of\n// having multiple distinct validators would be cumbersome to create and maintain,\n// also because the validations would tie too much into each others logic.\n","import { Validator } from './Validator.js';\n\n/**\n * @desc Instead of evaluating the result of a regular validator, a ResultValidator looks\n * at the total result of regular Validators. Instead of an execute function, it uses a\n * 'executeOnResults' Validator.\n * ResultValidators cannot be async, and should not contain an execute method.\n */\nexport class ResultValidator extends Validator {\n  /**\n   * @param {Object} context\n   * @param {Validator[]} context.regularValidationResult\n   * @param {Validator[] | undefined} context.prevValidationResult\n   * @param {Validator[]} [context.validators]\n   * @returns {boolean}\n   */\n  // eslint-disable-next-line no-unused-vars, class-methods-use-this\n  executeOnResults({ regularValidationResult, prevValidationResult, validators }) {\n    return true;\n  }\n}\n","import { Validator } from '../Validator.js';\n\n/**\n * @typedef {import('../../../types/FormControlMixinTypes.js').FormControlHost} FormControlHost\n */\n\nexport class Required extends Validator {\n  static get validatorName() {\n    return 'Required';\n  }\n\n  /**\n   * We don't have an execute function, since the Required validator is 'special'.\n   * The outcome depends on the modelValue of the FormControl and\n   * FormControl.__isEmpty / FormControl._isEmpty.\n   */\n\n  /**\n   * @param {FormControlHost & HTMLElement} formControl\n   */\n  // eslint-disable-next-line class-methods-use-this\n  onFormControlConnect(formControl) {\n    if (formControl._inputNode) {\n      formControl._inputNode.setAttribute('aria-required', 'true');\n    }\n  }\n\n  /**\n   * @param {FormControlHost & HTMLElement} formControl\n   */\n  // eslint-disable-next-line class-methods-use-this\n  onFormControlDisconnect(formControl) {\n    if (formControl._inputNode) {\n      formControl._inputNode.removeAttribute('aria-required');\n    }\n  }\n}\n","/* eslint-disable class-methods-use-this, camelcase, no-param-reassign, max-classes-per-file */\nimport { dedupeMixin, ScopedElementsMixin, SlotMixin, DisabledMixin } from '@lion/core';\n// TODO: make form-core independent from localize\nimport { localize } from '@lion/localize';\nimport { AsyncQueue } from '../utils/AsyncQueue.js';\nimport { pascalCase } from '../utils/pascalCase.js';\nimport { SyncUpdatableMixin } from '../utils/SyncUpdatableMixin.js';\nimport { LionValidationFeedback } from './LionValidationFeedback.js';\nimport { ResultValidator } from './ResultValidator.js';\nimport { Unparseable } from './Unparseable.js';\nimport { Validator } from './Validator.js';\nimport { Required } from './validators/Required.js';\nimport { FormControlMixin } from '../FormControlMixin.js';\n\n/**\n * @typedef {import('../../types/validate/ValidateMixinTypes').ValidateMixin} ValidateMixin\n */\n\n/**\n * @param {any[]} array1\n * @param {any[]} array2\n */\nfunction arrayDiff(array1 = [], array2 = []) {\n  return array1.filter(x => !array2.includes(x)).concat(array2.filter(x => !array1.includes(x)));\n}\n\n/**\n * @desc Handles all validation, based on modelValue changes. It has no knowledge about dom and\n * UI. All error visibility, dom interaction and accessibility are handled in FeedbackMixin.\n *\n * @type {ValidateMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n */\nexport const ValidateMixinImplementation = superclass =>\n  // @ts-expect-error false positive for incompatible static get properties. Lit-element merges super properties already for you.\n  class extends FormControlMixin(\n    SyncUpdatableMixin(DisabledMixin(SlotMixin(ScopedElementsMixin(superclass)))),\n  ) {\n    static get scopedElements() {\n      const scopedElementsCtor = /** @type {typeof import('@open-wc/scoped-elements/src/types').ScopedElementsHost} */ (super\n        .constructor);\n      return {\n        ...scopedElementsCtor.scopedElements,\n        'lion-validation-feedback': LionValidationFeedback,\n      };\n    }\n\n    static get properties() {\n      return {\n        validators: { attribute: false },\n\n        hasFeedbackFor: { attribute: false },\n\n        shouldShowFeedbackFor: { attribute: false },\n\n        showsFeedbackFor: {\n          type: Array,\n          attribute: 'shows-feedback-for',\n          reflect: true,\n          converter: {\n            fromAttribute: /** @param {string} value */ value => value.split(','),\n            toAttribute: /** @param {[]} value */ value => value.join(','),\n          },\n        },\n\n        validationStates: { attribute: false },\n\n        /**\n         * @desc flag that indicates whether async validation is pending\n         */\n        isPending: {\n          type: Boolean,\n          attribute: 'is-pending',\n          reflect: true,\n        },\n\n        /**\n         * @desc specialized fields (think of input-date and input-email) can have preconfigured\n         * validators.\n         */\n        defaultValidators: { attribute: false },\n\n        /**\n         * Subclassers can enable this to show multiple feedback messages at the same time\n         * By default, just like the platform, only one message (with highest prio) is visible.\n         */\n        _visibleMessagesAmount: { attribute: false },\n      };\n    }\n\n    /**\n     * @overridable\n     */\n    static get validationTypes() {\n      return ['error'];\n    }\n\n    /**\n     * @overridable\n     * Adds \"._feedbackNode\" as described below\n     */\n    get slots() {\n      /**\n       * FIXME: Ugly workaround https://github.com/microsoft/TypeScript/issues/40110\n       * @callback getScopedTagName\n       * @param {string} tagName\n       * @returns {string}\n       *\n       * @typedef {Object} ScopedElementsObj\n       * @property {getScopedTagName} getScopedTagName\n       */\n      const ctor = /** @type {typeof ValidateMixin & ScopedElementsObj} */ (this.constructor);\n      return {\n        ...super.slots,\n        feedback: () => document.createElement(ctor.getScopedTagName('lion-validation-feedback')),\n      };\n    }\n\n    get _allValidators() {\n      return [...this.validators, ...this.defaultValidators];\n    }\n\n    constructor() {\n      super();\n\n      /** @type {string[]} */\n      this.hasFeedbackFor = [];\n\n      /** @type {string[]} */\n      this.shouldShowFeedbackFor = [];\n\n      /** @type {string[]} */\n      this.showsFeedbackFor = [];\n\n      /** @type {Object.<string, Object.<string, boolean>>} */\n      this.validationStates = {};\n\n      this._visibleMessagesAmount = 1;\n\n      this.isPending = false;\n\n      /** @type {Validator[]} */\n      this.validators = [];\n      /** @type {Validator[]} */\n      this.defaultValidators = [];\n\n      /** @type {Validator[]} */\n      this.__syncValidationResult = [];\n\n      /** @type {Validator[]} */\n      this.__asyncValidationResult = [];\n\n      /**\n       * @desc contains results from sync Validators, async Validators and ResultValidators\n       * @type {Validator[]}\n       */\n      this.__validationResult = [];\n\n      this.__onValidatorUpdated = this.__onValidatorUpdated.bind(this);\n      this._updateFeedbackComponent = this._updateFeedbackComponent.bind(this);\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      localize.addEventListener('localeChanged', this._updateFeedbackComponent);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      localize.removeEventListener('localeChanged', this._updateFeedbackComponent);\n    }\n\n    /**\n     * @param {import('@lion/core').PropertyValues} changedProperties\n     */\n    firstUpdated(changedProperties) {\n      super.firstUpdated(changedProperties);\n      this.__validateInitialized = true;\n      this.validate();\n    }\n\n    /**\n     * @param {string} name\n     * @param {?} oldValue\n     */\n    updateSync(name, oldValue) {\n      super.updateSync(name, oldValue);\n      if (name === 'validators') {\n        // trigger validation (ideally only for the new or changed validator)\n        this.__setupValidators();\n        this.validate({ clearCurrentResult: true });\n      } else if (name === 'modelValue') {\n        this.validate({ clearCurrentResult: true });\n      }\n\n      if (\n        [\n          'touched',\n          'dirty',\n          'prefilled',\n          'focused',\n          'submitted',\n          'hasFeedbackFor',\n          'filled',\n        ].includes(name)\n      ) {\n        this._updateShouldShowFeedbackFor();\n      }\n\n      if (name === 'showsFeedbackFor') {\n        // This can't be reflected asynchronously in Safari\n        // Screen reader output should be in sync with visibility of error messages\n        if (this._inputNode) {\n          this._inputNode.setAttribute('aria-invalid', `${this._hasFeedbackVisibleFor('error')}`);\n          // this._inputNode.setCustomValidity(this._validationMessage || '');\n        }\n\n        const diff = arrayDiff(this.showsFeedbackFor, oldValue);\n        if (diff.length > 0) {\n          this.dispatchEvent(new Event(`showsFeedbackForChanged`, { bubbles: true }));\n        }\n        diff.forEach(type => {\n          this.dispatchEvent(\n            new Event(`showsFeedbackFor${pascalCase(type)}Changed`, { bubbles: true }),\n          );\n        });\n      }\n\n      if (name === 'shouldShowFeedbackFor') {\n        const diff = arrayDiff(this.shouldShowFeedbackFor, oldValue);\n        if (diff.length > 0) {\n          this.dispatchEvent(new Event(`shouldShowFeedbackForChanged`, { bubbles: true }));\n        }\n      }\n    }\n\n    /**\n     * @desc The main function of this mixin. Triggered by:\n     *  - a modelValue change\n     *  - a change in the 'validators' array\n     * -  a change in the config of an individual Validator\n     *\n     * Three situations are handled:\n     * - A.1 The FormControl is empty: further execution is halted. When the Required Validator\n     * (being mutually exclusive to the other Validators) is applied, it will end up in the\n     * validation result (as the only Validator, since further execution was halted).\n     * - A.2 There are synchronous Validators: this is the most common flow. When modelValue hasn't\n     * changed since last async results were generated, 'sync results' are merged with the\n     * 'async results'.\n     * - A.3 There are asynchronous Validators: for instance when server side evaluation is needed.\n     * Executions are scheduled and awaited and the 'async results' are merged with the\n     * 'sync results'.\n     *\n     * - B. There are ResultValidators. After steps A.1, A.2, or A.3 are finished, the holistic\n     * ResultValidators (evaluating the total result of the 'regular' (A.1, A.2 and A.3) validators)\n     * will be run...\n     *\n     * Situations A.2 and A.3 are not mutually exclusive and can be triggered within one validate()\n     * call. Situation B will occur after every call.\n     *\n     * @param {{ clearCurrentResult?: boolean }} [opts]\n     */\n    async validate({ clearCurrentResult } = {}) {\n      if (this.disabled) {\n        this.__clearValidationResults();\n        this.__finishValidation({ source: 'sync', hasAsync: true });\n        this._updateFeedbackComponent();\n        return;\n      }\n      if (!this.__validateInitialized) {\n        return;\n      }\n\n      this.__storePrevResult();\n      if (clearCurrentResult) {\n        // Clear ('invalidate') all pending and existing validation results.\n        // This is needed because we have async (pending) validators whose results\n        // need to be merged with those of sync validators and vice versa.\n        this.__clearValidationResults();\n      }\n      await this.__executeValidators();\n    }\n\n    __storePrevResult() {\n      this.__prevValidationResult = this.__validationResult;\n    }\n\n    /**\n     * @desc step A1-3 + B (as explained in 'validate')\n     */\n    async __executeValidators() {\n      this.validateComplete = new Promise(resolve => {\n        this.__validateCompleteResolve = resolve;\n      });\n\n      // When the modelValue can't be created by FormatMixin.parser, still allow all validators\n      // to give valuable feedback to the user based on the current viewValue.\n      const value =\n        this.modelValue instanceof Unparseable ? this.modelValue.viewValue : this.modelValue;\n\n      /** @type {Validator | undefined} */\n      const requiredValidator = this._allValidators.find(v => v instanceof Required);\n\n      /**\n       * 1. Handle the 'exceptional' Required validator:\n       * - the validatity is dependent on the formControl type and therefore determined\n       * by the formControl.__isEmpty method. Basically, the Required Validator is a means\n       * to trigger formControl.__isEmpty.\n       * - when __isEmpty returns true, the input was empty. This means we need to stop\n       * validation here, because all other Validators' execute functions assume the\n       * value is not empty (there would be nothing to validate).\n       */\n      // TODO: Try to remove this when we have a single lion form core package, because then we can\n      // depend on FormControlMixin directly, and _isEmpty will always be an existing method on the prototype then\n      const isEmpty = this.__isEmpty(value);\n      if (isEmpty) {\n        if (requiredValidator) {\n          this.__syncValidationResult = [requiredValidator];\n        }\n        this.__finishValidation({ source: 'sync' });\n        return;\n      }\n\n      // Separate Validators in sync and async\n      const /** @type {Validator[]} */ filteredValidators = this._allValidators.filter(\n          v => !(v instanceof ResultValidator) && !(v instanceof Required),\n        );\n      const /** @type {Validator[]} */ syncValidators = filteredValidators.filter(v => {\n          const vCtor = /** @type {typeof Validator} */ (v.constructor);\n          return !vCtor.async;\n        });\n      const /** @type {Validator[]} */ asyncValidators = filteredValidators.filter(v => {\n          const vCtor = /** @type {typeof Validator} */ (v.constructor);\n          return vCtor.async;\n        });\n\n      /**\n       * 2. Synchronous validators\n       */\n      this.__executeSyncValidators(syncValidators, value, {\n        hasAsync: Boolean(asyncValidators.length),\n      });\n\n      /**\n       * 3. Asynchronous validators\n       */\n      await this.__executeAsyncValidators(asyncValidators, value);\n    }\n\n    /**\n     * @desc step A2, calls __finishValidation\n     * @param {Validator[]} syncValidators\n     * @param {unknown} value\n     * @param {{ hasAsync: boolean }} opts\n     */\n    __executeSyncValidators(syncValidators, value, { hasAsync }) {\n      if (syncValidators.length) {\n        this.__syncValidationResult = syncValidators.filter(v =>\n          v.execute(value, v.param, { node: this }),\n        );\n      }\n      this.__finishValidation({ source: 'sync', hasAsync });\n    }\n\n    /**\n     * @desc step A3, calls __finishValidation\n     * @param {Validator[]} asyncValidators all Validators except required and ResultValidators\n     * @param {?} value\n     */\n    async __executeAsyncValidators(asyncValidators, value) {\n      if (asyncValidators.length) {\n        this.isPending = true;\n        const resultPromises = asyncValidators.map(v => v.execute(value, v.param, { node: this }));\n        const booleanResults = await Promise.all(resultPromises);\n        this.__asyncValidationResult = booleanResults\n          .map((r, i) => asyncValidators[i]) // Create an array of Validators\n          .filter((v, i) => booleanResults[i]); // Only leave the ones returning true\n        this.__finishValidation({ source: 'async' });\n        this.isPending = false;\n      }\n    }\n\n    /**\n     * @desc step B, called by __finishValidation\n     * @param {Validator[]} regularValidationResult result of steps 1-3\n     */\n    __executeResultValidators(regularValidationResult) {\n      const resultValidators = /** @type {ResultValidator[]} */ (this._allValidators.filter(v => {\n        const vCtor = /** @type {typeof Validator} */ (v.constructor);\n        return !vCtor.async && v instanceof ResultValidator;\n      }));\n\n      return resultValidators.filter(v =>\n        v.executeOnResults({\n          regularValidationResult,\n          prevValidationResult: this.__prevValidationResult,\n        }),\n      );\n    }\n\n    /**\n     * @param {object} options\n     * @param {'sync'|'async'} options.source\n     * @param {boolean} [options.hasAsync] whether async validators are configured in this run.\n     * If not, we have nothing left to wait for.\n     */\n    __finishValidation({ source, hasAsync }) {\n      const syncAndAsyncOutcome = [...this.__syncValidationResult, ...this.__asyncValidationResult];\n      // if we have any ResultValidators left, now is the time to run them...\n      const resultOutCome = this.__executeResultValidators(syncAndAsyncOutcome);\n\n      this.__validationResult = [...resultOutCome, ...syncAndAsyncOutcome];\n      // this._storeResultsOnInstance(this.__validationResult);\n\n      const ctor = /** @type {typeof import('../../types/validate/ValidateMixinTypes').ValidateHost} */ (this\n        .constructor);\n\n      /** @type {Object.<string, Object.<string, boolean>>} */\n      const validationStates = ctor.validationTypes.reduce(\n        (acc, type) => ({ ...acc, [type]: {} }),\n        {},\n      );\n      this.__validationResult.forEach(v => {\n        if (!validationStates[v.type]) {\n          validationStates[v.type] = {};\n        }\n        const vCtor = /** @type {typeof Validator} */ (v.constructor);\n        validationStates[v.type][vCtor.validatorName] = true;\n      });\n      this.validationStates = validationStates;\n\n      this.hasFeedbackFor = [...new Set(this.__validationResult.map(v => v.type))];\n\n      /** private event that should be listened to by LionFieldSet */\n      this.dispatchEvent(new Event('validate-performed', { bubbles: true }));\n      if (source === 'async' || !hasAsync) {\n        if (this.__validateCompleteResolve) {\n          this.__validateCompleteResolve();\n        }\n      }\n    }\n\n    __clearValidationResults() {\n      this.__syncValidationResult = [];\n      this.__asyncValidationResult = [];\n    }\n\n    /**\n     * @param {Event|CustomEvent} e\n     */\n    __onValidatorUpdated(e) {\n      if (e.type === 'param-changed' || e.type === 'config-changed') {\n        this.validate();\n      }\n    }\n\n    __setupValidators() {\n      const events = ['param-changed', 'config-changed'];\n      if (this.__prevValidators) {\n        this.__prevValidators.forEach(v => {\n          events.forEach(e => {\n            if (v.removeEventListener) {\n              v.removeEventListener(e, this.__onValidatorUpdated);\n            }\n          });\n          v.onFormControlDisconnect(this);\n        });\n      }\n      this._allValidators.forEach(v => {\n        if (!(v instanceof Validator)) {\n          // throws in constructor are not visible to end user so we do both\n          const errorType = Array.isArray(v) ? 'array' : typeof v;\n          const errorMessage = `Validators array only accepts class instances of Validator. Type \"${errorType}\" found. This may be caused by having multiple installations of @lion/form-core.`;\n          // eslint-disable-next-line no-console\n          console.error(errorMessage, this);\n          throw new Error(errorMessage);\n        }\n        const ctor = /** @type {typeof import('../../types/validate/ValidateMixinTypes').ValidateHost} */ (this\n          .constructor);\n        if (ctor.validationTypes.indexOf(v.type) === -1) {\n          const vCtor = /** @type {typeof Validator} */ (v.constructor);\n          // throws in constructor are not visible to end user so we do both\n          const errorMessage = `This component does not support the validator type \"${v.type}\" used in \"${vCtor.validatorName}\". You may change your validators type or add it to the components \"static get validationTypes() {}\".`;\n          // eslint-disable-next-line no-console\n          console.error(errorMessage, this);\n          throw new Error(errorMessage);\n        }\n        events.forEach(e => {\n          if (v.addEventListener) {\n            v.addEventListener(e, this.__onValidatorUpdated);\n          }\n        });\n        v.onFormControlConnect(this);\n      });\n      this.__prevValidators = this._allValidators;\n    }\n\n    /**\n     * @param {?} v\n     */\n    __isEmpty(v) {\n      if (typeof this._isEmpty === 'function') {\n        return this._isEmpty(v);\n      }\n      return (\n        this.modelValue === null || typeof this.modelValue === 'undefined' || this.modelValue === ''\n      );\n    }\n\n    // ------------------------------------------------------------------------------------------\n    // -- Feedback specifics --------------------------------------------------------------------\n    // ------------------------------------------------------------------------------------------\n\n    /**\n     * @typedef {object} FeedbackMessage\n     * @property {string | Node} message this\n     * @property {string} type will be 'error' for messages from default Validators. Could be\n     * 'warning', 'info' etc. for Validators with custom types. Needed as a directive for\n     * feedbackNode how to render a message of a certain type\n     * @property {Validator} [validator] when the message is directly coupled to a Validator\n     * (in most cases), this property is filled. When a message is not coupled to a Validator\n     * (in case of success feedback which is based on a diff or current and previous validation\n     * results), this property can be left empty.\n     */\n\n    /**\n     * @param {Validator[]} validators list of objects having a .getMessage method\n     * @return {Promise.<FeedbackMessage[]>}\n     */\n    async __getFeedbackMessages(validators) {\n      let fieldName = await this.fieldName;\n      return Promise.all(\n        validators.map(async validator => {\n          if (validator.config.fieldName) {\n            fieldName = await validator.config.fieldName;\n          }\n          const message = await validator._getMessage({\n            modelValue: this.modelValue,\n            formControl: this,\n            fieldName,\n          });\n          return { message, type: validator.type, validator };\n        }),\n      );\n    }\n\n    /**\n     * @desc Responsible for retrieving messages from Validators and\n     * (delegation of) rendering them.\n     *\n     * For `._feedbackNode` (extension of LionValidationFeedback):\n     * - retrieve messages from highest prio Validators\n     * - provide the result to custom feedback node and let the\n     * custom node decide on their renderings\n     *\n     * In both cases:\n     * - we compute the 'show' flag (like 'hasErrorVisible') for all types\n     * - we set the customValidity message of the highest prio Validator\n     * - we set aria-invalid=\"true\" in case hasErrorVisible is true\n     */\n    _updateFeedbackComponent() {\n      const { _feedbackNode } = this;\n      if (!_feedbackNode) {\n        return;\n      }\n\n      if (!this.__feedbackQueue) {\n        this.__feedbackQueue = new AsyncQueue();\n      }\n\n      if (this.showsFeedbackFor.length > 0) {\n        this.__feedbackQueue.add(async () => {\n          /** @type {Validator[]} */\n          this.__prioritizedResult = this._prioritizeAndFilterFeedback({\n            validationResult: this.__validationResult,\n          });\n          const messageMap = await this.__getFeedbackMessages(this.__prioritizedResult);\n\n          _feedbackNode.feedbackData = messageMap.length ? messageMap : [];\n        });\n      } else {\n        this.__feedbackQueue.add(async () => {\n          _feedbackNode.feedbackData = [];\n        });\n      }\n      this.feedbackComplete = this.__feedbackQueue.complete;\n    }\n\n    /**\n     * Show the validity feedback when returning true, don't show when false\n     *  @param {string} type\n     */\n    // eslint-disable-next-line no-unused-vars\n    _showFeedbackConditionFor(type) {\n      return true;\n    }\n\n    /**\n     * @param {string} type\n     */\n    _hasFeedbackVisibleFor(type) {\n      return (\n        this.hasFeedbackFor &&\n        this.hasFeedbackFor.includes(type) &&\n        this.shouldShowFeedbackFor &&\n        this.shouldShowFeedbackFor.includes(type)\n      );\n    }\n\n    /** @param {import('@lion/core').PropertyValues} changedProperties */\n    updated(changedProperties) {\n      super.updated(changedProperties);\n\n      if (\n        changedProperties.has('shouldShowFeedbackFor') ||\n        changedProperties.has('hasFeedbackFor')\n      ) {\n        const ctor = /** @type {typeof import('../../types/validate/ValidateMixinTypes').ValidateHost} */ (this\n          .constructor);\n        // Necessary typecast because types aren't smart enough to understand that we filter out undefined\n        this.showsFeedbackFor = /** @type {string[]} */ (ctor.validationTypes\n          .map(type => (this._hasFeedbackVisibleFor(type) ? type : undefined))\n          .filter(_ => !!_));\n        this._updateFeedbackComponent();\n      }\n    }\n\n    _updateShouldShowFeedbackFor() {\n      const ctor = /** @type {typeof import('../../types/validate/ValidateMixinTypes').ValidateHost} */ (this\n        .constructor);\n      // Necessary typecast because types aren't smart enough to understand that we filter out undefined\n      this.shouldShowFeedbackFor = /** @type {string[]} */ (ctor.validationTypes\n        .map(type => (this._showFeedbackConditionFor(type) ? type : undefined))\n        .filter(_ => !!_));\n    }\n\n    /**\n     * @overridable\n     * @desc Orders all active validators in this.__validationResult. Can\n     * also filter out occurrences (based on interaction states)\n     * @param {{ validationResult: Validator[] }} opts\n     * @return {Validator[]} ordered list of Validators with feedback messages visible to the\n     * end user\n     */\n    _prioritizeAndFilterFeedback({ validationResult }) {\n      const ctor = /** @type {typeof import('../../types/validate/ValidateMixinTypes').ValidateHost} */ (this\n        .constructor);\n      const types = ctor.validationTypes;\n      // Sort all validators based on the type provided.\n      const res = validationResult\n        .filter(v => this._showFeedbackConditionFor(v.type))\n        .sort((a, b) => types.indexOf(a.type) - types.indexOf(b.type));\n      return res.slice(0, this._visibleMessagesAmount);\n    }\n  };\n\nexport const ValidateMixin = dedupeMixin(ValidateMixinImplementation);\n","/* eslint-disable class-methods-use-this */\n\nimport { dedupeMixin } from '@lion/core';\nimport { FormControlMixin } from './FormControlMixin.js';\nimport { Unparseable } from './validate/Unparseable.js';\nimport { ValidateMixin } from './validate/ValidateMixin.js';\n\n/**\n * @typedef {import('../types/FormatMixinTypes').FormatMixin} FormatMixin\n * @typedef {import('@lion/localize/types/LocalizeMixinTypes').FormatNumberOptions} FormatOptions\n * @typedef {import('../types/FormControlMixinTypes.js').ModelValueEventDetails} ModelValueEventDetails\n */\n\n// For a future breaking release:\n// - do not allow the private `.formattedValue` as property that can be set to\n// trigger a computation loop.\n// - do not fire events for those private and protected concepts\n// - simplify _calculateValues: recursive trigger lock can be omitted, since need for connecting\n// the loop via sync observers is not needed anymore.\n// - consider `formatOn` as an overridable function, by default something like:\n// `(!__isHandlingUserInput || !hasError) && !focused`\n// This would allow for more advanced scenarios, like formatting an input whenever it becomes valid.\n// This would make formattedValue as a concept obsolete, since for maximum flexibility, the\n// formattedValue condition needs to be evaluated right before syncing back to the view\n\n/**\n * @desc Designed to be applied on top of a LionField.\n * To understand all concepts within the Mixin, please consult the flow diagram in the\n * documentation.\n *\n * ## Flows\n * FormatMixin supports these two main flows:\n * [1] Application Developer sets `.modelValue`:\n *     Flow: `.modelValue` (formatter) -> `.formattedValue` -> `._inputNode.value`\n *                         (serializer) -> `.serializedValue`\n * [2] End user interacts with field:\n *     Flow: `@user-input-changed` (parser) -> `.modelValue` (formatter) -> `.formattedValue` - (debounce till reflect condition (formatOn) is met) -> `._inputNode.value`\n *                                 (serializer) -> `.serializedValue`\n *\n * For backwards compatibility with the platform, we also support `.value` as an api. In that case\n * the flow will be like [2], without the debounce.\n *\n * ## Difference between value, viewValue and formattedValue\n * A viewValue is a concept rather than a property. To be compatible with the platform api, the\n * property for the concept of viewValue is thus called `.value`.\n * When reading code and docs, one should be aware that the term viewValue is mostly used, but the\n * terms can be used interchangeably.\n * The `.formattedValue` should be seen as the 'scheduled' viewValue. It is computed realtime and\n * stores the output of formatter. It will replace viewValue. once condition `formatOn` is met.\n * Another difference is that formattedValue lives on `LionField`, whereas viewValue is shared\n * across `LionField` and `._inputNode`.\n *\n * For restoring serialized values fetched from a server, we could consider one extra flow:\n * [3] Application Developer sets `.serializedValue`:\n *     Flow: serializedValue (deserializer) -> `.modelValue` (formatter) -> `.formattedValue` -> `._inputNode.value`\n *\n * @type {FormatMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n */\nconst FormatMixinImplementation = superclass =>\n  // @ts-expect-error false positive for incompatible static get properties. Lit-element merges super properties already for you.\n  class FormatMixin extends ValidateMixin(FormControlMixin(superclass)) {\n    static get properties() {\n      return {\n        /**\n         * The view value is the result of the formatter function (when available).\n         * The result will be stored in the native _inputNode (usually an input[type=text]).\n         *\n         * Examples:\n         * - For a date input, this would be '20/01/1999' (dependent on locale).\n         * - For a number input, this could be '1,234.56' (a String representation of modelValue\n         * 1234.56)\n         *\n         * @private\n         */\n        formattedValue: { attribute: false },\n\n        /**\n         * The serialized version of the model value.\n         * This value exists for maximal compatibility with the platform API.\n         * The serialized value can be an interface in context where data binding is not\n         * supported and a serialized string needs to be set.\n         *\n         * Examples:\n         * - For a date input, this would be the iso format of a date, e.g. '1999-01-20'.\n         * - For a number input this would be the String representation of a float ('1234.56'\n         *   instead of 1234.56)\n         *\n         * When no parser is available, the value is usually the same as the formattedValue\n         * (being _inputNode.value)\n         *\n         */\n        serializedValue: { attribute: false },\n\n        /**\n         * Event that will trigger formatting (more precise, visual update of the view, so the\n         * user sees the formatted value)\n         * Default: 'change'\n         */\n        formatOn: { attribute: false },\n\n        /**\n         * Configuration object that will be available inside the formatter function\n         */\n        formatOptions: { attribute: false },\n      };\n    }\n\n    /**\n     * @param {string} name\n     * @param {any} oldVal\n     */\n    requestUpdateInternal(name, oldVal) {\n      super.requestUpdateInternal(name, oldVal);\n\n      if (name === 'modelValue' && this.modelValue !== oldVal) {\n        this._onModelValueChanged({ modelValue: this.modelValue }, { modelValue: oldVal });\n      }\n      if (name === 'serializedValue' && this.serializedValue !== oldVal) {\n        this._calculateValues({ source: 'serialized' });\n      }\n      if (name === 'formattedValue' && this.formattedValue !== oldVal) {\n        this._calculateValues({ source: 'formatted' });\n      }\n    }\n\n    get value() {\n      return (this._inputNode && this._inputNode.value) || this.__value || '';\n    }\n\n    // We don't delegate, because we want to preserve caret position via _setValueAndPreserveCaret\n    /** @type {string} */\n    set value(value) {\n      // if not yet connected to dom can't change the value\n      if (this._inputNode) {\n        this._inputNode.value = value;\n        /** @type {string | undefined} */\n        this.__value = undefined;\n      } else {\n        this.__value = value;\n      }\n    }\n\n    /**\n     * Converts formattedValue to modelValue\n     * For instance, a localized date to a Date Object\n     * @param {string} v - formattedValue: the formatted value inside <input>\n     * @param {FormatOptions} opts\n     * @returns {*} modelValue\n     */\n    // eslint-disable-next-line no-unused-vars\n    parser(v, opts) {\n      return v;\n    }\n\n    /**\n     * Converts modelValue to formattedValue (formattedValue will be synced with\n     * `._inputNode.value`)\n     * For instance, a Date object to a localized date.\n     * @param {*} v - modelValue: can be an Object, Number, String depending on the\n     * input type(date, number, email etc)\n     * @param {FormatOptions} opts\n     * @returns {string} formattedValue\n     */\n    // eslint-disable-next-line no-unused-vars\n    formatter(v, opts) {\n      return v;\n    }\n\n    /**\n     * Converts `.modelValue` to `.serializedValue`\n     * For instance, a Date object to an iso formatted date string\n     * @param {?} v - modelValue: can be an Object, Number, String depending on the\n     * input type(date, number, email etc)\n     * @returns {string} serializedValue\n     */\n    serializer(v) {\n      return v !== undefined ? v : '';\n    }\n\n    /**\n     * Converts `LionField.value` to `.modelValue`\n     * For instance, an iso formatted date string to a Date object\n     * @param {?} v - modelValue: can be an Object, Number, String depending on the\n     * input type(date, number, email etc)\n     * @returns {?} modelValue\n     */\n    deserializer(v) {\n      return v === undefined ? '' : v;\n    }\n\n    /**\n     * Responsible for storing all representations(modelValue, serializedValue, formattedValue\n     * and value) of the input value. Prevents infinite loops, so all value observers can be\n     * treated like they will only be called once, without indirectly calling other observers.\n     * (in fact, some are called twice, but the __preventRecursiveTrigger lock prevents the\n     * second call from having effect).\n     *\n     * @param {{source:'model'|'serialized'|'formatted'|null}} config - the type of value that triggered this method. It should not be\n     * set again, so that its observer won't be triggered. Can be:\n     * 'model'|'formatted'|'serialized'.\n     */\n    _calculateValues({ source } = { source: null }) {\n      if (this.__preventRecursiveTrigger) return; // prevent infinite loops\n\n      /** @type {boolean} */\n      this.__preventRecursiveTrigger = true;\n      if (source !== 'model') {\n        if (source === 'serialized') {\n          /** @type {?} */\n          this.modelValue = this.deserializer(this.serializedValue);\n        } else if (source === 'formatted') {\n          this.modelValue = this.__callParser();\n        }\n      }\n      if (source !== 'formatted') {\n        /** @type {string} */\n        this.formattedValue = this.__callFormatter();\n      }\n      if (source !== 'serialized') {\n        /** @type {string} */\n        this.serializedValue = this.serializer(this.modelValue);\n      }\n      this._reflectBackFormattedValueToUser();\n      this.__preventRecursiveTrigger = false;\n    }\n\n    /**\n     * @param {string|undefined} value\n     * @return {?}\n     */\n    __callParser(value = this.formattedValue) {\n      // A) check if we need to parse at all\n\n      // A.1) The end user had no intention to parse\n      if (value === '') {\n        // Ideally, modelValue should be undefined for empty strings.\n        // For backwards compatibility we return an empty string:\n        // - it triggers validation for required validators (see ValidateMixin.validate())\n        // - it can be expected by 3rd parties (for instance unit tests)\n        // TODO(@tlouisse): In a breaking refactor of the Validation System, this behavior can be corrected.\n        return '';\n      }\n\n      // A.2) Handle edge cases We might have no view value yet, for instance because\n      // _inputNode.value was not available yet\n      if (typeof value !== 'string') {\n        // This means there is nothing to find inside the view that can be of\n        // interest to the Application Developer or needed to store for future\n        // form state retrieval.\n        return undefined;\n      }\n\n      // B) parse the view value\n\n      // - if result:\n      // return the successfully parsed viewValue\n      // - if no result:\n      // Apparently, the parser was not able to produce a satisfactory output for the desired\n      // modelValue type, based on the current viewValue. Unparseable allows to restore all\n      // states (for instance from a lost user session), since it saves the current viewValue.\n      const result = this.parser(value, this.formatOptions);\n      return result !== undefined ? result : new Unparseable(value);\n    }\n\n    /**\n     * @returns {string|undefined}\n     */\n    __callFormatter() {\n      // - Why check for this.hasError?\n      // We only want to format values that are considered valid. For best UX,\n      // we only 'reward' valid inputs.\n      // - Why check for __isHandlingUserInput?\n      // Downwards sync is prevented whenever we are in an `@user-input-changed` flow, [2].\n      // If we are in a 'imperatively set `.modelValue`' flow, [1], we want to reflect back\n      // the value, no matter what.\n      // This means, whenever we are in hasError and modelValue is set\n      // imperatively, we DO want to format a value (it is the only way to get meaningful\n      // input into `._inputNode` with modelValue as input)\n\n      if (\n        this.__isHandlingUserInput &&\n        this.hasFeedbackFor &&\n        this.hasFeedbackFor.length &&\n        this.hasFeedbackFor.includes('error') &&\n        this._inputNode\n      ) {\n        return this._inputNode ? this.value : undefined;\n      }\n\n      if (this.modelValue instanceof Unparseable) {\n        // When the modelValue currently is unparseable, we need to sync back the supplied\n        // viewValue. In flow [2], this should not be needed.\n        // In flow [1] (we restore a previously stored modelValue) we should sync down, however.\n        return this.modelValue.viewValue;\n      }\n\n      return this.formatter(this.modelValue, this.formatOptions);\n    }\n\n    /**\n     * Observer Handlers\n     * @param {{ modelValue: unknown; }[]} args\n     */\n    _onModelValueChanged(...args) {\n      this._calculateValues({ source: 'model' });\n      this._dispatchModelValueChangedEvent(...args);\n    }\n\n    /**\n     * @param {{ modelValue: unknown; }[]} args\n     * This is wrapped in a distinct method, so that parents can control when the changed event\n     * is fired. For objects, a deep comparison might be needed.\n     */\n    // eslint-disable-next-line no-unused-vars\n    _dispatchModelValueChangedEvent(...args) {\n      /** @event model-value-changed */\n      this.dispatchEvent(\n        new CustomEvent('model-value-changed', {\n          bubbles: true,\n          detail: /** @type { ModelValueEventDetails } */ ({\n            formPath: [this],\n            isTriggeredByUser: Boolean(this.__isHandlingUserInput),\n          }),\n        }),\n      );\n    }\n\n    /**\n     * Synchronization from `._inputNode.value` to `LionField` (flow [2])\n     */\n    _syncValueUpwards() {\n      // Downwards syncing should only happen for `LionField`.value changes from 'above'\n      // This triggers _onModelValueChanged and connects user input to the\n      // parsing/formatting/serializing loop\n      this.modelValue = this.__callParser(this.value);\n    }\n\n    /**\n     * Synchronization from `LionField.value` to `._inputNode.value`\n     * - flow [1] will always be reflected back\n     * - flow [2] will not be reflected back when this flow was triggered via\n     *   `@user-input-changed` (this will happen later, when `formatOn` condition is met)\n     */\n    _reflectBackFormattedValueToUser() {\n      if (this._reflectBackOn()) {\n        // Text 'undefined' should not end up in <input>\n        this.value = typeof this.formattedValue !== 'undefined' ? this.formattedValue : '';\n      }\n    }\n\n    /**\n     * @return {boolean}\n     */\n    _reflectBackOn() {\n      return !this.__isHandlingUserInput;\n    }\n\n    // This can be called whenever the view value should be updated. Dependent on component type\n    // (\"input\" for <input> or \"change\" for <select>(mainly for IE)) a different event should be\n    // used  as source for the \"user-input-changed\" event (which can be seen as an abstraction\n    // layer on top of other events (input, change, whatever))\n    _proxyInputEvent() {\n      this.dispatchEvent(\n        new CustomEvent('user-input-changed', {\n          bubbles: true,\n          composed: true,\n        }),\n      );\n    }\n\n    _onUserInputChanged() {\n      // Upwards syncing. Most properties are delegated right away, value is synced to\n      // `LionField`, to be able to act on (imperatively set) value changes\n      this.__isHandlingUserInput = true;\n      this._syncValueUpwards();\n      this.__isHandlingUserInput = false;\n    }\n\n    constructor() {\n      super();\n      this.formatOn = 'change';\n      this.formatOptions = /** @type {FormatOptions} */ ({});\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this._reflectBackFormattedValueToUser = this._reflectBackFormattedValueToUser.bind(this);\n\n      this._reflectBackFormattedValueDebounced = () => {\n        // Make sure this is fired after the change event of _inputNode, so that formattedValue\n        // is guaranteed to be calculated\n        setTimeout(this._reflectBackFormattedValueToUser);\n      };\n      this.addEventListener('user-input-changed', this._onUserInputChanged);\n      // Connect the value found in <input> to the formatting/parsing/serializing loop as a\n      // fallback mechanism. Assume the user uses the value property of the\n      // `LionField`(recommended api) as the api (this is a downwards sync).\n      // However, when no value is specified on `LionField`, have support for sync of the real\n      // input to the `LionField` (upwards sync).\n      if (typeof this.modelValue === 'undefined') {\n        this._syncValueUpwards();\n      }\n      this._reflectBackFormattedValueToUser();\n\n      if (this._inputNode) {\n        this._inputNode.addEventListener(this.formatOn, this._reflectBackFormattedValueDebounced);\n        this._inputNode.addEventListener('input', this._proxyInputEvent);\n      }\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.removeEventListener('user-input-changed', this._onUserInputChanged);\n      if (this._inputNode) {\n        this._inputNode.removeEventListener('input', this._proxyInputEvent);\n        this._inputNode.removeEventListener(\n          this.formatOn,\n          /** @type {EventListenerOrEventListenerObject} */ (this\n            ._reflectBackFormattedValueDebounced),\n        );\n      }\n    }\n  };\n\nexport const FormatMixin = dedupeMixin(FormatMixinImplementation);\n","import { dedupeMixin } from '@lion/core';\nimport { FormControlMixin } from './FormControlMixin.js';\n\n/**\n * @typedef {import('../types/InteractionStateMixinTypes').InteractionStateMixin} InteractionStateMixin\n */\n\n/**\n * @desc `InteractionStateMixin` adds meta information about touched and dirty states, that can\n * be read by other form components (ing-uic-input-error for instance, uses the touched state\n * to determine whether an error message needs to be shown).\n * Interaction states will be set when a user:\n * - leaves a form field(blur) -> 'touched' will be set to true. 'prefilled' when a\n *   field is left non-empty\n * - on keyup (actually, on the model-value-changed event) -> 'dirty' will be set to true\n *\n * @type {InteractionStateMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('@lion/core').LitElement>} superclass\n */\nconst InteractionStateMixinImplementation = superclass =>\n  // @ts-expect-error false positive for incompatible static get properties. Lit-element merges super properties already for you.\n  class InteractionStateMixin extends FormControlMixin(superclass) {\n    static get properties() {\n      return {\n        /**\n         * True when user has focused and left(blurred) the field.\n         */\n        touched: {\n          type: Boolean,\n          reflect: true,\n        },\n        /**\n         * True when user has changed the value of the field.\n         */\n        dirty: {\n          type: Boolean,\n          reflect: true,\n        },\n        /**\n         * True when the modelValue is non-empty (see _isEmpty in FormControlMixin)\n         */\n        filled: {\n          type: Boolean,\n          reflect: true,\n        },\n        /**\n         * True when user has left non-empty field or input is prefilled.\n         * The name must be seen from the point of view of the input field:\n         * once the user enters the input field, the value is non-empty.\n         */\n        prefilled: {\n          attribute: false,\n        },\n        /**\n         * True when user has attempted to submit the form, e.g. through a button\n         * of type=\"submit\"\n         */\n        submitted: {\n          attribute: false,\n        },\n      };\n    }\n\n    /**\n     *\n     * @param {PropertyKey} name\n     * @param {*} oldVal\n     */\n    requestUpdateInternal(name, oldVal) {\n      super.requestUpdateInternal(name, oldVal);\n      if (name === 'touched' && this.touched !== oldVal) {\n        this._onTouchedChanged();\n      }\n\n      if (name === 'modelValue') {\n        // We do this in requestUpdateInternal because we don't want to fire another re-render (e.g. when doing this in updated)\n        // Furthermore, we cannot do it on model-value-changed event because it isn't fired initially.\n        this.filled = !this._isEmpty();\n      }\n\n      if (name === 'dirty' && this.dirty !== oldVal) {\n        this._onDirtyChanged();\n      }\n    }\n\n    constructor() {\n      super();\n      this.touched = false;\n      this.dirty = false;\n      this.prefilled = false;\n      this.filled = false;\n\n      /** @type {string} */\n      this._leaveEvent = 'blur';\n      /** @type {string} */\n      this._valueChangedEvent = 'model-value-changed';\n      /** @type {EventHandlerNonNull} */\n      this._iStateOnLeave = this._iStateOnLeave.bind(this);\n      /** @type {EventHandlerNonNull} */\n      this._iStateOnValueChange = this._iStateOnValueChange.bind(this);\n    }\n\n    /**\n     * Register event handlers and validate prefilled inputs\n     */\n    connectedCallback() {\n      super.connectedCallback();\n      this.addEventListener(this._leaveEvent, this._iStateOnLeave);\n      this.addEventListener(this._valueChangedEvent, this._iStateOnValueChange);\n      this.initInteractionState();\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.removeEventListener(this._leaveEvent, this._iStateOnLeave);\n      this.removeEventListener(this._valueChangedEvent, this._iStateOnValueChange);\n    }\n\n    /**\n     * Evaluations performed on connectedCallback. Since some components can be out of sync\n     * (due to interdependence on light children that can only be processed\n     * after connectedCallback and affect the initial value).\n     * This method is exposed, so it can be called after they are initialized themselves.\n     * Since this method will be called twice in last mentioned scenario, it must stay idempotent.\n     */\n    initInteractionState() {\n      this.dirty = false;\n      this.prefilled = !this._isEmpty();\n    }\n\n    /**\n     * Sets touched value to true\n     * Reevaluates prefilled state.\n     * When false, on next interaction, user will start with a clean state.\n     * @protected\n     */\n    _iStateOnLeave() {\n      this.touched = true;\n      this.prefilled = !this._isEmpty();\n    }\n\n    /**\n     * Sets dirty value and validates when already touched or invalid\n     * @protected\n     */\n    _iStateOnValueChange() {\n      this.dirty = true;\n    }\n\n    /**\n     * Resets touched and dirty, and recomputes prefilled\n     */\n    resetInteractionState() {\n      this.touched = false;\n      this.submitted = false;\n      this.dirty = false;\n      this.prefilled = !this._isEmpty();\n    }\n\n    _onTouchedChanged() {\n      this.dispatchEvent(new CustomEvent('touched-changed', { bubbles: true, composed: true }));\n    }\n\n    _onDirtyChanged() {\n      this.dispatchEvent(new CustomEvent('dirty-changed', { bubbles: true, composed: true }));\n    }\n\n    /**\n     * Show the validity feedback when one of the following conditions is met:\n     *\n     * - submitted\n     *   If the form is submitted, always show the error message.\n     *\n     * - prefilled\n     *   the user already filled in something, or the value is prefilled\n     *   when the form is initially rendered.\n     *\n     * - touched && dirty\n     *   When a user starts typing for the first time in a field with for instance `required`\n     *   validation, error message should not be shown until a field becomes `touched`\n     *   (a user leaves(blurs) a field).\n     *   When a user enters a field without altering the value(making it `dirty`),\n     *   an error message shouldn't be shown either.\n     */\n    _showFeedbackConditionFor() {\n      return (this.touched && this.dirty) || this.prefilled || this.submitted;\n    }\n  };\n\nexport const InteractionStateMixin = dedupeMixin(InteractionStateMixinImplementation);\n","import { LitElement, SlotMixin } from '@lion/core';\nimport { ValidateMixin } from './validate/ValidateMixin.js';\nimport { FocusMixin } from './FocusMixin.js';\nimport { FormatMixin } from './FormatMixin.js';\nimport { FormControlMixin } from './FormControlMixin.js';\nimport { InteractionStateMixin } from './InteractionStateMixin.js'; // applies FocusMixin\n\n/**\n * `LionField`: wraps <input>, <textarea>, <select> and other interactable elements.\n * Also it would follow a nice hierarchy: lion-form -> lion-fieldset -> lion-field\n *\n * Note: We don't support placeholders, because we have a helper text and\n * placeholders confuse the user with accessibility needs.\n *\n * Please see the docs for in depth information.\n *\n * @example\n * <lion-field name=\"myName\">\n *   <label slot=\"label\">My Input</label>\n *   <input type=\"text\" slot=\"input\">\n * </lion-field>\n *\n * @customElement lion-field\n */\n// @ts-expect-error lit properties false positive\nexport class LionField extends FormControlMixin(\n  InteractionStateMixin(FocusMixin(FormatMixin(ValidateMixin(SlotMixin(LitElement))))),\n) {\n  static get properties() {\n    return {\n      autocomplete: {\n        type: String,\n        reflect: true,\n      },\n      value: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.name = '';\n    /** @type {string | undefined} */\n    this.autocomplete = undefined;\n  }\n\n  /**\n   * @param {import('@lion/core').PropertyValues } changedProperties\n   */\n  firstUpdated(changedProperties) {\n    super.firstUpdated(changedProperties);\n    /** @type {any} */\n    this._initialModelValue = this.modelValue;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._onChange = this._onChange.bind(this);\n    this._inputNode.addEventListener('change', this._onChange);\n    this.classList.add('form-field'); // eslint-disable-line\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._inputNode.removeEventListener('change', this._onChange);\n  }\n\n  resetInteractionState() {\n    super.resetInteractionState();\n    this.submitted = false;\n  }\n\n  reset() {\n    this.modelValue = this._initialModelValue;\n    this.resetInteractionState();\n  }\n\n  /**\n   * Clears modelValue.\n   * Interaction states are not cleared (use resetInteractionState for this)\n   */\n  clear() {\n    this.modelValue = ''; // can't set null here, because IE11 treats it as a string\n  }\n\n  _onChange() {\n    this.dispatchEvent(\n      new CustomEvent('user-input-changed', {\n        bubbles: true,\n      }),\n    );\n  }\n}\n","import { dedupeMixin } from '@lion/core';\n\n/**\n * @typedef {import('../types/NativeTextFieldMixinTypes').NativeTextFieldMixin} NativeTextFieldMixin\n * @type {NativeTextFieldMixin}\n * @param {import('@open-wc/dedupe-mixin').Constructor<import('../types/NativeTextFieldMixinTypes').NativeTextField>} superclass} superclass\n */\nconst NativeTextFieldMixinImplementation = superclass =>\n  class NativeTextFieldMixin extends superclass {\n    /** @type {number} */\n    get selectionStart() {\n      const native = this._inputNode;\n      if (native && native.selectionStart) {\n        return native.selectionStart;\n      }\n      return 0;\n    }\n\n    set selectionStart(value) {\n      const native = this._inputNode;\n      if (native && native.selectionStart) {\n        native.selectionStart = value;\n      }\n    }\n\n    /** @type {number} */\n    get selectionEnd() {\n      const native = this._inputNode;\n      if (native && native.selectionEnd) {\n        return native.selectionEnd;\n      }\n      return 0;\n    }\n\n    set selectionEnd(value) {\n      const native = this._inputNode;\n      if (native && native.selectionEnd) {\n        native.selectionEnd = value;\n      }\n    }\n\n    get value() {\n      return (this._inputNode && this._inputNode.value) || this.__value || '';\n    }\n\n    // We don't delegate, because we want to preserve caret position via _setValueAndPreserveCaret\n    /** @param {string} value */\n    set value(value) {\n      // if not yet connected to dom can't change the value\n      if (this._inputNode) {\n        this._setValueAndPreserveCaret(value);\n        /** @type {string | undefined} */\n        this.__value = undefined;\n      } else {\n        this.__value = value;\n      }\n    }\n\n    /**\n     * Restores the cursor to its original position after updating the value.\n     * @param {string} newValue The value that should be saved.\n     */\n    _setValueAndPreserveCaret(newValue) {\n      // Only preserve caret if focused (changing selectionStart will move focus in Safari)\n      if (this.focused) {\n        // Not all elements might have selection, and even if they have the\n        // right properties, accessing them might throw an exception (like for\n        // <input type=number>)\n        try {\n          // SelectElement doesn't have selectionStart/selectionEnd\n          if (!(this._inputNode instanceof HTMLSelectElement)) {\n            const start = this._inputNode.selectionStart;\n            this._inputNode.value = newValue;\n            // The cursor automatically jumps to the end after re-setting the value,\n            // so restore it to its original position.\n            this._inputNode.selectionStart = start;\n            this._inputNode.selectionEnd = start;\n          }\n        } catch (error) {\n          // Just set the value and give up on the caret.\n          this._inputNode.value = newValue;\n        }\n      } else {\n        this._inputNode.value = newValue;\n      }\n    }\n  };\n\nexport const NativeTextFieldMixin = dedupeMixin(NativeTextFieldMixinImplementation);\n","import { LionField } from '@lion/form-core';\nimport { NativeTextFieldMixin } from '@lion/form-core/src/NativeTextFieldMixin';\n\n/**\n * LionInput: extension of lion-field with native input element in place and user friendly API.\n *\n * @customElement lion-input\n */\n// @ts-expect-error false positive for incompatible static get properties. Lit-element merges super properties already for you.\nexport class LionInput extends NativeTextFieldMixin(LionField) {\n  static get properties() {\n    return {\n      /**\n       * A Boolean attribute which, if present, indicates that the user should not be able to edit\n       * the value of the input. The difference between disabled and readonly is that read-only\n       * controls can still function, whereas disabled controls generally do not function as\n       * controls until they are enabled.\n       *\n       * (From: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-readonly)\n       */\n      readOnly: {\n        type: Boolean,\n        attribute: 'readonly',\n        reflect: true,\n      },\n      type: {\n        type: String,\n        reflect: true,\n      },\n      placeholder: {\n        type: String,\n        reflect: true,\n      },\n    };\n  }\n\n  get slots() {\n    return {\n      ...super.slots,\n      input: () => {\n        // TODO: Find a better way to do value delegation via attr\n        const native = document.createElement('input');\n        const value = this.getAttribute('value');\n        if (value) {\n          native.setAttribute('value', value);\n        }\n        return native;\n      },\n    };\n  }\n\n  get _inputNode() {\n    return /** @type {HTMLInputElement} */ (super._inputNode); // casts type\n  }\n\n  constructor() {\n    super();\n    this.readOnly = false;\n    this.type = 'text';\n    this.placeholder = '';\n  }\n\n  /**\n   * @param {PropertyKey} name\n   * @param {?} oldValue\n   */\n  requestUpdateInternal(name, oldValue) {\n    super.requestUpdateInternal(name, oldValue);\n    if (name === 'readOnly') {\n      this.__delegateReadOnly();\n    }\n  }\n\n  /** @param {import('@lion/core').PropertyValues } changedProperties */\n  firstUpdated(changedProperties) {\n    super.firstUpdated(changedProperties);\n    this.__delegateReadOnly();\n  }\n\n  /** @param {import('@lion/core').PropertyValues } changedProperties */\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    if (changedProperties.has('type')) {\n      this._inputNode.type = this.type;\n    }\n\n    if (changedProperties.has('placeholder')) {\n      this._inputNode.placeholder = this.placeholder;\n    }\n\n    if (changedProperties.has('disabled')) {\n      this._inputNode.disabled = this.disabled;\n      this.validate();\n    }\n\n    if (changedProperties.has('name')) {\n      this._inputNode.name = this.name;\n    }\n\n    if (changedProperties.has('autocomplete')) {\n      this._inputNode.autocomplete = /** @type {string} */ (this.autocomplete);\n    }\n  }\n\n  __delegateReadOnly() {\n    if (this._inputNode) {\n      this._inputNode.readOnly = this.readOnly;\n    }\n  }\n}\n","import { LionInput } from './src/LionInput.js';\n\ncustomElements.define('lion-input', LionInput);\n","import {\n  browserDetection,\n  css,\n  DisabledWithTabIndexMixin,\n  html,\n  LitElement,\n  SlotMixin,\n} from '@lion/core';\nimport '@lion/core/src/differentKeyEventNamesShimIE.js';\n\nconst isKeyboardClickEvent = (/** @type {KeyboardEvent} */ e) => e.key === ' ' || e.key === 'Enter';\nconst isSpaceKeyboardClickEvent = (/** @type {KeyboardEvent} */ e) => e.key === ' ';\n\nexport class LionButton extends DisabledWithTabIndexMixin(SlotMixin(LitElement)) {\n  static get properties() {\n    return {\n      role: {\n        type: String,\n        reflect: true,\n      },\n      active: {\n        type: Boolean,\n        reflect: true,\n      },\n      type: {\n        type: String,\n        reflect: true,\n      },\n    };\n  }\n\n  render() {\n    return html`\n      ${this._beforeTemplate()}\n      <div class=\"button-content\" id=\"${this._buttonId}\"><slot></slot></div>\n      ${this._afterTemplate()}\n      <slot name=\"_button\"></slot>\n    `;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _beforeTemplate() {\n    return html``;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _afterTemplate() {\n    return html``;\n  }\n\n  static get styles() {\n    return [\n      css`\n        :host {\n          position: relative;\n          display: inline-flex;\n          box-sizing: border-box;\n          vertical-align: middle;\n          line-height: 24px;\n          background: #eee; /* minimal styling to make it recognizable as btn */\n          padding: 8px; /* padding to fix with min-height */\n          outline: none; /* focus style handled below */\n          cursor: default; /* /* we should always see the default arrow, never a caret */\n          user-select: none;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n        }\n\n        :host::before {\n          content: '';\n\n          /* center vertically and horizontally */\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n\n          /* touch area (comes into play when button height goes below this one) */\n          /* src = https://www.smashingmagazine.com/2012/02/finger-friendly-design-ideal-mobile-touchscreen-target-sizes/ */\n          min-height: 40px;\n          min-width: 40px;\n          width: 100%;\n          height: 100%;\n        }\n\n        .button-content {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        :host ::slotted(button) {\n          position: absolute;\n          top: 0;\n          left: 0;\n          clip: rect(0 0 0 0);\n          clip-path: inset(50%);\n          overflow: hidden;\n          white-space: nowrap;\n          height: 1px;\n          width: 1px;\n          padding: 0; /* reset default agent styles */\n          border: 0; /* reset default agent styles */\n        }\n\n        /* Show focus styles on keyboard focus. */\n        :host(:focus:not([disabled])),\n        :host(:focus-visible) {\n          /* if you extend, please overwrite */\n          outline: 2px solid #bde4ff;\n        }\n\n        /* Hide focus styles if they're not needed, for example,\n        when an element receives focus via the mouse. */\n        :host(:focus:not(:focus-visible)) {\n          outline: 0;\n        }\n\n        :host(:hover) {\n          /* if you extend, please overwrite */\n          background: #f4f6f7;\n        }\n\n        :host(:active), /* keep native :active to render quickly where possible */\n        :host([active]) /* use custom [active] to fix IE11 */ {\n          /* if you extend, please overwrite */\n          background: gray;\n        }\n\n        :host([hidden]) {\n          display: none;\n        }\n\n        :host([disabled]) {\n          pointer-events: none;\n          /* if you extend, please overwrite */\n          background: lightgray;\n          color: #adadad;\n          fill: #adadad;\n        }\n      `,\n    ];\n  }\n\n  /** @type {HTMLButtonElement} */\n  get _nativeButtonNode() {\n    return /** @type {HTMLButtonElement} */ (Array.from(this.children).find(\n      child => child.slot === '_button',\n    ));\n  }\n\n  // @ts-ignore\n  get slots() {\n    return {\n      ...super.slots,\n      _button: () => {\n        /** @type {HTMLButtonElement} */\n        const buttonEl = document.createElement('button');\n        buttonEl.setAttribute('tabindex', '-1');\n        buttonEl.setAttribute('aria-hidden', 'true');\n        return buttonEl;\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.role = 'button';\n    this.type = 'submit';\n    this.active = false;\n    this.__setupDelegationInConstructor();\n\n    this._buttonId = `button-${Math.random().toString(36).substr(2, 10)}`;\n    if (browserDetection.isIE11) {\n      this.updateComplete.then(() => {\n        if (!this.hasAttribute('aria-labelledby')) {\n          this.setAttribute('aria-labelledby', this._buttonId);\n        }\n      });\n    }\n\n    /** @type {HTMLButtonElement} */\n    this.__submitAndResetHelperButton = document.createElement('button');\n\n    /** @type {EventListener} */\n    this.__preventEventLeakage = this.__preventEventLeakage.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.__setupEvents();\n    // Old browsers (IE11, Old Edge, Firefox ESR 60) don't have the `.form`\n    // property defined immediately on the native button, so do this after first render on connected.\n    this.updateComplete.then(() => {\n      this.__setupSubmitAndResetHelperOnConnected();\n    });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.__teardownEvents();\n    this.__teardownSubmitAndResetHelperOnDisconnected();\n  }\n\n  /**\n   * @param {import('@lion/core').PropertyValues } changedProperties\n   */\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    if (changedProperties.has('type')) {\n      const native = this._nativeButtonNode;\n      if (native) {\n        native.type = this.type;\n      }\n    }\n    if (changedProperties.has('disabled')) {\n      this.setAttribute('aria-disabled', `${this.disabled}`); // create mixin if we need it in more places\n    }\n  }\n\n  /**\n   * Delegate click, by flashing a native button as a direct child\n   * of the form, and firing click on this button. This will fire the form submit\n   * without side effects caused by the click bubbling back up to lion-button.\n   * @param {Event} ev\n   */\n  async __clickDelegationHandler(ev) {\n    // Wait for updateComplete if form is not yet available\n    if (!this._form) {\n      await this.updateComplete;\n    }\n\n    if ((this.type === 'submit' || this.type === 'reset') && ev.target === this && this._form) {\n      /**\n       * Here, we make sure our button is compatible with a native form, by firing a click\n       * from a native button that our form responds to. The native button we spawn will be a direct\n       * child of the form, plus the click event that will be sent will be prevented from\n       * propagating outside of the form. This will keep the amount of 'noise' (click events\n       * from 'ghost elements' that can be intercepted by listeners in the bubble chain) to an\n       * absolute minimum.\n       */\n      this.__submitAndResetHelperButton.type = this.type;\n\n      this._form.appendChild(this.__submitAndResetHelperButton);\n      // Form submission or reset will happen\n      this.__submitAndResetHelperButton.click();\n      this._form.removeChild(this.__submitAndResetHelperButton);\n    }\n  }\n\n  __setupDelegationInConstructor() {\n    // do not move to connectedCallback, otherwise IE11 breaks.\n    // more info: https://github.com/ing-bank/lion/issues/179#issuecomment-511763835\n    this.addEventListener('click', this.__clickDelegationHandler, true);\n  }\n\n  __setupEvents() {\n    this.addEventListener('mousedown', this.__mousedownHandler);\n    this.addEventListener('keydown', this.__keydownHandler);\n    this.addEventListener('keyup', this.__keyupHandler);\n  }\n\n  __teardownEvents() {\n    this.removeEventListener('mousedown', this.__mousedownHandler);\n    this.removeEventListener('keydown', this.__keydownHandler);\n    this.removeEventListener('keyup', this.__keyupHandler);\n    this.removeEventListener('click', this.__clickDelegationHandler);\n  }\n\n  __mousedownHandler() {\n    this.active = true;\n    const mouseupHandler = () => {\n      this.active = false;\n      document.removeEventListener('mouseup', mouseupHandler);\n      this.removeEventListener('mouseup', mouseupHandler);\n    };\n    document.addEventListener('mouseup', mouseupHandler);\n    this.addEventListener('mouseup', mouseupHandler);\n  }\n\n  /**\n   * @param {KeyboardEvent} e\n   */\n  __keydownHandler(e) {\n    if (this.active || !isKeyboardClickEvent(e)) {\n      if (isSpaceKeyboardClickEvent(e)) {\n        e.preventDefault();\n      }\n      return;\n    }\n\n    if (isSpaceKeyboardClickEvent(e)) {\n      e.preventDefault();\n    }\n\n    this.active = true;\n    /**\n     * @param {KeyboardEvent} keyupEvent\n     */\n    const keyupHandler = keyupEvent => {\n      if (isKeyboardClickEvent(keyupEvent)) {\n        this.active = false;\n        document.removeEventListener('keyup', keyupHandler, true);\n      }\n    };\n    document.addEventListener('keyup', keyupHandler, true);\n  }\n\n  /**\n   * @param {KeyboardEvent} e\n   */\n  __keyupHandler(e) {\n    if (isKeyboardClickEvent(e)) {\n      // Fixes IE11 double submit/click. Enter keypress somehow triggers the __keyUpHandler on the native <button>\n      if (e.srcElement && e.srcElement !== this) {\n        return;\n      }\n      // dispatch click\n      this.click();\n    }\n  }\n\n  /**\n   * Prevents that someone who listens outside or on form catches the click event\n   * @param {Event} e\n   */\n  __preventEventLeakage(e) {\n    if (e.target === this.__submitAndResetHelperButton) {\n      e.stopImmediatePropagation();\n    }\n  }\n\n  __setupSubmitAndResetHelperOnConnected() {\n    this._form = this._nativeButtonNode.form;\n\n    if (this._form) {\n      this._form.addEventListener('click', this.__preventEventLeakage);\n    }\n  }\n\n  __teardownSubmitAndResetHelperOnDisconnected() {\n    if (this._form) {\n      this._form.removeEventListener('click', this.__preventEventLeakage);\n    }\n  }\n}\n","import { LionButton } from './src/LionButton.js';\n\ncustomElements.define('lion-button', LionButton);\n","import { user, products, list, save, clear, listen } from './utils/localstorage'\nimport pkg from './package.json';\nimport '@lion/input/lion-input.js';\nimport '@lion/button/lion-button.js';\nimport '@lion/radio-group/lion-radio.js';\nimport '@lion/radio-group/lion-radio-group.js';\nimport '@lion/form/lion-form.js';\n\nconsole.log(`running version ${pkg.version}`);\n\nconst get = (id) => list().find((product) => product.productId === id)\n\nconst exists = (id) => !!get(id)\n\nconst add = (product, quantity) => isValid(product) ? exists(product.productId) ? update(product.productId, 'quantity', get(product.productId).quantity + (quantity || 1)) : save(list().concat({ ...product, quantity: quantity || 1 })) : null;\n\nconst remove = (id) => save(list().filter((product) => product.productId !== id))\n\nconst quantity = (id, diff) => exists(id) && get(id).quantity + diff > 0 ? update(id, 'quantity', get(id).quantity + diff) : remove(id);\n\nconst update = (id, field, value) => save(list().map((product) => product.productId === id ? ({ ...product, [field]: value }) : product))\n\nconst total = (cb) => list().reduce((sum, product) => isCallback(cb) ? cb(sum, product) : (sum += subtotal(product)), 0);\n\nconst destroy = () => clear()\n\nconst onChange = (cb) => isCallback(cb) ? listen(cb) : console.log(typeof cb)\n\nconst isValid = (product) => product.productId && product.price\n\nconst subtotal = (product) => isCalcable(product) ? (product.price * product.quantity) : 0\n\nconst isCalcable = (product) => (product && product.price && product.quantity)\n\nconst isCallback = (cb) => cb && typeof cb === \"function\"\n\nconst cartCount = () => list().length;\n\nexport { user, products, list, get, add, remove, update, quantity, total, destroy, exists, subtotal, onChange, cartCount };\n\n"],"names":["_typeof","obj","Symbol","iterator","module","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","STORAGE_KEY","saveListener","listen","cb","list","JSON","parse","localStorage","getItem","products","stringify","data","user","userData","save","setItem","clear","removeItem","render","litRender","appliedClassMixins","WeakMap","wasMixinPreviouslyApplied","mixin","superClass","klass","get","getPrototypeOf","dedupeMixin","mixedClass","set","Cache","parent","_parent","_cache","Map","has","counter","Math","round","random","chars","tagRegExp","RegExp","isValid","tag","exec","isTagRegistered","name","registry","incrementTagName","tagName","newTagName","createUniqueTag","customElements","Error","globalTagsCache","addToGlobalTagsCache","getFromGlobalTagsCache","extendsHTMLElement","isPrototypeOf","call","HTMLElement","defineElement","define","storeLazyElementInCache","tagsCache","defineElementAndStoreInCache","registerElement","undefined","defineScopedElement","re","globalCache","matchAll","str","matches","result","push","transformTemplate","strings","scopedElements","templateCache","transformedStrings","map","acc","i","length","item","block","start","index","end","isClosingTag","indexOf","slice","transform","getTemplateCacheKey","type","scopeName","compatibleShadyCSSVersion","ShadyCSS","window","prepareTemplateDom","shadyTemplateFactory","cacheKey","templateCaches","stringsArray","keyString","template","join","marker","element","getTemplateElement","Template","getTemplateCache","tagsCaches","getTagsCache","transformArray","items","TemplateResult","Array","isArray","values","processor","scopedElementsTemplateFactory","newTemplate","ScopedElementsMixinImplementation","superclass","ScopedElementsHost","container","options","eventContext","templateFactory","getScopedTagName","ScopedElementsMixin","DisabledMixinImplementation","properties","disabled","Boolean","reflect","_requestedToBeDisabled","__isUserSettingDisabled","__restoreDisabledTo","makeRequestToBeDisabled","__internalSetDisabled","retractRequestToBeDisabled","requestUpdateInternal","oldValue","DisabledMixin","DisabledWithTabIndexMixinImplementation","tabIndex","Number","attribute","__isUserSettingTabIndex","__restoreTabIndexTo","__internalSetTabIndex","firstUpdated","changedProperties","DisabledWithTabIndexMixin","SlotMixinImplementation","slots","__privateSlots","Set","connectedCallback","_connectSlotMixin","__isConnectedSlotMixin","keys","forEach","slotName","querySelector","slotFactory","slotContent","Element","setAttribute","appendChild","add","_isPrivateSlot","SlotMixin","checkChrome","flavor","isChromium","chrome","winNav","navigator","vendorName","vendor","isOpera","opr","isIEedge","userAgent","isIOSChrome","match","browserDetection","isIE11","test","isChrome","isMac","appVersion","FormRegisteringMixinImplementation","_parentFormGroup","dispatchEvent","CustomEvent","detail","bubbles","disconnectedCallback","removeFormElement","FormRegisteringMixin","moveDownConditions","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","getAriaElementsInRightDomOrder","descriptionElements","reverse","putPrecedingSiblingsAndLocalParentsFirst","a","b","pos","compareDocumentPosition","includes","descriptionEls","filter","el","sort","Unparseable","viewValue","toString","uuid","prefix","substr","FormControlMixinImplementation","FormControlMixin","String","readOnly","label","helpText","modelValue","_ariaLabelledNodes","_ariaDescribedNodes","_repropagationRole","_isRepropagationEndpoint","__label","_labelNode","textContent","newValue","requestUpdate","__helpText","_helpTextNode","fieldName","__fieldName","document","createElement","_inputNode","__getDirectSlotChild","_feedbackNode","_inputId","localName","addEventListener","__repropagateChildrenValues","_onLabelClick","bind","_enhanceLightDomClasses","_enhanceLightDomA11y","_triggerInitialModelValueChangedEvent","removeEventListener","updated","__reflectAriaAttr","__reorderAriaLabelledNodes","__reorderAriaDescribedNodes","oldName","newName","__dispatchInitialModelValueChangedEvent","classList","id","addToAriaLabelledBy","idPrefix","addToAriaDescribedBy","_enhanceLightDomA11yForAdditionalSlots","additionalSlots","additionalSlot","hasAttribute","attrName","nodes","reorder","insideNodes","n","contains","outsideNodes","string","html","_groupOneTemplate","_groupTwoTemplate","_labelTemplate","_helpTextTemplate","_inputGroupTemplate","_feedbackTemplate","_inputGroupBeforeTemplate","_inputGroupPrefixTemplate","_inputGroupInputTemplate","_inputGroupSuffixTemplate","_inputGroupAfterTemplate","from","children","find","child","slot","nothing","_isEmpty","Date","isNumberValue","isNaN","isBooleanValue","styles","superCtor","css","_getAriaDescriptionElements","customConfig","__repropagateChildrenInitialized","formPath","initialize","isTriggeredByUser","_onBeforeRepropagateChildrenValues","ev","target","isEndpoint","stopImmediatePropagation","isGroup","isSelfInitializing","isChildGroupInitializing","_repropagationCondition","parentFormPath","multipleChoice","checked","FocusMixinImplementation","FocusMixin","focused","__registerEventsForFocusMixin","__teardownEventsForFocusMixin","focus","native","blur","__onFocus","__onBlur","__redispatchFocus","stopPropagation","Event","__redispatchBlur","__redispatchFocusin","composed","__redispatchFocusout","sym","for","SingletonManagerClass","_map","singletonManager","createCommonjsModule","fn","exports","LONG","SHORT","NARROW","NUMERIC","TWODIGIT","formatMessageFormats","number","decimal","style","integer","maximumFractionDigits","currency","percent","default","date","short","month","day","year","medium","long","full","weekday","time","hour","minute","second","timeZoneName","duration","hours","minimumIntegerDigits","minutes","seconds","parseNumberPattern","pattern","syms","replace","currencyDisplay","toUpperCase","useGrouping","size","minimumSignificantDigits","min","max","maximumSignificantDigits","parts","split","fraction","minimumFractionDigits","parseDatePattern","current","era","hour12","lookupClosestLocale","locale","available","locales","concat","l","ll","candidate","pop","zero","one","two","few","many","other","f","s","floor","abs","v","t","plurals","af","cardinal","ak","am","ar","ars","as","ordinal","asa","ast","az","be","bem","bez","bg","bh","bn","br","brx","bs","ca","ce","cgg","chr","ckb","cs","cy","da","de","dsb","dv","ee","en","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gd","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hsb","hu","hy","io","is","it","iu","iw","jgo","ji","jmc","ka","kab","kaj","kcg","kk","kkj","kl","kn","ks","ksb","ksh","ku","kw","ky","lag","lb","lg","ln","lt","lv","mas","mg","mgo","mk","ml","mn","mo","mr","mt","nah","naq","nb","nd","ne","nl","nn","nnh","no","nr","nso","ny","nyn","om","or","os","pa","pap","pl","prg","ps","pt","rm","ro","rof","ru","rwk","saq","scn","sd","sdh","se","seh","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","ta","te","teo","ti","tig","tk","tl","tn","tr","ts","tzm","ug","uk","ur","uz","ve","vo","vun","wa","wae","xh","xog","yi","zu","lo","ms","vi","formatMessageInterpret","interpret","types","interpretAST","toParts","elements","interpretElement","format","args","reduce","part","message","e","offset","formatter","defaults","getArg","getFrmt","frmt","ii","interpretNumber","Intl","NumberFormat","interpretDuration","fs","fm","fh","sep","isFinite","h","m","dur","interpretDateTime","DateTimeFormat","interpretPlural","pluralType","pluralRules","PluralRules","supportedLocalesOf","select","returnOther","clause","interpretSelect","spellout","plural","selectordinal","formatMessageParse","ARG_OPN","ARG_CLS","ARG_SEP","NUM_ARG","TAG_OPN","TAG_CLS","TAG_END","TAG_SELF_CLS","ESC","OFFSET","simpleTypes","submTypes","parseAST","tagsType","tokens","parentType","text","parseText","expected","parsePlaceholder","isHashSpecial","isAngleSpecial","isArgStyle","char","isWhitespace","charCodeAt","code","skipWhitespace","parseTag","parseId","arg","parsePluralOffset","parseSubMessages","parseSimpleFormat","closeId","isTag","isDigit","selector","parseSubMessage","found","lines","line","column","errorMessage","SyntaxError","create","supportedExp","internals","MessageFormat","TypeError","messageFormat","defineProperties","formatToParts","resolvedOptions","toStringTag","requestedLocales","isLocalizeESModule","LocalizeManager","autoLoadOnLocaleChange","fallbackLocale","__delegationTarget","createDocumentFragment","_autoLoadOnLocaleChange","_fallbackLocale","__storage","__namespacePatternsMap","__namespaceLoadersCache","__namespaceLoaderPromisesCache","formatNumberOptions","returnIfNaN","postProcessors","formatDateOptions","initialLocale","documentElement","getAttribute","_supportExternalTranslationTools","_setupTranslationToolSupport","lang","_setupHtmlLangAttributeObserver","_langAttrSetByTranslationTool","teardown","_teardownHtmlLangAttributeObserver","__locale","oldLocale","_setHtmlLangAttribute","__handleLanguageOnly","_onLocaleChanged","loadingComplete","Promise","all","reset","addData","namespace","_isNamespaceInCache","setupNamespaceLoader","loader","loadNamespaces","namespaces","loadNamespace","namespaceObj","isDynamicImport","resolve","existingLoaderPromise","_getCachedNamespaceLoaderPromise","_loadNamespaceData","msg","vars","opts","_getMessageForKeys","_htmlLangAttributeObserver","MutationObserver","mutations","mutation","observe","attributes","attributeFilter","attributeOldValue","disconnect","_getNamespaceLoader","loaderPromise","_getNamespaceLoaderPromise","_cacheNamespaceLoaderPromise","then","_namespaceObj","_lookupNamespaceLoader","catch","_getLangFromLocale","fallbackLang","promise","isMatchingString","isMatchingRegexp","substring","listener","event","newLocale","_loadAllMissing","oldLocaleNamespaces","newLocaleNamespaces","promises","newNamespaceData","_getMessageForKey","reversedKeys","ns","namesString","messages","names","setDatePostProcessorForLocale","postProcessor","setNumberPostProcessorForLocale","localize","AsyncQueue","__running","__queue","task","complete","__callComplete","__run","shift","pascalCase","charAt","SyncUpdatableMixinImplementation","__SyncUpdatableNamespace","connected","__syncUpdatableInitialize","__syncUpdatableHasChanged","_classProperties","hasChanged","ctor","initialized","queue","updateSync","SyncUpdatableMixin","LionValidationFeedback","LitElement","feedbackData","_messageTemplate","currentType","clearTimeout","removeMessage","setTimeout","removeAttribute","validator","Validator","param","config","__fakeExtendsEventTarget","__param","__config","validatorName","async","execute","p","c","_getMessage","composedData","params","getMessage","onFormControlConnect","formControl","onFormControlDisconnect","abortExecution","delegate","delegatedAddEventListener","delegatedRemoveEventListener","delegatedDispatchEvent","ResultValidator","executeOnResults","regularValidationResult","prevValidationResult","validators","Required","arrayDiff","array1","array2","x","ValidateMixinImplementation","scopedElementsCtor","hasFeedbackFor","shouldShowFeedbackFor","showsFeedbackFor","converter","fromAttribute","toAttribute","validationStates","isPending","defaultValidators","_visibleMessagesAmount","validationTypes","feedback","_allValidators","__syncValidationResult","__asyncValidationResult","__validationResult","__onValidatorUpdated","_updateFeedbackComponent","__validateInitialized","validate","__setupValidators","clearCurrentResult","_updateShouldShowFeedbackFor","_hasFeedbackVisibleFor","diff","__clearValidationResults","__finishValidation","source","hasAsync","__storePrevResult","__executeValidators","__prevValidationResult","validateComplete","__validateCompleteResolve","requiredValidator","isEmpty","__isEmpty","filteredValidators","syncValidators","vCtor","asyncValidators","__executeSyncValidators","__executeAsyncValidators","node","resultPromises","booleanResults","r","__executeResultValidators","resultValidators","syncAndAsyncOutcome","resultOutCome","events","__prevValidators","errorType","console","error","__getFeedbackMessages","__feedbackQueue","__prioritizedResult","_prioritizeAndFilterFeedback","validationResult","messageMap","feedbackComplete","_showFeedbackConditionFor","_","res","ValidateMixin","FormatMixinImplementation","FormatMixin","formattedValue","serializedValue","formatOn","formatOptions","oldVal","_onModelValueChanged","_calculateValues","__value","parser","serializer","deserializer","__preventRecursiveTrigger","__callParser","__callFormatter","_reflectBackFormattedValueToUser","__isHandlingUserInput","_dispatchModelValueChangedEvent","_syncValueUpwards","_reflectBackOn","_proxyInputEvent","_onUserInputChanged","_reflectBackFormattedValueDebounced","InteractionStateMixinImplementation","InteractionStateMixin","touched","dirty","filled","prefilled","submitted","_onTouchedChanged","_onDirtyChanged","_leaveEvent","_valueChangedEvent","_iStateOnLeave","_iStateOnValueChange","initInteractionState","resetInteractionState","LionField","autocomplete","_initialModelValue","_onChange","NativeTextFieldMixinImplementation","NativeTextFieldMixin","selectionStart","selectionEnd","_setValueAndPreserveCaret","HTMLSelectElement","LionInput","placeholder","input","__delegateReadOnly","isKeyboardClickEvent","isSpaceKeyboardClickEvent","LionButton","role","active","_beforeTemplate","_buttonId","_afterTemplate","_nativeButtonNode","_button","buttonEl","__setupDelegationInConstructor","updateComplete","__submitAndResetHelperButton","__preventEventLeakage","__setupEvents","__setupSubmitAndResetHelperOnConnected","__teardownEvents","__teardownSubmitAndResetHelperOnDisconnected","__clickDelegationHandler","_form","click","removeChild","__mousedownHandler","__keydownHandler","__keyupHandler","mouseupHandler","preventDefault","keyupHandler","keyupEvent","srcElement","form","log","pkg","version","product","productId","exists","quantity","update","remove","field","total","sum","isCallback","subtotal","destroy","onChange","price","isCalcable","cartCount"],"mappings":"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AAiB,QAAjB,IAA6BA,KAAK,KAAK,IAAvC,IAA+C,EAAEA,KAAK,YAAY0T,IAAnB,CAAnD,EAA6E;AAC3E,aAAO,CAACzT,MAAM,CAAC2K,IAAP,CAAY5K,KAAZ,EAAmB4F,MAA3B;AACD,KAXoC;AAcrC;;;AACA,UAAM+N,aAAa,GAAG,OAAO3T,KAAP,KAAiB,QAAjB,KAA8BA,KAAK,KAAK,CAAV,IAAe6J,MAAM,CAAC+J,KAAP,CAAa5T,KAAb,CAA7C,CAAtB;AACA,UAAM6T,cAAc,GAAG,OAAO7T,KAAP,KAAiB,SAAjB,IAA8BA,KAAK,KAAK,KAA/D;AAEA,WAAO,CAACA,KAAD,IAAU,CAAC2T,aAAX,IAA4B,CAACE,cAApC;AACD;AAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACqB,aAANC,MAAM,GAAG;AAClB,UAAMC,SAAS;AAAG;AAAuD,UAAMlU,SAAN,CACtED,WADH;AAEA,WAAO,CACLmU,SAAS,CAACD,MAAV,GAAmBC,SAAS,CAACD,MAA7B,GAAsC,EADjC,EAELE,GAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAnDa,CAAP;AAqDD;AAED;AACJ;AACA;AACI;;;AACAC,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"}