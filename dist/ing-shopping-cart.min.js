var shoppingCart=(function(exports){'use strict';function createCommonjsModule(fn) {
  var module = { exports: {} };
	return fn(module, module.exports), module.exports;
}var _typeof_1 = createCommonjsModule(function (module) {
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

module.exports = _typeof;
});function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var defineProperty = _defineProperty;var basket = [
	{
		productId: 1226739,
		skuId: 301526,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "My First Voucher",
		price: 40,
		oldPrice: 60,
		availableStock: 1,
		mediaUrl: "voucherjpg.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1007404,
		skuId: 302396,
		deliveryTime: "Binnen 5 werkdagen in huis",
		fulfillmentType: "DROP_SHIP",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Kneipp Fragrances Pakket",
		price: 25,
		oldPrice: 40,
		availableStock: 4,
		mediaUrl: "kneipp-luxe-home.2.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1006739,
		skuId: 301586,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Philips Hue kortingsvoucher",
		price: 50,
		oldPrice: 65,
		availableStock: 301,
		mediaUrl: "philips.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1006739,
		skuId: 301586,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Philips Hue kortingsvoucher",
		price: 50,
		oldPrice: 65,
		availableStock: 301,
		mediaUrl: "philips.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1006739,
		skuId: 301586,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Philips Hue kortingsvoucher",
		price: 50,
		oldPrice: 65,
		availableStock: 301,
		mediaUrl: "philips.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1006739,
		skuId: 301586,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Philips Hue kortingsvoucher",
		price: 50,
		oldPrice: 65,
		availableStock: 301,
		mediaUrl: "philips.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1226739,
		skuId: 301526,
		deliveryTime: "Dit product ontvang je direct in je mailbox",
		fulfillmentType: "VOUCHER",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "My First Voucher",
		price: 40,
		oldPrice: 60,
		availableStock: 1,
		mediaUrl: "voucherjpg.jpg",
		quantity: 1,
		extraCostValue: 0
	},
	{
		productId: 1007404,
		skuId: 302396,
		deliveryTime: "Binnen 5 werkdagen in huis",
		fulfillmentType: "DROP_SHIP",
		phoneNumberRequired: false,
		ageRestriction: false,
		title: "Kneipp Fragrances Pakket",
		price: 25,
		oldPrice: 40,
		availableStock: 4,
		mediaUrl: "kneipp-luxe-home.2.jpg",
		quantity: 1,
		extraCostValue: 0
	}
];
var basketSummary = {
	quantity: 2,
	price: 26,
	extraCostValue: 0,
	totalPrice: 26
};
var product = {
	basket: basket,
	basketSummary: basketSummary
};var data=/*#__PURE__*/Object.freeze({__proto__:null,basket: basket,basketSummary: basketSummary,'default': product});var STORAGE_KEY = '__cart';
var saveListener = null;
var listen = function listen(cb) {
  saveListener = cb;
}; // ugly but storage listener is not working for the same window..

var list = function list(key) {
  return JSON.parse(localStorage.getItem(key || STORAGE_KEY)) || [];
};
var products = function products() {
  return JSON.parse(JSON.stringify(data)) || [];
};
var save = function save(data, key) {
  localStorage.setItem(key || STORAGE_KEY, JSON.stringify(data));
  if (saveListener) saveListener(list(key || STORAGE_KEY));
};
var clear = function clear(key) {
  localStorage.removeItem(key || STORAGE_KEY);
  if (saveListener) saveListener(list(key || STORAGE_KEY));
};var name = "ing-simple-cart";
var version = "1.0.15";
var description = "Simple shopping cart on coding challenege using ES6 and Local Storage";
var main = "index.js";
var scripts = {
	test: "jest",
	build: "rollup -c"
};
var repository = {
	type: "git",
	url: "git+https://github.com/mani242530/ing-simple-cart.git"
};
var keywords = [
	"simple",
	"shopping",
	"cart",
	"coding",
	"challenge",
	"js",
	"javascript",
	"es6",
	"localstorage"
];
var author = "Manivannan Babu";
var license = "ISC";
var bugs = {
	url: "https://github.com/mani242530/ing-simple-cart/issues"
};
var homepage = "https://github.com/mani242530/ing-simple-cart#readme";
var devDependencies = {
	"@babel/cli": "^7.12.16",
	"@babel/core": "^7.12.16",
	"@babel/plugin-transform-runtime": "^7.12.15",
	"@babel/preset-env": "^7.12.16",
	"@babel/runtime": "^7.9.2",
	"@rollup/plugin-babel": "^5.3.0",
	"@rollup/plugin-commonjs": "^17.1.0",
	"@rollup/plugin-json": "^4.1.0",
	"@rollup/plugin-node-resolve": "^11.2.0",
	"babel-loader": "^8.1.0",
	"font-awesome": "^4.7.0",
	jest: "^24.9.0",
	nodemon: "^2.0.7",
	prettier: "^1.16.4",
	rollup: "^2.30.0",
	"rollup-plugin-terser": "^7.0.2"
};
var dependencies = {
	"@lion/button": "^0.8.11",
	"@lion/icon": "^0.9.5",
	"@lion/input": "^0.10.16"
};
var prettier = {
	printWidth: 100,
	singleQuote: true,
	arrowParens: "avoid",
	trailingComma: "all"
};
var pkg = {
	name: name,
	version: version,
	description: description,
	main: main,
	scripts: scripts,
	repository: repository,
	keywords: keywords,
	author: author,
	license: license,
	bugs: bugs,
	homepage: homepage,
	devDependencies: devDependencies,
	dependencies: dependencies,
	prettier: prettier
};function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }
// import '@lion/button/lion-button.js';

console.log("running version ".concat(pkg.version));

var get = function get(id) {
  return list().find(function (product) {
    return product.productId === id;
  });
};

var exists = function exists(id) {
  return !!get(id);
};

var add = function add(product, quantity) {
  return isValid(product) ? exists(product.productId) ? update(product.productId, 'quantity', get(product.productId).quantity + (quantity || 1)) : save(list().concat(_objectSpread(_objectSpread({}, product), {}, {
    quantity: quantity || 1
  }))) : null;
};

var remove = function remove(id) {
  return save(list().filter(function (product) {
    return product.productId !== id;
  }));
};

var quantity = function quantity(id, diff) {
  return exists(id) && get(id).quantity + diff > 0 ? update(id, 'quantity', get(id).quantity + diff) : remove(id);
};

var update = function update(id, field, value) {
  return save(list().map(function (product) {
    return product.productId === id ? _objectSpread(_objectSpread({}, product), {}, defineProperty({}, field, value)) : product;
  }));
};

var total = function total(cb) {
  return list().reduce(function (sum, product) {
    return isCallback(cb) ? cb(sum, product) : sum += subtotal(product);
  }, 0);
};

var destroy = function destroy() {
  return clear();
};

var onChange = function onChange(cb) {
  return isCallback(cb) ? listen(cb) : console.log(_typeof_1(cb));
};

var isValid = function isValid(product) {
  return product.productId && product.price;
};

var subtotal = function subtotal(product) {
  return isCalcable(product) ? product.price * product.quantity : 0;
};

var isCalcable = function isCalcable(product) {
  return product && product.price && product.quantity;
};

var isCallback = function isCallback(cb) {
  return cb && typeof cb === "function";
};

var isShowHideCartPanel = function isShowHideCartPanel() {
  return list().length === 0 ? document.getElementById("cart-panel").style.display = 'none' : document.getElementById("cart-panel").style.display = 'block';
};exports.add=add;exports.destroy=destroy;exports.exists=exists;exports.get=get;exports.isShowHideCartPanel=isShowHideCartPanel;exports.list=list;exports.onChange=onChange;exports.products=products;exports.quantity=quantity;exports.remove=remove;exports.subtotal=subtotal;exports.total=total;exports.update=update;Object.defineProperty(exports,'__esModule',{value:true});return exports;}({}));//# sourceMappingURL=ing-shopping-cart.min.js.map
